---
title: 第 3 章 - Azure RTOS TraceX の説明
description: この章では、Azure RTOS TraceX システム分析ツールの全体的な機能について説明します。これには、GUI の全体的な機能が含まれます。
author: philmea
ms.service: rtos
ms.topic: article
ms.date: 5/19/2020
ms.author: philmea
ms.openlocfilehash: 1c974b353c92e0a3cf51c92818794197cf999582
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104812440"
---
# <a name="chapter-3---description-of-azure-rtos-tracex"></a><span data-ttu-id="b6f56-103">第 3 章 - Azure RTOS TraceX の説明</span><span class="sxs-lookup"><span data-stu-id="b6f56-103">Chapter 3 - Description of Azure RTOS TraceX</span></span>

<span data-ttu-id="b6f56-104">この章では、Azure RTOS TraceX システム分析ツールの全体的な機能について説明します。これには、GUI の全体的な機能が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-104">This chapter describes the overall functionality of the Azure RTOS TraceX system analysis tool, including the overall functionality of its GUI.</span></span> 

## <a name="display-overview"></a><span data-ttu-id="b6f56-105">表示の概要</span><span class="sxs-lookup"><span data-stu-id="b6f56-105">Display Overview</span></span>

<span data-ttu-id="b6f56-106">**図 4** は、TraceX システム分析ツールのメインの表示ウィンドウを示したものです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-106">**Figure 4** shows the main display window of the TraceX system analysis tool.</span></span> <span data-ttu-id="b6f56-107">レイアウトはわかりやすく、実行コンテキストが左側の垂直の要素によって表されます。たとえば、初期化、割り込み、アイドル、各種スレッド エントリなどです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-107">The layout is straightforward—the execution contexts are represented by the vertical elements on the left side; e.g., initialization, interrupt, idle, and the various thread entries.</span></span> <span data-ttu-id="b6f56-108">各コンテキストで実行されるイベントは、同じコンテキスト行に水平方向に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-108">The events that take place in each context are displayed horizontally on the same context line.</span></span> <span data-ttu-id="b6f56-109">たとえば、次に示す **QR** イベントでは、"**_スレッド 2_ *_" が _* _tx_queue_receive_** に対して連続呼び出しを行っていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-109">For example, the **QR** events shown below show that **_thread 2_*_ is making successive calls to _*_tx_queue_receive_**.</span></span>

![TraceX システム分析ツールのメイン表示ウィンドウのスクリーンショット。](./media/user-guide/screen_shot_10.png)


<span data-ttu-id="b6f56-111">**図 5**</span><span class="sxs-lookup"><span data-stu-id="b6f56-111">**FIGURE 5**</span></span>

<span data-ttu-id="b6f56-112">コンテキストの変更は、コンテキスト行をつなぐ黒い縦線で表されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-112">Context changes are represented by the vertical black lines that connect the context lines.</span></span> <span data-ttu-id="b6f56-113">現在選択されているイベントは、赤い縦線で表されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-113">The currently selected event is represented by a solid red vertical line.</span></span> <span data-ttu-id="b6f56-114">この例では、イベント 494 が選択されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-114">In this example, event 494 is selected.</span></span>

## <a name="title-bar"></a><span data-ttu-id="b6f56-115">タイトル バー</span><span class="sxs-lookup"><span data-stu-id="b6f56-115">Title Bar</span></span>

<span data-ttu-id="b6f56-116">TraceX のタイトル バーには、いくつかの有用な情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-116">The TraceX title bar provides several pieces of useful information.</span></span> <span data-ttu-id="b6f56-117">1 つ目は、TraceX の現在のバージョンです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-117">First is the current version of TraceX.</span></span> <span data-ttu-id="b6f56-118">2 つ目は、現在開いているトレース ファイルの完全なパスです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-118">Second is the full path of the currently opened trace file.</span></span> <span data-ttu-id="b6f56-119">**図 6** の例では、**_TraceX_ *_ バージョン _* _6.0.0_ *_ に、_* _demo_threadx.trx_** トレース ファイルが表示されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-119">The example in **Figure 6** shows **_TraceX_*_ version _*_6.0.0_*_ is displaying the _*_demo_threadx.trx_** trace file.</span></span>

![TraceX のタイトル バーのスクリーンショット。](./media/user-guide/screen_shot_11.png)

<span data-ttu-id="b6f56-121">**図 6**</span><span class="sxs-lookup"><span data-stu-id="b6f56-121">**FIGURE 6**</span></span>

## <a name="tool-bar"></a><span data-ttu-id="b6f56-122">ツール バー</span><span class="sxs-lookup"><span data-stu-id="b6f56-122">Tool Bar</span></span>

<span data-ttu-id="b6f56-123">TraceX ツールバーには、トレース ファイルを開いたり、その表示の要素を制御したりするためのボタンがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-123">The TraceX tool bar provides several buttons to open trace files and control elements of their display.</span></span>

![TraceX ツール バーのスクリーンショット。](./media/user-guide/screen_shot_12.png)


<span data-ttu-id="b6f56-125">**図 7**</span><span class="sxs-lookup"><span data-stu-id="b6f56-125">**FIGURE 7**</span></span>

<span data-ttu-id="b6f56-126">TraceX のツール バーのボタン (左から右) は、次のように定義されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-126">The TraceX tool bar buttons—from left to right—are defined as follows:</span></span>
                                             
| <span data-ttu-id="b6f56-127">**ボタン**</span><span class="sxs-lookup"><span data-stu-id="b6f56-127">**Button**</span></span>                         | <span data-ttu-id="b6f56-128">**Function**</span><span class="sxs-lookup"><span data-stu-id="b6f56-128">**Function**</span></span> |
| ---------------------------------- | ----------------------------------------------------------------------------------------------- |
| ![トレース ファイルを開くボタン](./media/user-guide/screen_shot_13.png)      | <span data-ttu-id="b6f56-130">トレース ファイルを開きます</span><span class="sxs-lookup"><span data-stu-id="b6f56-130">Open a trace file</span></span> |
| ![ユーザー ガイドを開くボタン](./media/user-guide/screen_shot_14.png)      | <span data-ttu-id="b6f56-132">このユーザー ガイドを開きます</span><span class="sxs-lookup"><span data-stu-id="b6f56-132">Open this User Guide</span></span> |
| ![実行プロファイルの生成ボタン](./media/user-guide/screen_shot_15.png)       | <span data-ttu-id="b6f56-134">実行プロファイルを生成します</span><span class="sxs-lookup"><span data-stu-id="b6f56-134">Generate execution profile</span></span> |
| ![ <span data-ttu-id="b6f56-135">パフォーマンス統計の生成ボタン</span><span class="sxs-lookup"><span data-stu-id="b6f56-135">Generate performance statistics button</span></span>](./media/user-guide/screen_shot_16.png)       | <span data-ttu-id="b6f56-136">パフォーマンス統計を生成します</span><span class="sxs-lookup"><span data-stu-id="b6f56-136">Generate performance statistics</span></span> |
| ![スレッド スタック使用状況の生成ボタン](./media/user-guide/screen_shot_17.png)       | <span data-ttu-id="b6f56-138">スレッド スタックの使用状況を生成します</span><span class="sxs-lookup"><span data-stu-id="b6f56-138">Generate Thread Stack usage</span></span> |
| ![選択したイベントの表示ボタン](./media/user-guide/screen_shot_18.png)       | <span data-ttu-id="b6f56-140">現在選択されているイベントを表示します</span><span class="sxs-lookup"><span data-stu-id="b6f56-140">Display currently selected event</span></span> |
| ![検索ボタン](./media/user-guide/screen_shot_19.png)      | <span data-ttu-id="b6f56-142">イベントを検索します</span><span class="sxs-lookup"><span data-stu-id="b6f56-142">Search for events</span></span> |
| ![拡大ボタン](./media/user-guide/screen_shot_20.png)      | <span data-ttu-id="b6f56-144">[拡大]</span><span class="sxs-lookup"><span data-stu-id="b6f56-144">Zoom in.</span></span> |
| ![拡大表示ボタン](./media/user-guide/screen_shot_21.png)      | <span data-ttu-id="b6f56-146">拡大表示のパーセンテージを選択します。100% を指定すると、現在のビュー内にトレース ファイル全体が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-146">Select percentage of display zoom, where 100% means the entire trace file is displayed within the current view.</span></span> |
| ![縮小ボタン](./media/user-guide/screen_shot_22.png)      | <span data-ttu-id="b6f56-148">縮小</span><span class="sxs-lookup"><span data-stu-id="b6f56-148">Zoom out.</span></span> |
| ![最初のイベントの選択ボタン](./media/user-guide/screen_shot_23.png)      | <span data-ttu-id="b6f56-150">最初のイベントを選択します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-150">Select first event.</span></span> |
| ![前のイベント ページの表示ボタン](./media/user-guide/screen_shot_24.png)      | <span data-ttu-id="b6f56-152">前のイベント ページを表示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-152">Display previous event page.</span></span> |
| ![前のイベントの表示ボタン](./media/user-guide/screen_shot_25.png)      | <span data-ttu-id="b6f56-154">前のイベントを表示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-154">Display previous event.</span></span> |
| ![次へ/前へナビゲーション ボタン](./media/user-guide/screen_shot_26.png)      | <span data-ttu-id="b6f56-156">[次へ/前へ] ナビゲーション ボタンの動作を決定します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-156">Determine how the next/previous navigation buttons operate.</span></span> <span data-ttu-id="b6f56-157">"\***イベント** _" が選択されている場合、ナビゲーションは次/前のイベントに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-157">If \***Event** _ is selected, navigation is done on the next/previous event.</span></span> <span data-ttu-id="b6f56-158">"_\*_コンテキスト_\*_" が選択されている場合、ナビゲーションは、指定されたコンテキスト上の次/前のイベントに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-158">If _*_Context_*_ is selected, navigation is done on the next/previous event on the specified context.</span></span> <span data-ttu-id="b6f56-159">"_\*_オブジェクト_\*_" が選択されている場合、ナビゲーションは、指定されたオブジェクトの次/前のイベント (特定のキューに関連付けられているイベントなど) に対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-159">If _*_Object_*_ is selected, navigation is done on the next/previous event of the specified object; e.g., events associated with a specific queue.</span></span> <span data-ttu-id="b6f56-160">"_\*_切り替え_\*_" が選択されている場合、ナビゲーションは次/前のコンテキスト変更に対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-160">If _*_Switches_*_ is selected, navigation is done on the next/previous change in context.</span></span> <span data-ttu-id="b6f56-161">"_ \*_ID_\*\*" が選択されている場合、ナビゲーションは、指定されたイベント ID の次/前のイベントに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-161">If _ *_ID_*\* is selected, navigation is done on the next/previous event of the specified event ID.</span></span> |
| ![次のイベントの表示ボタン](./media/user-guide/screen_shot_27.png)      | <span data-ttu-id="b6f56-163">次のイベントを表示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-163">Display next event.</span></span> |
| ![次のイベント ページの表示ボタン](./media/user-guide/screen_shot_28.png)      | <span data-ttu-id="b6f56-165">次のイベント ページを表示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-165">Display next event page.</span></span> |
| ![最後のイベントの選択ボタン](./media/user-guide/screen_shot_29.png)      | <span data-ttu-id="b6f56-167">最後のイベントを選択します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-167">Select last event.</span></span> |

## <a name="display-mode-tabs"></a><span data-ttu-id="b6f56-168">表示モード タブ</span><span class="sxs-lookup"><span data-stu-id="b6f56-168">Display Mode Tabs</span></span>

<span data-ttu-id="b6f56-169">TraceX では、システム イベントが 2 種類の方法で表示されます。"*シーケンシャル*" と "*相対時間*"です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-169">TraceX displays system events in two different ways: *sequential* and *time relative*.</span></span> <span data-ttu-id="b6f56-170">既定のモードはシーケンシャルで、**図 8** に示されているモードです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-170">The default mode is sequential and that is the mode shown in **Figure 8**.</span></span>

<span data-ttu-id="b6f56-171">モードの変更は簡単です。TraceX ウィンドウで、\* **[シーケンシャル ビュー]** _ または _\*_[時間ビュー]_\*_ の各タブを選択するだけです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-171">Changing the mode is as simple as selecting the ***Sequential View** _ or _*_Time View_\*_ tabs in the TraceX window.</span></span> <span data-ttu-id="b6f56-172">_*図 8*\* は、\*\*_[シーケンシャル ビュー]_\*_ と _ *_[時間ビュー]_*\* の各タブを示したものです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-172">_*Figure 8*\* shows the \**_Sequential View_*_ and _ *_Time View_*\* tabs.</span></span>

![シーケンシャル ビューと時間ビューの各タブのスクリーンショット。](./media/user-guide/screen_shot_30.png)

<span data-ttu-id="b6f56-174">**図 8**</span><span class="sxs-lookup"><span data-stu-id="b6f56-174">**FIGURE 8**</span></span>

## <a name="sequential-view-mode"></a><span data-ttu-id="b6f56-175">シーケンシャル ビュー モード</span><span class="sxs-lookup"><span data-stu-id="b6f56-175">Sequential View Mode</span></span>

<span data-ttu-id="b6f56-176">シーケンシャル ビュー モードは、_*Figure 8*\* に示されている \* **[シーケンシャル ビュー]** _ タブによって選択されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-176">The sequential view mode is selected by the ***Sequential View** _ tab shown in _*Figure 8\*\*.</span></span> <span data-ttu-id="b6f56-177">これは既定のモードです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-177">This is the default mode.</span></span> <span data-ttu-id="b6f56-178">このモードでは、イベント間の経過時間に関係なく、イベントが相互に連結されて表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-178">In this mode, events are shown im../mediately following each other, regardless of the elapsed time between them.</span></span> <span data-ttu-id="b6f56-179">**図 8** の表示領域の上にあるルーラーにも注目してください。</span><span class="sxs-lookup"><span data-stu-id="b6f56-179">Note also the ruler above the display area in **Figure 8**.</span></span> <span data-ttu-id="b6f56-180">ここには、トレース開始時点からの相対イベント番号が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-180">It shows the relative event number from the beginning of the trace.</span></span>

<span data-ttu-id="b6f56-181">このモードは既定のモードであり、システムの動作の概要を把握するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-181">This mode is the default mode and is useful in getting a good overview of what is going on in the system.</span></span>

## <a name="time-view-mode"></a><span data-ttu-id="b6f56-182">時間ビュー モード</span><span class="sxs-lookup"><span data-stu-id="b6f56-182">Time View Mode</span></span>

<span data-ttu-id="b6f56-183">時間ビュー モードは、\* **[時間ビュー]** _ ボタンによって選択されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-183">The time view mode is selected by the \***Time View** _ button.</span></span> <span data-ttu-id="b6f56-184">_ *図 9*\* は、**図 8** と同じイベントト レースを時間ビュー モードで表示したものです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-184">_ *Figure 9*\* shows the same event trace as **Figure 8** except in time view mode.</span></span> <span data-ttu-id="b6f56-185">このモードでは、イベントは時間の経過に即した方法で表示されます。緑色で塗られたバーが、イベント間の実行時間を示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-185">In this mode, events are shown in a time relative manner, with the solid green bar being used to show execution between events.</span></span> <span data-ttu-id="b6f56-186">このモードは、システム内のどこで大量の処理が行われているかを確認するのに役立ちます。これにより、開発者はシステムをチューニングして、パフォーマンスや応答性を向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-186">This mode is useful to see where the bulk of processing is taking place in the system, which can help developers tune their system for greater performance and/or responsiveness.</span></span>

![時間ビュー タブのスクリーンショット。](./media/user-guide/screen_shot_31.png)

<span data-ttu-id="b6f56-188">**図 9**</span><span class="sxs-lookup"><span data-stu-id="b6f56-188">**FIGURE 9**</span></span>

<span data-ttu-id="b6f56-189">**図 9** のイベント表示の上にあるルーラーにも注目してください。</span><span class="sxs-lookup"><span data-stu-id="b6f56-189">Note also the ruler above the event display in **Figure 9**.</span></span> <span data-ttu-id="b6f56-190">このルーラーには、トレース開始時点からの相対ティック数が表示されます。値は、ThreadX 内のイベント トレース ログに記録されたタイムスタンプから抽出されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-190">This ruler shows relative ticks from the beginning of the trace, as derived from the time stamp instrumented in the event trace logging inside of ThreadX.</span></span> <span data-ttu-id="b6f56-191">タイム スタンプの間隔が狭すぎる場合 (低周波タイマー) は、複数のイベントが同時に実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-191">If the time stamps are too close (low frequency timer), the events will run together.</span></span> <span data-ttu-id="b6f56-192">逆に、タイム スタンプの間隔が広すぎる場合 (高周波タイマー) は、イベントどうしの間隔が空きすぎます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-192">Conversely, if the time stamps are too far apart (high frequency timer), then the events will be too far apart.</span></span> <span data-ttu-id="b6f56-193">適切な頻度のタイムスタンプを選択することは、時間ビューをわかりやすくするための重要な考慮事項です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-193">Choosing the right frequency time stamp is an important consideration in making the time relative view meaningful.</span></span>

## <a name="system-summary-line"></a><span data-ttu-id="b6f56-194">システム概要行</span><span class="sxs-lookup"><span data-stu-id="b6f56-194">System Summary Line</span></span>

<span data-ttu-id="b6f56-195">TraceX には、すべてのイベントが同じ行に表示される、概要行もあります (**図 10** の上部にあるコンテキスト)。</span><span class="sxs-lookup"><span data-stu-id="b6f56-195">TraceX also provides a single summary line (the top context in **Figure 10**) that includes all events on the same line.</span></span> <span data-ttu-id="b6f56-196">これにより、複雑なシステムの概要を簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-196">This makes it easy to see an overview of a complex system.</span></span> <span data-ttu-id="b6f56-197">概要バーは、多数のスレッドがあるシステムで特に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-197">The summary bar is especially beneficial in systems that have many threads.</span></span> <span data-ttu-id="b6f56-198">このような概要行がないと、ユーザーは複雑なシステムの状況を把握するために、垂直スクロール バーを使って実行のコンテキストを確認しなければならなくなります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-198">Without such a summary line, you would have to follow complex system interactions using the vertical scroll bar to follow the context of execution.</span></span>

![[シーケンシャル ビュー] タブのシステム概要行のスクリーンショット。](./media/user-guide/screen_shot_32.png)


<span data-ttu-id="b6f56-200">**図 10**</span><span class="sxs-lookup"><span data-stu-id="b6f56-200">**FIGURE 10**</span></span>

<span data-ttu-id="b6f56-201">概要行にはコンテキストの概要が表示され、その下には対応するイベントの概要が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-201">The summary line contains a summary of the context as well as the corresponding event summary underneath.</span></span> <span data-ttu-id="b6f56-202">**図 10** に示されている例では、"**_スレッド 2_ *_" が実行中で、現在中断されていることが簡単にわかります。割り込みによって、"_* _スレッド 3_**"、"***スレッド 6** _"、"_*_スレッド 4_*_"、"_*_スレッド 7_\*_ " によるプリエンプションが発生し、その後 _ *_スレッド 2_* \* が実行を再開しています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-202">In the example shown in **Figure 10,** it is easy to see that **_thread 2_*_ is executing and interrupted. The interrupt results in preemption by _*_thread 3_**, ***thread 6** _, _*_thread 4_*_, and _*_thread 7_*_, after which _ *_thread 2_** resumes execution.</span></span>

## <a name="system-contexts"></a><span data-ttu-id="b6f56-203">システム コンテキスト</span><span class="sxs-lookup"><span data-stu-id="b6f56-203">System Contexts</span></span>

<span data-ttu-id="b6f56-204">TraceX では、**図 11** に示すように、画面の左側にシステム コンテキストが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-204">TraceX lists the system contexts on the left-hand side of the display, as shown in **Figure 11**.</span></span> <span data-ttu-id="b6f56-205">特定のコンテキストで発生したイベントは、そのコンテキストの右側の水平線上に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-205">Events that occur in a particular context are displayed on the horizontal line to the right of that context.</span></span> <span data-ttu-id="b6f56-206">これにより、ユーザーはイベントが発生したコンテキストを簡単に確認できるだけでなく、そのコンテキストの線をたどって、特定のコンテキストで発生したすべてのイベントを確認することができます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-206">In this way, you can easily ascertain which context the event occurred as well as follow that context line to see all the events that occurred in a particular context.</span></span>

<span data-ttu-id="b6f56-207">最初の 2 つのコンテキスト エントリは、常に "***割り込み** _" コンテキストと "_*_初期化/アイドル_\*_" コンテキストになります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-207">The first tow context entries are always the ***Interrupt** _ and _*_Initialize/Idle_\*_ contexts.</span></span> <span data-ttu-id="b6f56-208">"_\*_割り込み_\*_" コンテキストは、割り込みサービス ルーチン (ISR) によって生成されたすべてのシステム イベントを表します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-208">_*_Interrupt_*_ context represents all system events made from Interrupt Service Routines (IRS).</span></span> <span data-ttu-id="b6f56-209">"_\*_初期化/アイドル_\*_" コンテキストは、ThreadX 内での 2 つのコンテキストを表します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-209">_*_Initialize/Idle_*_ context represents two contexts in ThreadX.</span></span> <span data-ttu-id="b6f56-210">_*_tx_application_define_*_ 中に発生したイベントは、"_\*_初期化/アイドル_\*_" コンテキストです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-210">Events that occur during _*_tx_application_define_*_, are _*_Initialize/Idle_*_ context.</span></span> <span data-ttu-id="b6f56-211">システムがアイドル状態でイベントが発生していない場合、時間ビューで "_\*_実行中_\*_" を表す緑色のバーが "_ \*_初期化/アイドル_\*\*" コンテキストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-211">If the system is idle and thus no events are occurring, the green bar representing _*_Running_*_ in the time view is drawn on the _ *_Initialize/Idle_*\* context.</span></span>

![画面左側のシステム コンテキストのスクリーンショット。](./media/user-guide/screen_shot_33.png)

<span data-ttu-id="b6f56-213">**図 11**</span><span class="sxs-lookup"><span data-stu-id="b6f56-213">**FIGURE 11**</span></span>

<span data-ttu-id="b6f56-214">**図 11** の例では、"**_システム タイマー スレッド_ *_" コンテキストから始まる 9 つのスレッド コンテキストがあります。個々のコンテキストにマウス ポインターを置くと、そのコンテキストに関する追加情報を確認できます。追加情報には、スレッドの開始スタック アドレス、終了スタック アドレス、合計サイズ、使用率、相対実行率、中断の回数、再開、およびトレース中の最高優先度と最低優先度が含まれます。_* 図 12** では、"**_スレッド 0_**" の情報が表示されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-214">In the example in **Figure 11**, there are nine thread contexts, starting from the **_System Timer Thread_*_ context. Additional information about an individual context is available by placing the mouse on that context. The additional information includes the thread's starting stack address, ending stack address, total size, percent used, relative execution percentage, number of suspension, resumptions, and its highest and lowest priority during the trace. _\* Figure 12*\* shows information for **_thread 0_**.</span></span>

![スレッド 0 の情報のスクリーンショット。](./media/user-guide/screen_shot_34.png)


<span data-ttu-id="b6f56-216">**図 12**</span><span class="sxs-lookup"><span data-stu-id="b6f56-216">**FIGURE 12**</span></span>

<span data-ttu-id="b6f56-217">コンテキストを移動させて、特に注目するべきコンテキストをグループ化することもできます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-217">Contexts may also be moved to group those of greater interest.</span></span> <span data-ttu-id="b6f56-218">これを行うには、コンテキストをドラッグ アンド ドロップするか、コンテキストを右クリックします。</span><span class="sxs-lookup"><span data-stu-id="b6f56-218">This is accomplished by dragging and dropping the context or right-clicking on the context.</span></span> <span data-ttu-id="b6f56-219">コンテキストを右クリックすると、コンテキストを上下に移動するためのダイアログが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-219">Right-clicking on the context yields a dialog for moving the context to the top or the bottom.</span></span> 

<span data-ttu-id="b6f56-220">\* **[上端へ移動]** _ を選択すると、_*図 13*\* のように、"_*_スレッド 3_*_" のコンテキストがコンテキスト リストの一番上に移動されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-220">Selecting ***Move to top** _ results in the _*_thread 3_*_ context being moved to the top of the context list, as shown in _*Figure 13\*\*.</span></span>

![コンテキストがコンテキスト リストの一番上に移動された様子を示すスクリーンショット。](./media/user-guide/screen_shot_35.png)


<span data-ttu-id="b6f56-222">**図 13**</span><span class="sxs-lookup"><span data-stu-id="b6f56-222">**FIGURE 13**</span></span>

## <a name="thread-status-information"></a><span data-ttu-id="b6f56-223">スレッドの状態の情報</span><span class="sxs-lookup"><span data-stu-id="b6f56-223">Thread Status Information</span></span>

<span data-ttu-id="b6f56-224">有効にすると、TraceX ではスレッドのコンテキストに色付きの線が表示され、各スレッドの状態が示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-224">When enabled, TraceX displays the status of each thread via a colored line on the thread's context.</span></span> <span data-ttu-id="b6f56-225">緑色の線は、スレッドが "準備できている" 状態であることを示し、その他の色の線は、スレッドが中断されていることを示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-225">A green line indicates that the thread is in a "ready" state, while a line of any other color indicates the thread is suspended.</span></span> <span data-ttu-id="b6f56-226">中断されたスレッドの場合、線の色は、スレッドが中断されている ThreadX オブジェクトの種類を表します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-226">For suspended threads, the color of the line indicates the type of ThreadX object that the thread is suspended on.</span></span> <span data-ttu-id="b6f56-227">たとえば、**図 13** では、イベント 147 から始まる "**_システム タイマー スレッド_ *_" コンテキストの緑色の線によって、"_* _システム タイマー スレッド_ *_" の準備完了状態が示されています。イベント 147 の前と イベント 154 の後で、緑色の線は "_* _システム タイマー スレッド_ *_" が準備できた状態であることを示し、緑色の線がない箇所は "_* _システム タイマー スレッド_**" が中断されていることを示しています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-227">For example, in **Figure 13** the green line on the **_System Timer Thread's_*_ context starting at event 147 shows that the _*_System Timer Thread_*_ is ready. Prior to event 147 and after event 154, the absence of the green line indicates that the _*_System Timer Thread_*_ is ready. Prior to event 147 and after event 154, the absence of the green line indicates that the _*_System Timer Thread_** is suspended.</span></span>

![スレッドのコンテキスト上の色付きの線によって各スレッドの状態が表されている画面のスクリーンショット。](./media/user-guide/screen_shot_36.png)

<span data-ttu-id="b6f56-229">**図 14**</span><span class="sxs-lookup"><span data-stu-id="b6f56-229">**FIGURE 14**</span></span>

<span data-ttu-id="b6f56-230">スレッドの状態表示には 3 つのモードがあり、\* **[オプション] -> [Status Lines]\(ステータス ライン\)** _ メニューから選択できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-230">There are three modes of thread status display, available via the \***Options -> Status Lines** _ menu.</span></span> <span data-ttu-id="b6f56-231">"_\*_準備完了のみ_\*_" オプションを選択すると、準備完了状態を表す線 (緑) のみが表示され、中断状態を表す線は表示されません。</span><span class="sxs-lookup"><span data-stu-id="b6f56-231">The _*_Ready Only_*_ option only shows the ready (green) status lines, but does not display any suspension status lines.</span></span> <span data-ttu-id="b6f56-232">これが TraceX の既定のオプションです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-232">This is the default option for TraceX.</span></span> <span data-ttu-id="b6f56-233">"_ \*_すべてオン_\*\*" オプションを選択すると、すべての状態の線 (準備完了と中断) が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-233">The _ *_All On_*\* option enables the display of all status lines (ready and suspension).</span></span>

<span data-ttu-id="b6f56-234">最後に、"***すべてオフ***" オプションを選択すると、すべての状態の線が表示されなくなります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-234">Finally, the ***All Off*** option disables the display of all status lines.</span></span>

## <a name="event-information-display"></a><span data-ttu-id="b6f56-235">イベント情報の表示</span><span class="sxs-lookup"><span data-stu-id="b6f56-235">Event Information Display</span></span>

<span data-ttu-id="b6f56-236">TraceX では、ThreadX、FileX、NetX、NetX Duo、および USBX API 呼び出しや内部イベントなど、約 600 のランタイム イベントに関する詳細情報を確認できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-236">TraceX provides detailed information on some 600 run-time events, including ThreadX, FileX, NetX, NetX Duo, and USBX API calls and internal events.</span></span> <span data-ttu-id="b6f56-237">また TraceX では、最大 61,439 個の、一意のユーザー定義イベントも追加でサポートできます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-237">TraceX also supports up to an additional 61,439 unique user-defined events.</span></span>

<span data-ttu-id="b6f56-238">シーケンシャル ビューと時間ビューのどちらの表示モードが選択されているかにかかわらず、表示領域内の任意のイベントにマウス ポインターを置くと、そのイベントの近くに詳細なイベント情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-238">Regardless of whether sequential or time display mode is selected, a mouse-over on any event in the display area results in detailed event information displayed near the event.</span></span> <span data-ttu-id="b6f56-239">_*図 15*\* に示すのは、デモ用の \***demo_threadx.trx** _ トレース ファイルにあるイベント 143 にマウス ポインターを置いた場合の例です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-239">The mouse-over of event 143 in the demonstration ***demo_threadx.trx** _ trace file is shown in _*Figure 15\*\*:</span></span>

![サンプル トレース ファイル内のイベント 143 にマウス ポインターを置いた様子を示すスクリーンショット](./media/user-guide/screen_shot_37.png)

<span data-ttu-id="b6f56-241">**図 15**</span><span class="sxs-lookup"><span data-stu-id="b6f56-241">**FIGURE 15**</span></span>

<span data-ttu-id="b6f56-242">表示される各イベントには、"***コンテキスト** _" の情報に加え、"_*_相対時間_*_"と"_*_タイム スタンプ_\*_"の両方に関する標準的な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-242">Each event displayed contains standard information about ***Context** _ and both the _*_Relative Time_*_ and _*_Time Stamp_\*_.</span></span> <span data-ttu-id="b6f56-243">[コンテキスト] フィールドには、イベントが発生したコンテキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-243">The Context field shows what context the event took place in.</span></span> <span data-ttu-id="b6f56-244">スレッド、アイドル、ISR、および初期化の 4 つのコンテキストがあります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-244">There are exactly four contexts: thread, idle, ISR, and initialization.</span></span> <span data-ttu-id="b6f56-245">イベントがスレッド コンテキストで発生すると、その時点でのスレッド名とその優先順位が収集され、上記のように表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-245">When an event takes place in a thread context, the thread name and its priority at that time is gathered and displayed as shown above.</span></span> <span data-ttu-id="b6f56-246">"_\*_相対時間_\*_" は、トレース開始時点からの相対的なタイマー ティック数を示します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-246">The _*_Relative Time_*_ shows the relative number of timer ticks from the beginning of the trace.</span></span> <span data-ttu-id="b6f56-247">"_ \*_生のタイム スタンプ_\*\*" には、イベントの生のタイム ソースが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-247">The _ *_Raw Time Stamp_*\* displays the raw time source of the event.</span></span> <span data-ttu-id="b6f56-248">最後に、すべてのイベント固有情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-248">Finally, all event-specific information is displayed.</span></span> <span data-ttu-id="b6f56-249">この情報については、この章の残りの部分で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-249">This information is detailed throughout the remainder of this chapter.</span></span>

<span data-ttu-id="b6f56-250">詳細なイベント情報は、イベントをダブル クリックすることでも表示できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-250">Detailed event information is also available by double clicking on any event.</span></span> <span data-ttu-id="b6f56-251">**図 16** は、イベント 143 をダブル クリックした場合の例です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-251">Double clicking on event 143 is shown in **Figure 16**:</span></span>

![イベントをダブルクリックして表示された詳細なイベント情報のスクリーンショット。](./media/user-guide/screen_shot_38.png)

<span data-ttu-id="b6f56-253">**図 16**</span><span class="sxs-lookup"><span data-stu-id="b6f56-253">**FIGURE 16**</span></span>

<span data-ttu-id="b6f56-254">一度に複数のイベントを表示すると、ユーザーは何が起こっているのかをより高度に把握することができます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-254">Being able to view multiple events at once gives the user a much richer view of what happened.</span></span> <span data-ttu-id="b6f56-255">多数のイベントが相互に関連し合っているので、それらを並べて表示できるというのは非常に便利です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-255">Seeing them side by side is quite useful since many events are interrelated.</span></span> <span data-ttu-id="b6f56-256">これを行うには、複数のイベントをダブル クリックします。</span><span class="sxs-lookup"><span data-stu-id="b6f56-256">This is accomplished by double clicking on multiple events.</span></span>

## <a name="current-event-display"></a><span data-ttu-id="b6f56-257">現在のイベントの表示</span><span class="sxs-lookup"><span data-stu-id="b6f56-257">Current Event Display</span></span>

<span data-ttu-id="b6f56-258">TraceX では、現在のイベントを個別のウィンドウで表示できます。これは、ユーザーが ***[表示] -> [現在のイベント]*** で選択するか、ツール バーの [現在のイベント] ボタンをクリックした場合に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-258">TraceX displays the current event—in a separate window—when selected by the user via ***View -> Current Event*** or clicking on the current event button on the toolbar.</span></span> <span data-ttu-id="b6f56-259">選択すると、TraceX では、現在選択されているイベントがスタンドアロンのウィンドウで表示されます。このウィンドウは、別のイベントが選択されるたびに更新されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-259">After selected, TraceX displays the currently selected event in a stand-alone window and refreshes this window whenever another event is selected.</span></span>

## <a name="event-searching"></a><span data-ttu-id="b6f56-260">イベント検索</span><span class="sxs-lookup"><span data-stu-id="b6f56-260">Event Searching</span></span>

<span data-ttu-id="b6f56-261">TraceX では、幅広いイベント検索機能が提供されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-261">TraceX provides an extensive event search capability.</span></span> <span data-ttu-id="b6f56-262">各イベントのイベント ID フィールドと情報フィールドが、主要な検索パラメーターです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-262">The event ID and information fields of each event are the primary search parameters.</span></span> <span data-ttu-id="b6f56-263">特定の検索パラメーターの値を指定しなかった場合、そのパラメーターは検索から除外されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-263">Not specifying a value for a search parameter indicates that parameter effectively removes that parameter from of the search.</span></span> <span data-ttu-id="b6f56-264">また、検出されたパラメーターのいずれかが条件に適合するものを検索したり、検出されたすべてのパラメーターが条件に適合するものを検索したりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-264">In addition, the search can be done such that any parameter found will satisfy the search or all parameters must be found to satisfy the search.</span></span> <span data-ttu-id="b6f56-265">さらに、検索対象を特定のコンテキストに制限したり、トレース内のすべてのコンテキストを対象にしたりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-265">The search may also be restricted to a particular context or cover all contexts in the trace.</span></span> <span data-ttu-id="b6f56-266">イベント検索は、ツール バーの \* **[値で検索]** _ ボタン ( _\*図 17\*\*) を選択することで起動できます。選択すると、検索ダイアログが表示されます。ここで、検索のすべてのパラメーターを指定します。検索ダイアログの \*\*_[次へ]_\*_ ボタンと _\*_[前へ]_\*_ ボタンを使用すると、指定した検索条件に一致する次のイベントや前のイベントを検索できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-266">Invoking the event search is done by selecting the ***Search by Value** _ button on the toolbar, as shown in _*Figure 17\*\*. When selected the search dialog is displayed, which specifies all the parameters for the search. The \**_Next_*_ and _*_Previous_*_ buttons in the search dialog can then be used to find the next and previous events that match the specified search criteria.</span></span> <span data-ttu-id="b6f56-267">_ *図 17*\* は、検索ダイアログを示したものです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-267">_ *Figure 17*\* shows the search dialog.</span></span>

![イベント検索のスクリーンショット。](./media/user-guide/screen_shot_39.png)

<span data-ttu-id="b6f56-269">**図 17**</span><span class="sxs-lookup"><span data-stu-id="b6f56-269">**FIGURE 17**</span></span>

![検索ダイアログのスクリーンショット。](./media/user-guide/screen_shot_40.png)

<span data-ttu-id="b6f56-271">**図 18**</span><span class="sxs-lookup"><span data-stu-id="b6f56-271">**FIGURE 18**</span></span>

## <a name="zooming-in-and-out"></a><span data-ttu-id="b6f56-272">拡大と縮小</span><span class="sxs-lookup"><span data-stu-id="b6f56-272">Zooming In and Out</span></span>

<span data-ttu-id="b6f56-273">TraceX の既定では、イベントはフル サイズで表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-273">By default, TraceX displays the events at their full size.</span></span> <span data-ttu-id="b6f56-274">ユーザーは、必要に応じて拡大や縮小を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-274">You may zoom in or zoom out as desired.</span></span> <span data-ttu-id="b6f56-275">縮小は、トレース内でキャプチャされたイベント全体を表示したい場合に便利です。拡大は、タイム スタンプ ソースの解像度によってイベントが重なって表示される場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-275">Zooming out is useful to see the overall events captured in the trace, while zooming in is useful in conditions where the events overlap because of the resolution of the time stamp source.</span></span> <span data-ttu-id="b6f56-276">**図 19** は、**_demo_threadx.trx_** ファイルの表示を縮小して、トレース ファイルが 100% 表示されるようにしたときの様子です。</span><span class="sxs-lookup"><span data-stu-id="b6f56-276">**Figure 19** shows the **_demo_threadx.trx_** file zoomed out so that 100% of the trace file is shown.</span></span>

![トレース ファイルが100% 表示されるように縮小したサンプル ファイルのスクリーンショット。](./media/user-guide/screen_shot_41.png)

<span data-ttu-id="b6f56-278">**図 19**</span><span class="sxs-lookup"><span data-stu-id="b6f56-278">**FIGURE 19**</span></span>

<span data-ttu-id="b6f56-279">100% に縮小して、現在の表示ページ内にトレース全体が表示されるようにすると、トレース内でキャプチャされたすべてのコンテキストの実行と、それらのコンテキスト内で発生している全般的なイベントを簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-279">When zoomed out at 100% to show the entire trace within the current display page, it is easy to see all the context execution captured in the trace as well as the general events occurring within those contexts.</span></span> <span data-ttu-id="b6f56-280">**図 16** で、"**_スレッド 1_ *_" と "_* _スレッド 2_**" が最も頻繁に実行されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b6f56-280">Notice in **Figure 16** that **_thread 1_*_ and _*_thread 2_** execute most often.</span></span> <span data-ttu-id="b6f56-281">イベントを青色で表示することで、これらのスレッドがキュー サービス呼び出しを行っていることも示されています (キュー イベントは青色)。</span><span class="sxs-lookup"><span data-stu-id="b6f56-281">The blue coloring for their events also suggests that these threads are making queue service calls (queue events are blue in color).</span></span>

<span data-ttu-id="b6f56-282">詳細なアイコン ビューに戻すのも、同じように簡単です。[拡大] ボタンを繰り返し選択するか、100 の倍数を入力します。</span><span class="sxs-lookup"><span data-stu-id="b6f56-282">Restoring to a full icon view is equally easy; Either the zoom-in button may be selected repeatedly or some factor of 100 may be entered.</span></span>

## <a name="delta-ticks-between-events"></a><span data-ttu-id="b6f56-283">イベント間の差分ティック数</span><span class="sxs-lookup"><span data-stu-id="b6f56-283">Delta Ticks Between Events</span></span>

<span data-ttu-id="b6f56-284">TraceX では、さまざまなイベント間のティック数を簡単に確認できます。開始イベントをクリックし、終了イベントまでドラッグするだけです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-284">Determining the number of ticks between various events in TraceX is easy—click on the starting event and drag the mouse to the ending event.</span></span> <span data-ttu-id="b6f56-285">イベント間のティックの差分数は、**図 17** に示すように、画面の右上隅に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-285">The delta number of ticks between the events shows up in the upper right-hand corner of the display, as shown in **Figure 17**.</span></span>

![イベント間のティックの差分数のスクリーンショット。](./media/user-guide/screen_shot_42.png)

<span data-ttu-id="b6f56-287">**図 17**</span><span class="sxs-lookup"><span data-stu-id="b6f56-287">**FIGURE 17**</span></span>

<span data-ttu-id="b6f56-288">**図 17** の差分ティック数は、イベント 125 とイベント 154の間で 5032 ティックが経過したことを示しています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-288">The delta ticks shown in **Figure 17** show that 5032 ticks have elapsed between event 125 and event 154.</span></span> <span data-ttu-id="b6f56-289">各イベント内の相対タイム スタンプを見て引き算することで、手動で計算することもできますが、GUI を使ったほうがすばやく簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-289">This could also be calculated manually by looking at the relative time stamps in each event and subtracting, but using the GUI is easy and instantaneous.</span></span>

## <a name="actual-time-display"></a><span data-ttu-id="b6f56-290">実際の時間の表示</span><span class="sxs-lookup"><span data-stu-id="b6f56-290">Actual Time Display</span></span>

<span data-ttu-id="b6f56-291">有効にした場合、TraceX では、実際の時間 (マイクロ秒単位) が \***時間ビュー** _ で表示されるほか、TraceX によって表示されるさまざまな差分時間情報についても表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-291">When enabled, TraceX displays the actual time in microseconds in \***Time View** _ and for the various delta time information displayed by TraceX.</span></span> <span data-ttu-id="b6f56-292">既定では、実際の時間の表示は無効になっています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-292">By default, the actual time display is disabled.</span></span> <span data-ttu-id="b6f56-293">実際の時間の表示を有効にするには、_ *_[オプション] -> [マイクロ秒あたりのティック数]_*\* メニューを選択して、1 マイクロ秒あたりのティック数を入力する必要があります (入力する値は、ターゲットでの TraceX イベント ログに使用されるハードウェア タイマー ソースによって決まります)。</span><span class="sxs-lookup"><span data-stu-id="b6f56-293">To enable the actual time display, the number of ticks per microsecond must be entered via the _ *_Options -> Ticks per Microsecond_*\* menu selection (the value to enter is determined by the hardware timer source used for the TraceX event logging on the target).</span></span>

## <a name="priority-inversions"></a><span data-ttu-id="b6f56-294">優先度逆転</span><span class="sxs-lookup"><span data-stu-id="b6f56-294">Priority Inversions</span></span>

<span data-ttu-id="b6f56-295">TraceX では、トレース ファイル内で検出された優先度逆転が自動的に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-295">TraceX automatically displays priority inversions detected in the trace file.</span></span> <span data-ttu-id="b6f56-296">優先度逆転とは、優先度の高いスレッドが、優先度の低いスレッドによって現在所有されているミューテックスを取得しようとしてブロックされた状態のことです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-296">Priority inversions are defined as conditions where a higher-priority thread is blocked trying to obtain a mutex that is currently owned by a lower-priority thread.</span></span> <span data-ttu-id="b6f56-297">この状態は、"*決定論的*" という用語で表現されます。システムがそのように動作するよう設定されているためです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-297">This condition is termed *deterministic*, because the system was set up to operate in this manner.</span></span> <span data-ttu-id="b6f56-298">ユーザーにわかるように、TraceX では、"*決定論的* な" 優先度逆転の範囲が薄いサーモン ピンク色で表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-298">To inform the user, TraceX shows *deterministic* priority inversion ranges as a light salmon color.</span></span>

<span data-ttu-id="b6f56-299">TraceX には、"*非決定論的*" な優先度逆転も表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-299">TraceX also displays *non-deterministic* priority inversions.</span></span> <span data-ttu-id="b6f56-300">これらの優先度逆転では、優先度レベルの異なる別のスレッドが、"*決定論的*" な優先度逆転であったものの中間に実行されることで、優先度逆転内の時間がやや "*非決定論的*" になります。その点で、"*決定論的*" 優先度逆転とは異なります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-300">These priority inversions differ from the *deterministic* priority inversions in that another thread of a different priority level has executed in the middle of what was a *deterministic* priority inversion, thereby making the time within the priority inversion somewhat *non-deterministic*.</span></span> <span data-ttu-id="b6f56-301">多くの場合、この状況はユーザーからはわからず、非常に深刻な状況をもたらす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b6f56-301">This condition is often unknown to the user and can be very serious.</span></span> <span data-ttu-id="b6f56-302">この状況をユーザーに警告するために、TraceX では、"*非決定論的*" な優先度逆転が、濃いサーモン ピンク色で表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-302">In order to alert the user of this condition, TraceX shows *non-deterministic* priority inversions as a brighter salmon color.</span></span> <span data-ttu-id="b6f56-303">**図 18** は、"*決定論的*" 優先度逆転と "*非決定論的*" 優先度逆転の両方を示したものです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-303">**Figure 18** shows both *deterministic* and *non-deterministic* priority inversions.</span></span>

![トレース ファイル内の優先度逆転のスクリーンショット。](./media/user-guide/screen_shot_43.png)

<span data-ttu-id="b6f56-305">**図 18**</span><span class="sxs-lookup"><span data-stu-id="b6f56-305">**FIGURE 18**</span></span>

<span data-ttu-id="b6f56-306">**図 18** では、イベント 398 からイベント 402 までの "*決定論的*" 優先度逆転が示されています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-306">**Figure 18** shows a *deterministic* priority inversion from event 398 through event 402.</span></span> <span data-ttu-id="b6f56-307">この範囲では、優先度の低い "_\*_スレッド 1_*_" が所有するミューテックスで、優先度の高い "\*\*\*スレッド 0*\* _" がブロックされます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-307">In this range, the higher-priority ***thread 0** _ blocks on a mutex owned by a lower-priority _*_thread 1_\*_.</span></span> <span data-ttu-id="b6f56-308">イベント 402 で、"_ \*_スレッド 1_\*\*" がミューテックスを解放し、優先度逆転が終了しています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-308">At event 402, _ *_thread 1_*\* releases the mutex and thus ends the priority inversion.</span></span>

<span data-ttu-id="b6f56-309">濃い色え網掛けされた領域は、イベント 408 からイベント 420 までの間の "*非決定論的*" 優先度逆転を示しています。</span><span class="sxs-lookup"><span data-stu-id="b6f56-309">The brighter shaded area shows a *non-deterministic* priority inversion between event 408 through event 420.</span></span> <span data-ttu-id="b6f56-310">これがなぜ "*非決定論的*" かというと、優先度の高い "_\*_スレッド 0_*_" がブロックされているミューテックスを "\*\*\*スレッド 1*\* _" が保有しているときに、"_\*_スレッド 2_\*\*" を再開するという割り込みが発生し、その後実行されることで、システムの優先度逆転状態の時間が長くなるからです。</span><span class="sxs-lookup"><span data-stu-id="b6f56-310">What makes this *non-deterministic* is that while ***thread 1** _ holds the mutex that higher-priority _*_thread 0_*_ is blocked on, an interrupt occurs that resumes _*_thread 2_\*\*, which then executes and lengthens the time the system is in priority inversion.</span></span> <span data-ttu-id="b6f56-311">この状況は非常に深刻な事態を招いたり、特定するのが困難な場合もありますが、TraceX では簡単に識別できます。</span><span class="sxs-lookup"><span data-stu-id="b6f56-311">This condition can be quite serious and difficult to identify; however, with TraceX it is easily identified.</span></span>
