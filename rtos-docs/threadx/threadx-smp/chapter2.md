---
title: 第 2 章 - Azure RTOS ThreadX SMP のインストールと使用
description: この章では、Azure RTOS ThreadX SMP の高パフォーマンス カーネルのインストール、設定、および使用に関連するさまざまな問題について説明します。
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 53d73789d93cac7bed241a54b1dde20b8610ef13
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811384"
---
# <a name="chapter-2---installation--use-of-azure-rtos-threadx-smp"></a><span data-ttu-id="9ffea-103">第 2 章 - Azure RTOS ThreadX SMP のインストールと使用</span><span class="sxs-lookup"><span data-stu-id="9ffea-103">Chapter 2 - Installation & Use of Azure RTOS ThreadX SMP</span></span>

<span data-ttu-id="9ffea-104">この章では、Azure RTOS ThreadX SMP の高パフォーマンス カーネルのインストール、設定、および使用に関連するさまざまな問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-104">This chapter contains a description of various issues related to installation, setup, and usage of the highperformance Azure RTOS ThreadX SMP kernel.</span></span>

## <a name="host-considerations"></a><span data-ttu-id="9ffea-105">ホストに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="9ffea-105">Host Considerations</span></span>

<span data-ttu-id="9ffea-106">埋め込みソフトウェアは、通常は Windows または Linux (Unix) ホスト コンピューターで開発されています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-106">Embedded software is usually developed on Windows or Linux (Unix) host computers.</span></span> <span data-ttu-id="9ffea-107">アプリケーションは、コンパイルされ、リンクされ、ホスト上に配置された後、実行のためにターゲット ハードウェアにダウンロードされます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-107">After the application is compiled, linked, and located on the host, it is downloaded to the target hardware for execution.</span></span>

<span data-ttu-id="9ffea-108">通常、ターゲットのダウンロードは、開発ツールのデバッガー内から実行されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-108">Usually the target download is done from within the development tool debugger.</span></span> <span data-ttu-id="9ffea-109">ダウンロード後、デバッガーは、メモリおよびプロセッサ レジスタへのアクセスだけでなく、ターゲットの実行制御 (移動、停止、ブレークポイントなど) を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-109">After download, the debugger is responsible for providing target execution control (go, halt, breakpoint, etc.) as well as access to memory and processor registers.</span></span>

<span data-ttu-id="9ffea-110">開発ツール デバッガーのほとんどが、JTAG (IEEE 1149.1) やバックグラウンド デバッグ モード (BDM) などのオンチップ デバッグ (OCD) 接続を介してターゲット ハードウェアと通信します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-110">Most development tool debuggers communicate with the target hardware via on-chip debug (OCD) connections such as JTAG (IEEE 1149.1) and Background Debug Mode (BDM).</span></span> <span data-ttu-id="9ffea-111">また、デバッガーは、インサーキット エミュレーション (ICE) 接続を使用してターゲット ハードウェアと通信することもあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-111">Debuggers also communicate with target hardware through In-Circuit Emulation (ICE) connections.</span></span> <span data-ttu-id="9ffea-112">OCD および ICE 接続はどちらも、ターゲットの常駐ソフトウェアへの侵入を最小限に抑えた堅牢なソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-112">Both OCD and ICE connections provide robust solutions with minimal intrusion on the target resident software.</span></span>

<span data-ttu-id="9ffea-113">ホスト上で使用されるリソースについては、ThreadX SMP のソースコードは ASCII 形式で提供され、ホスト コンピューターのハード ディスク上に約 1 MB の空き領域が必要です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-113">As for resources used on the host, the source code for ThreadX SMP is delivered in ASCII format and requires approximately 1 MBytes of space on the host computer’s hard disk.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-114">ホスト システムに関する他の考慮事項とオプションについては、付属の **readme_threadx.txt** ファイルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-114">Please review the supplied **readme_threadx.txt** file for additional host system considerations and options.</span></span>

## <a name="target-considerations"></a><span data-ttu-id="9ffea-115">ターゲットに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="9ffea-115">Target Considerations</span></span>

<span data-ttu-id="9ffea-116">ThreadX SMP は、ターゲット上に 2 KB から 20 KB の読み取り専用メモリ (ROM) を必要とします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-116">ThreadX SMP requires between 2 KBytes and 20 KBytes of Read Only Memory (ROM) on the target.</span></span> <span data-ttu-id="9ffea-117">また、ThreadX SMP システム スタックおよびその他のグローバル データ構造用に、ターゲットのランダム アクセス メモリ (RAM) がさらに 1 KB から 2 KB 必要です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-117">Another 1 to 2 KBytes of the target’s Random Access Memory (RAM) are required for the ThreadX SMP system stack and other global data structures.</span></span>

<span data-ttu-id="9ffea-118">サービス呼び出しタイムアウト、タイムスライス、アプリケーション タイマーなどのタイマー関連関数が機能するためには、基になるターゲット ハードウェアは定期的な割り込みソースを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-118">For timer-related functions like service call time-outs, time-slicing, and application timers to function, the underlying target hardware must provide a periodic interrupt source.</span></span> <span data-ttu-id="9ffea-119">プロセッサがこの機能を備えている場合は、ThreadX SMP によって使用されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-119">If the processor has this capability, it is utilized by ThreadX SMP.</span></span> <span data-ttu-id="9ffea-120">あるいは、ターゲット プロセッサに定期的な割り込みを生成する機能がない場合は、ユーザーのハードウェアがそれを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-120">Otherwise, if the target processor does not have the ability to generate a periodic interrupt, the user’s hardware must provide it.</span></span> <span data-ttu-id="9ffea-121">タイマー割り込みのセットアップと構成は、通常は ThreadX SMP ディストリビューションの ***tx_initialize_low_level*** アセンブリ ファイルにあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-121">Setup and configuration of the timer interrupt is typically located in the ***tx_initialize_low_level*** assembly file in the ThreadX SMP distribution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-122">ThreadX SMP は、定期的なタイマー割り込みソースがない場合でも機能します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-122">ThreadX SMP is still functional even if no periodic timer interrupt source is available.</span></span> <span data-ttu-id="9ffea-123">ただし、タイマー関連サービスは機能しません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-123">However, none of the timer-related services are functional.</span></span> <span data-ttu-id="9ffea-124">ホスト システムに関する他の考慮事項やオプションについては、付属の **readme_threadx.txt** ファイルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-124">Please review the supplied **readme_threadx.txt** file for any additional host system considerations and/or options.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="9ffea-125">製品ディストリビューション</span><span class="sxs-lookup"><span data-stu-id="9ffea-125">Product Distribution</span></span>

<span data-ttu-id="9ffea-126">ディストリビューション ディスクの詳しい内容は、ターゲット プロセッサ、開発ツール、購入された ThreadX SMP パッケージによって異なります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-126">The exact content of the distribution disk depends on the target processor, development tools, and the ThreadX SMP package purchased.</span></span> <span data-ttu-id="9ffea-127">ほとんどの製品ディストリビューションに共通するいくつかの重要ファイルの一覧を次に示します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-127">However, the following is a list of several important files that are common to most product distributions:</span></span>

### <a name="threadx_express_startuppdf"></a><span data-ttu-id="9ffea-128">ThreadX_Express_Startup.pdf</span><span class="sxs-lookup"><span data-stu-id="9ffea-128">ThreadX_Express_Startup.pdf</span></span>

<span data-ttu-id="9ffea-129">この PDF では、ThreadX SMP を特定のターゲット プロセッサ/ボードおよび特定の開発ツールで動作させるための簡単な 4 段階の手順を説明しています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-129">This PDF provides a simple, four-step procedure to get ThreadX SMP running on a specific target processor/board and specific development tools.</span></span>

### <a name="readme_threadxtxt"></a><span data-ttu-id="9ffea-130">readme_threadx.txt</span><span class="sxs-lookup"><span data-stu-id="9ffea-130">readme_threadx.txt</span></span>

<span data-ttu-id="9ffea-131">ThreadX SMP ポートに関する特定の情報と、ターゲット プロセッサおよび開発ツールに関する情報が記載されたテキスト ファイルです。</span><span class="sxs-lookup"><span data-stu-id="9ffea-131">Text file containing specific information about the ThreadX SMP port, including information about the target processor and the development tools.</span></span>

|                 |                     |
| -------------- | ------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="9ffea-132">**tx_api.h**</span><span class="sxs-lookup"><span data-stu-id="9ffea-132">**tx_api.h**</span></span>  | <span data-ttu-id="9ffea-133">すべてのシステム等価、データ構造、およびサービス プロトタイプが含まれた C ヘッダー ファイル。</span><span class="sxs-lookup"><span data-stu-id="9ffea-133">C header file containing all system equates, data structures, and service prototypes.</span></span>             |
| <span data-ttu-id="9ffea-134">**tx_port.h**</span><span class="sxs-lookup"><span data-stu-id="9ffea-134">**tx_port.h**</span></span> | <span data-ttu-id="9ffea-135">すべての開発ツール、およびターゲット固有のデータの定義と構造が含まれる C ヘッダー ファイル。</span><span class="sxs-lookup"><span data-stu-id="9ffea-135">C header file containing all development-tool and targetspecific data definitions and structures.</span></span> |
|<span data-ttu-id="9ffea-136">**demo_threadx.c**</span><span class="sxs-lookup"><span data-stu-id="9ffea-136">**demo_threadx.c**</span></span>| <span data-ttu-id="9ffea-137">小規模なデモ アプリケーションが含まれる C ファイル。</span><span class="sxs-lookup"><span data-stu-id="9ffea-137">C file containing a small demo application.</span></span>|
|<span data-ttu-id="9ffea-138">**tx.a (または tx.lib)**</span><span class="sxs-lookup"><span data-stu-id="9ffea-138">**tx.a (or tx.lib)**</span></span>| <span data-ttu-id="9ffea-139">"*標準*" パッケージと共に配布される ThreadX SMP C ライブラリのバイナリ バージョン。</span><span class="sxs-lookup"><span data-stu-id="9ffea-139">Binary version of the ThreadX SMP C library that is distributed with the *standard* package.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="9ffea-140">ファイル名はすべて小文字で表記します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-140">All file names are in lower-case.</span></span> <span data-ttu-id="9ffea-141">この名前付け規則を使用することで、コマンドを Linux (Unix) 開発プラットフォームに簡単に変換できます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-141">This naming convention makes it easier to convert the commands to Linux (Unix) development platforms.</span></span>

## <a name="threadx-smp-installation"></a><span data-ttu-id="9ffea-142">ThreadX SMP のインストール</span><span class="sxs-lookup"><span data-stu-id="9ffea-142">ThreadX SMP Installation</span></span>

<span data-ttu-id="9ffea-143">ThreadX SMP のインストールは簡単です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-143">Installation of ThreadX SMP is straightforward.</span></span> <span data-ttu-id="9ffea-144">***ThreadX_Express_Startup.pdf** _ ファイルと _ *_readme_threadx.txt_** ファイルで、ThreadX SMP を特定の環境でインストールする場合の具体的な情報について参照してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-144">Refer to the ***ThreadX_Express_Startup.pdf** _ file and the _ *_readme_threadx.txt_** file for specific information on installing ThreadX SMP for your specific environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-145">かならず ThreadX SMP ディストリビューション ディスクのバックアップを取って、安全な場所に保管してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-145">Be sure to back up the ThreadX SMP distribution disk and store it in a safe location.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-146">アプリケーション ソフトウェアが ThreadX SMP ライブラリ ファイル (通常は **tx.a** または **tx.lib**) と、C インクルード ファイル **tx_api.h** および **tx_port.h** にアクセスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-146">Application software needs access to the ThreadX SMP library file (usually **tx.a** or **tx.lib**) and the C include files **tx_api.h** and **tx_port.h**.</span></span> <span data-ttu-id="9ffea-147">これを行うには、開発ツールの適切なパスを設定するか、これらのファイルをアプリケーション開発領域にコピーします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-147">This is accomplished either by setting the appropriate path for the development tools or by copying these files into the application development area.</span></span>

## <a name="using-threadx-smp"></a><span data-ttu-id="9ffea-148">ThreadX SMP を使用する</span><span class="sxs-lookup"><span data-stu-id="9ffea-148">Using ThreadX SMP</span></span>

<span data-ttu-id="9ffea-149">ThreadX SMP は簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-149">Using ThreadX SMP is easy.</span></span> <span data-ttu-id="9ffea-150">基本的に、アプリケーション コードには ***tx_api.h** _ をコンパイル中に含めて、ThreadX SMP ランタイム ライブラリ _*_tx.a_*_ (または _*_tx.lib)_ \*\* とリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-150">Basically, the application code must include ***tx_api.h** _ during compilation and link with the ThreadX SMP run-time library _*_tx.a_*_ (or _*_tx.lib)_\*\*.</span></span>

<span data-ttu-id="9ffea-151">ThreadX SMP アプリケーションをビルドするには、次の 4 つの手順が必要です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-151">There are four steps required to build a ThreadX SMP application:</span></span>

<span data-ttu-id="9ffea-152">***tx_api.h*** ファイルを、ThreadX SMP のサービスまたはデータ構造を使用するすべてのアプリケーション ファイル内にインクルードします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-152">Include the ***tx_api.h*** file in all application files that use ThreadX SMP services or data structures.</span></span>

<span data-ttu-id="9ffea-153">標準の C \***main** _ 関数を作成します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-153">Create the standard C \***main** _ function.</span></span> <span data-ttu-id="9ffea-154">この関数が最終的に _ *_tx_kernel_enter_*\* を呼び出して THREADX SMP を開始する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-154">This function must eventually call _ *_tx_kernel_enter_*\* to start ThreadX SMP.</span></span> <span data-ttu-id="9ffea-155">ThreadX SMP に関係しないアプリケーション固有の初期化が、カーネルに入る前に追加される場合があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-155">Application-specific initialization that does not involve ThreadX SMP may be added prior to entering the kernel.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-156">ThreadX SMP のエントリ関数 **tx_kernel_enter** は戻りません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-156">The ThreadX SMP entry function **tx_kernel_enter** does not return.</span></span> <span data-ttu-id="9ffea-157">したがって、その後でいっさいの処理または関数の呼び出しを行わないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-157">So be sure not to place any processing or function calls after it.</span></span>

<span data-ttu-id="9ffea-158">***tx_application_define*** 関数を作成します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-158">Create the ***tx_application_define*** function.</span></span> <span data-ttu-id="9ffea-159">ここに、最初のシステム リソースが作成されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-159">This is where the initial system resources are created.</span></span> <span data-ttu-id="9ffea-160">システム リソースの例としては、スレッド、キュー、メモリ プール、イベント フラグ グループ、ミューテックス、セマフォなどがあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-160">Examples of system resources include threads, queues, memory pools, event flags groups, mutexes, and semaphores.</span></span>

<span data-ttu-id="9ffea-161">アプリケーション ソースをコンパイルして、ThreadX SMP ランタイム ライブラリ ***tx.lib*** にリンクします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-161">Compile application source and link with the ThreadX SMP run-time library ***tx.lib***.</span></span> <span data-ttu-id="9ffea-162">結果のイメージをターゲットにダウンロードして、実行できます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-162">The resulting image can be downloaded to the target and executed!</span></span>

## <a name="small-example-system"></a><span data-ttu-id="9ffea-163">小規模システムの例</span><span class="sxs-lookup"><span data-stu-id="9ffea-163">Small Example System</span></span>

<span data-ttu-id="9ffea-164">28 ページの図 1 の小規模システムの例は、優先度が 3 のシングル スレッドの作成を示しています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-164">The small example system in Figure 1 on page 28 shows the creation of a single thread with a priority of 3.</span></span> <span data-ttu-id="9ffea-165">スレッドは実行されて、カウンターが増え、1 クロック ティック間スリープ状態になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-165">The thread executes, increments a counter, then sleeps for one clock tick.</span></span> <span data-ttu-id="9ffea-166">このプロセスは永久に続きます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-166">This process continues forever.</span></span>

```c
#include              "tx_api.h"

unsigned long         my_thread_counter = 0;
TX_THREAD             my_thread;

main( )
{
      /* Enter the ThreadX SMP kernel. */
      tx_kernel_enter( );
}

void tx_application_define(void *first_unused_memory)
{

      /* Create my_thread! */
      tx_thread_create(&my_thread, "My Thread",
          my_thread_entry, 0x1234, first_unused_memory, 1024,
             3, 3, TX_NO_TIME_SLICE, TX_AUTO_START);
}

void my_thread_entry(ULONG thread_input)
{
      /* Enter into a forever loop. */
      while(1)
      {

            /* Increment thread counter. */
            my_thread_counter++;

            /* Sleep for 1 tick. */
            tx_thread_sleep(1);
      }
}
```
<span data-ttu-id="9ffea-167">**図 1. アプリケーション開発のためのテンプレート**</span><span class="sxs-lookup"><span data-stu-id="9ffea-167">**FIGURE 1. Template for Application Development**</span></span>

<span data-ttu-id="9ffea-168">これは簡単な例ですが、実際のアプリケーション開発に適したテンプレートとなります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-168">Although this is a simple example, it provides a good template for real application development.</span></span> <span data-ttu-id="9ffea-169">もういちど、***readme_threadx.txt*** ファイルで詳細をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-169">Once again, please see the ***readme_threadx.txt*** file for additional details.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="9ffea-170">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="9ffea-170">Troubleshooting</span></span>

<span data-ttu-id="9ffea-171">各 ThreadX SMP ポートには、デモンストレーション アプリケーションが付属しています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-171">Each ThreadX SMP port is delivered with a demonstration application.</span></span> <span data-ttu-id="9ffea-172">最初にデモンストレーション システムを、実際のターゲット ハードウェアまたはシミュレートされた環境で稼働させることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-172">It is always a good idea to first get the demonstration system running—either on actual target hardware or simulated environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-173">ディストリビューションに付属している **readme_threadx.txt** ファイルで、デモンストレーション システムに関する詳細をご確認ください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-173">See the **readme_threadx.txt** file supplied with the distribution for more specific details regarding the demonstration system.</span></span>

<span data-ttu-id="9ffea-174">デモンストレーション システムが正常に実行されない場合のトラブルシューティングのヒントを、以下に示します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-174">If the demonstration system does not execute properly, the following are some troubleshooting tips:</span></span>

  - <span data-ttu-id="9ffea-175">デモンストレーションがどの程度実行されているかを調べます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-175">Determine how much of the demonstration is run-ning.</span></span>

  - <span data-ttu-id="9ffea-176">スタック サイズを増やします (これは、デモンストレーションよりも実際のアプリケーション コードでより重要です)。</span><span class="sxs-lookup"><span data-stu-id="9ffea-176">Increase stack sizes (this is more important in actual application code than it is for the demonstration).</span></span>

  - <span data-ttu-id="9ffea-177">TX_ENABLE_STACK_CHECKING を定義して ThreadX SMP ライブラリをリビルドします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-177">Rebuild the ThreadX SMP library with TX_ENABLE_STACK_CHECKING defined.</span></span> <span data-ttu-id="9ffea-178">これにより、組み込みの ThreadX SMP スタック チェックが有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-178">This will enable the built-in ThreadX SMP stack checking.</span></span>

  - <span data-ttu-id="9ffea-179">最近の変更を一時的にバイパスして、問題が解消または変化するかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-179">Temporarily bypass any recent changes to see if the problem disappears or changes.</span></span> <span data-ttu-id="9ffea-180">このような情報は、サポート エンジニアにとって有益です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-180">Such information should prove useful to support engineers.</span></span>

<span data-ttu-id="9ffea-181">トラブルシューティング手順で収集した情報を送信するには、12 ページの「必要なもの」に記載されている手順に従ってください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-181">Follow the procedures outlined in “What We Need From You” on page 12 to send the information gathered from the troubleshooting steps.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="9ffea-182">構成オプション</span><span class="sxs-lookup"><span data-stu-id="9ffea-182">Configuration Options</span></span>

<span data-ttu-id="9ffea-183">ThreadX SMP を使用して ThreadX SMP ライブラリとアプリケーションをビルドする場合、構成オプションがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-183">There are several configuration options when building the ThreadX SMP library and the application using ThreadX SMP.</span></span> <span data-ttu-id="9ffea-184">以下のオプションは、アプリケーション ソース内、コマンド ライン上、または ***tx_user.h*** インクルード ファイル内で定義できます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-184">The options below can be defined in the application source, on the command line, or within the ***tx_user.h*** include file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ffea-185">**tx_user.h** 内で定義されているオプションは、アプリケーションと ThreadX SMP ライブラリが、**TX_INCLUDE_USER_DEFINE_FILE** を定義してビルドされている場合にのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-185">Options defined in **tx_user.h** are applied only if the application and ThreadX SMP library are built with **TX_INCLUDE_USER_DEFINE_FILE** defined.</span></span>

### <a name="smallest-configuration"></a><span data-ttu-id="9ffea-186">最小の構成</span><span class="sxs-lookup"><span data-stu-id="9ffea-186">Smallest Configuration</span></span>
<span data-ttu-id="9ffea-187">コード サイズを最小にするには、次の ThreadX SMP 構成オプションを考慮する必要があります (他のすべてのオプションが存在しない場合)。</span><span class="sxs-lookup"><span data-stu-id="9ffea-187">For the smallest code size, the following ThreadX SMP configuration options should be considered (in absence of all other options):</span></span>

- <span data-ttu-id="9ffea-188">TX_DISABLE_ERROR_CHECKING</span><span class="sxs-lookup"><span data-stu-id="9ffea-188">TX_DISABLE_ERROR_CHECKING</span></span>
- <span data-ttu-id="9ffea-189">TX_DISABLE_PREEMPTION_THRESHOLD</span><span class="sxs-lookup"><span data-stu-id="9ffea-189">TX_DISABLE_PREEMPTION_THRESHOLD</span></span>
- <span data-ttu-id="9ffea-190">TX_DISABLE_NOTIFY_CALLBACKS</span><span class="sxs-lookup"><span data-stu-id="9ffea-190">TX_DISABLE_NOTIFY_CALLBACKS</span></span> 
- <span data-ttu-id="9ffea-191">TX_DISABLE_REDUNDANT_CLEARING</span><span class="sxs-lookup"><span data-stu-id="9ffea-191">TX_DISABLE_REDUNDANT_CLEARING</span></span> 
- <span data-ttu-id="9ffea-192">TX_DISABLE_STACK_FILLING</span><span class="sxs-lookup"><span data-stu-id="9ffea-192">TX_DISABLE_STACK_FILLING</span></span> 
- <span data-ttu-id="9ffea-193">TX_NOT_INTERRUPTABLE</span><span class="sxs-lookup"><span data-stu-id="9ffea-193">TX_NOT_INTERRUPTABLE</span></span> 
- <span data-ttu-id="9ffea-194">TX_TIMER_PROCESS_IN_ISR</span><span class="sxs-lookup"><span data-stu-id="9ffea-194">TX_TIMER_PROCESS_IN_ISR</span></span>

### <a name="fastest-configuration"></a><span data-ttu-id="9ffea-195">最も速い構成</span><span class="sxs-lookup"><span data-stu-id="9ffea-195">Fastest Configuration</span></span> 
<span data-ttu-id="9ffea-196">実行速度を最速にするには、前の最小の構成で使用したのと同じ構成オプションを使用します。ただし、このオプションも考慮します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-196">For the fastest execution, the same configuration options used for the Smallest Configuration previously, but with this option also considered:</span></span>

- <span data-ttu-id="9ffea-197">TX_REACTIVATE_INLINE</span><span class="sxs-lookup"><span data-stu-id="9ffea-197">TX_REACTIVATE_INLINE</span></span>

<span data-ttu-id="9ffea-198">***readme_threadx.txt*** ファイルで、特定バージョンの ThreadX SMP の追加オプションについて確認してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-198">Review the ***readme_threadx.txt*** file for additional options for your specific version of ThreadX SMP.</span></span> <span data-ttu-id="9ffea-199">詳細な構成オプションについて、28 ページから説明しています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-199">Detailed configuration options are described beginning on page 28.</span></span>

### <a name="global-time-source"></a><span data-ttu-id="9ffea-200">グローバル タイム ソース</span><span class="sxs-lookup"><span data-stu-id="9ffea-200">Global Time Source</span></span>  
<span data-ttu-id="9ffea-201">他の Azure RTOS 製品 (FileX、NetX、GUIX、USBX など) では、ThreadX SMP で 1 秒を表す ThreadX SMP タイマー刻みの数が定義されています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-201">For other Azure RTOS products (FileX, NetX, GUIX, USBX, etc.), ThreadX SMP defines the number of ThreadX SMP timer ticks that represents one second.</span></span> <span data-ttu-id="9ffea-202">この定数に基づいて各種の時間要件が導き出されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-202">Others derive their time requirements based on this constant.</span></span> <span data-ttu-id="9ffea-203">既定では、この値は 100 で、10 ミリ秒の定期的割り込みを想定しています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-203">By default, the value is 100, assuming a 10ms periodic interrupt.</span></span> <span data-ttu-id="9ffea-204">この値をユーザーがオーバーライドするには、***tx_port.h*** または IDE あるいはコマンド ライン内で TX_TIMER_TICKS_PER_SECOND を必要な値で定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-204">The user may override this value by defining TX_TIMER_TICKS_PER_SECOND with the desired value in ***tx_port.h*** or within the IDE or command line.</span></span>

### <a name="detailed-configuration-options"></a><span data-ttu-id="9ffea-205">詳細な構成オプション</span><span class="sxs-lookup"><span data-stu-id="9ffea-205">Detailed Configuration Options</span></span>

- <span data-ttu-id="9ffea-206">**TX_BLOCK_POOL_ENABLE_PERFORMANCE_INFO**: 定義されている場合、ブロック プールに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-206">**TX_BLOCK_POOL_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on block pools.</span></span> <span data-ttu-id="9ffea-207">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-207">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-208">**TX_BYTE_POOL_ENABLE_PERFORMANCE_INFO**: 定義されている場合、バイト プールに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-208">**TX_BYTE_POOL_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on byte pools.</span></span> <span data-ttu-id="9ffea-209">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-209">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-210">**TX_DISABLE_ERROR_CHECKING**: 基本サービス呼び出しのエラー チェックをバイパスします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-210">**TX_DISABLE_ERROR_CHECKING**: Bypasses basic service call error checking.</span></span> <span data-ttu-id="9ffea-211">アプリケーション ソースで定義されていると、すべての基本パラメーター エラー チェックが無効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-211">When defined in the application source, all basic parameter error checking is disabled.</span></span> <span data-ttu-id="9ffea-212">これによりパフォーマンスが最大 30% 向上する場合があり、イメージ サイズも小さくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-212">This may improve performance by as much as 30% and may also reduce the image size.</span></span>

> [!NOTE]
> <span data-ttu-id="9ffea-213">*エラー チェックを無効にしても安全なのは、アプリケーションですべての入力パラメーターが、外部入力から派生した入力パラメーターも含めて、すべての状況で常に有効であると保証される場合だけです。無効な入力が API に提供され、エラー チェックが無効になっている場合、その結果の動作は定義されていないため、メモリが破損したりシステムがクラッシュする可能性があります。*</span><span class="sxs-lookup"><span data-stu-id="9ffea-213">*It is only safe to disable error checking if the application can absolutely guarantee all input parameters are always valid under all circumstances, including input parameters derived from external input. If invalid input is supplied to the API with error checking disabled, the resulting behavior is undefined and could result in memory corruption or system crash.*</span></span>

> [!NOTE]
> <span data-ttu-id="9ffea-214">*エラー チェックを無効にすることの影響がない ThreadX SMP API の戻り値を、第 4 章の各 API の説明の「戻り値」セクションに太字で示しています。太字でない戻り値は、TX_DISABLE_ERROR_CHECKING オプションを使用してエラー チェックを無効にしている場合は void になります。*</span><span class="sxs-lookup"><span data-stu-id="9ffea-214">*ThreadX SMP API return values not affected by disabling error checking are listed in bold in the “Return Values” section of each API description in Chapter 4. The nonbold return values are void if error checking is disabled by using the TX_DISABLE_ERROR_CHECKING option.*</span></span>
- <span data-ttu-id="9ffea-215">**TX_DISABLE_NOTIFY_CALLBACKS**: 定義されている場合、さまざまな ThreadX SMP オブジェクトの通知コールバックが無効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-215">**TX_DISABLE_NOTIFY_CALLBACKS** : When defined, disables the notify callbacks for various ThreadX SMP objects.</span></span> <span data-ttu-id="9ffea-216">このオプションを使用するとコード サイズが若干減り、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-216">Using this option slightly reduces code size and improves performance.</span></span> <span data-ttu-id="9ffea-217">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-217">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-218">**TX_DISABLE_PREEMPTION_THRESHOLD**: 定義されている場合、プリエンプションしきい値機能が無効になり、コード サイズが若干減って、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-218">**TX_DISABLE_PREEMPTION_THRESHOLD** : When defined, disables the preemption-threshold feature and slightly reduces code size and improves performance.</span></span> <span data-ttu-id="9ffea-219">プリエンプションしきい値機能は使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-219">Of course, the preemptionthreshold capabilities are no longer available.</span></span> <span data-ttu-id="9ffea-220">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-220">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-221">**TX_DISABLE_REDUNDANT_CLEARING**: 定義されている場合、ThreadX SMP のグローバル C データ構造をゼロに初期化するためのロジックが削除されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-221">**TX_DISABLE_REDUNDANT_CLEARING** : When defined, removes the logic for initializing ThreadX SMP global C data structures to zero.</span></span> <span data-ttu-id="9ffea-222">これを使用するのは、コンパイラの初期化コードが初期化されていないすべての C グローバル データをゼロに設定する場合だけにしてください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-222">This should only be used if the compiler’s initialization code sets all un-initialized C global data to zero.</span></span> <span data-ttu-id="9ffea-223">このオプションを使用するとコード サイズが若干減り、初期化中のパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-223">Using this option slightly reduces code size and improves performance during initialization.</span></span> <span data-ttu-id="9ffea-224">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-224">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-225">**TX_DISABLE_STACK_FILLING**: 定義されている場合、各スレッドのスタックの作成時に各バイトへの 0xEF 値の配置が無効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-225">**TX_DISABLE_STACK_FILLING** : When defined, disables placing the 0xEF value in each byte of each thread’s stack when created.</span></span> <span data-ttu-id="9ffea-226">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-226">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-227">**TX_ENABLE_EVENT_TRACE**: 定義されている場合、ThreadX SMP で TraceX トレース バッファーを作成するためのイベント収集コードが有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-227">**TX_ENABLE_EVENT_TRACE** : When defined, ThreadX SMP enables the event gathering code for creating a TraceX trace buffer.</span></span> <span data-ttu-id="9ffea-228">詳細については、TraceX ユーザー ガイドをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-228">See the TraceX User Guide for more details.</span></span>
- <span data-ttu-id="9ffea-229">**TX_ENABLE_STACK_CHECKING**: 定義されている場合、ThreadX SMP ランタイム スタック チェックが有効になります。これには、スタック使用量の解析と、スタック領域の前後のデータ パターン「フェンス」の検査が含まれます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-229">**TX_ENABLE_STACK_CHECKING** : When defined, enables ThreadX SMP run-time stack checking, which includes analysis of how much stack has been used and examination of data pattern “fences” before and after the stack area.</span></span> <span data-ttu-id="9ffea-230">スタック エラーが検出されると、登録されているアプリケーション スタック エラー ハンドラーが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-230">If a stack error is detected, the registered application stack error handler is called.</span></span> <span data-ttu-id="9ffea-231">このオプションにより、オーバーヘッドとコード サイズが若干増加します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-231">This option does result in slightly increased overhead and code size.</span></span> <span data-ttu-id="9ffea-232">**_tx_- thread_stack_error_notify_** API で詳細を確認してください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-232">Review the **_tx_- thread_stack_error_notify_** API for more information.</span></span> <span data-ttu-id="9ffea-233">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-233">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-234">**TX_EVENT_FLAGS_ENABLE_PERFORMANCE_INFO**: 定義されている場合、イベント フラグ グループに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-234">**TX_EVENT_FLAGS_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on event flags groups.</span></span> <span data-ttu-id="9ffea-235">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-235">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-236">**TX_INLINE_THREAD_RESUME_SUSPEND**: 定義されている場合、ThreadX SMP でインライン コードを介した **_tx_thread_resume_ *_ および _* _tx_thread_suspend_** の API 呼び出しが向上します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-236">**TX_INLINE_THREAD_RESUME_SUSPEND** : When defined, ThreadX SMP improves the **_tx_thread_resume_*_ and _*_tx_thread_suspend_** API calls via in-line code.</span></span> <span data-ttu-id="9ffea-237">これによりコード サイズが増えますが、この 2 つの API 呼び出しのパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-237">This increases code size but enhances performance of these two API calls.</span></span>
- <span data-ttu-id="9ffea-238">**TX_MAX_PRIORITIES**: ThreadX SMP の優先度レベルを定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-238">**TX_MAX_PRIORITIES** : Defines the priority levels for ThreadX SMP.</span></span> <span data-ttu-id="9ffea-239">有効な値は 32 から 1024 の範囲 (両端を含む) で、32 で均等に割り切れなければなりません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-239">Legal values range from 32 through 1024 (inclusive) and must be evenly divisible by 32.</span></span> <span data-ttu-id="9ffea-240">サポートされている優先度レベルの数を増やすと、優先度 を 32 上げるごとに RAM 使用量が 128 バイト増えます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-240">Increasing the number of priority levels supported increases the RAM usage by 128 bytes for every group of 32 priorities.</span></span> <span data-ttu-id="9ffea-241">ただし、パフォーマンスへの影響はごくわずかです。</span><span class="sxs-lookup"><span data-stu-id="9ffea-241">However, there is only a negligible effect on performance.</span></span> <span data-ttu-id="9ffea-242">既定では、この値は 32 の優先度レベルに設定されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-242">By default, this value is set to 32 priority levels.</span></span>
- <span data-ttu-id="9ffea-243">**TX_MINIMUM_STACK**: 最小スタック サイズ (バイト単位) を定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-243">**TX_MINIMUM_STACK** : Defines the minimum stack size (in bytes).</span></span> <span data-ttu-id="9ffea-244">これは、スレッドが作成されるときのエラー チェックに使用されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-244">It is used for error checking when threads are created.</span></span> <span data-ttu-id="9ffea-245">既定値はポート固有であり、**_tx_port.h_** にあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-245">The default value is port-specific and is found in **_tx_port.h._**</span></span>
- <span data-ttu-id="9ffea-246">**TX_MISRA_ENABLE**: 定義されている場合、ThreadX SMP が MISRA C 準拠規則を使用します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-246">**TX_MISRA_ENABLE** : When defined, ThreadX SMP utilizes MISRA C compliant conventions.</span></span> <span data-ttu-id="9ffea-247">詳細については、**_ThreadX_MISRA_Compliance.pdf_** をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="9ffea-247">Refer to the **_ThreadX_MISRA_Compliance.pdf_** for details.</span></span>
- <span data-ttu-id="9ffea-248">**TX_MUTEX_ENABLE_PERFORMANCE_INFO**: 定義されている場合、ミューテックスに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-248">**TX_MUTEX_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on mutexes.</span></span> <span data-ttu-id="9ffea-249">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-249">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-250">**TX_NO_TIMER**: 定義されている場合、ThreadX SMP タイマー ロジックが完全に無効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-250">**TX_NO_TIMER** : When defined, the ThreadX SMP timer logic is completely disabled.</span></span> <span data-ttu-id="9ffea-251">これは、ThreadX SMP のタイマー機能 (スレッド スリープ、API タイムアウト、タイムスライス、アプリケーション タイマー) を使用しない場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-251">This is useful in cases where the ThreadX SMP timer features (thread sleep, API timeouts, time-slicing, and application timers) are not utilized.</span></span>
- <span data-ttu-id="9ffea-252">**TX_NOT_INTERRUPTABLE**: 定義されている場合、ThreadX SMP は割り込みロックアウト時間を最小に抑えようとしません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-252">**TX_NOT_INTERRUPTABLE** : When defined, ThreadX SMP does not attempt to minimize interrupt lockout time.</span></span> <span data-ttu-id="9ffea-253">この結果、実行速度が速くなりますが、割り込みロックアウト時間が若干長くなります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-253">This results in faster execution but does slightly increase interrupt lockout time.</span></span>
- <span data-ttu-id="9ffea-254">**TX_QUEUE_ENABLE_PERFORMANCE_INFO**: 定義されている場合、キューに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-254">**TX_QUEUE_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on queues.</span></span> <span data-ttu-id="9ffea-255">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-255">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-256">**TX_REACTIVATE_INLINE**: 定義されている場合、関数呼び出しを使用する代わりに、ThreadX SMP タイマーの再アクティブ化がインラインで行なわれます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-256">**TX_REACTIVATE_INLINE** : When defined, performs reactivation of ThreadX SMP timers in-line instead of using a function call.</span></span> <span data-ttu-id="9ffea-257">これによりパフォーマンスが向上しますが、コード サイズが若干増えます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-257">This improves performance but slightly increases code size.</span></span> <span data-ttu-id="9ffea-258">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-258">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-259">**TX_SEMAPHORE_ENABLE_PERFORMANCE_INFO**: 定義されている場合、セマフォに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-259">**TX_SEMAPHORE_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on semaphores.</span></span> <span data-ttu-id="9ffea-260">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-260">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-261">**TX_THREAD_ENABLE_PERFORMANCE_INFO**: 定義されている場合、スレッドに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-261">**TX_THREAD_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on threads.</span></span> <span data-ttu-id="9ffea-262">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-262">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-263">**TX_THREAD_SMP_CORE_MASK**: CORE 除外のビット マップ マスクを定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-263">**TX_THREAD_SMP_CORE_MASK** : Defines bit map mask for CORE exclusion.</span></span> <span data-ttu-id="9ffea-264">たとえば 4 コア環境では、この定義の値が 0xF です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-264">For example, a 4-core environment has a value of 0xF for this define.</span></span>
- <span data-ttu-id="9ffea-265">**TX_THREAD_SMP_DEBUG_ENABLE**: 定義されている場合、ThreadX SMP のデバッグ情報が循環バッファーに保存されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-265">**TX_THREAD_SMP_DEBUG_ENABLE** : When defined, ThreadX SMP debug information is saved in a circular buffer.</span></span>
- <span data-ttu-id="9ffea-266">**TX_THREAD_SMP_DYNAMIC_CORE_MAX**: 定義されている場合、実行時に調整できる動的最大コア数が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-266">**TX_THREAD_SMP_DYNAMIC_CORE_MAX** : When defined, enables the dynamic maximum number of cores that can be adjusted at run-time.</span></span>
- <span data-ttu-id="9ffea-267">**TX_THREAD_SMP_EQUAL_PRIORITY**: 定義されている場合、ThreadX SMP は同じ優先度のスレッドのみを並列でスケジュールします。</span><span class="sxs-lookup"><span data-stu-id="9ffea-267">**TX_THREAD_SMP_EQUAL_PRIORITY** : When defined, ThreadX SMP only schedules equal priority threads in parallel.</span></span> <span data-ttu-id="9ffea-268">これは、ThreadX SMP ライブラリをビルドする前に定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-268">This should be defined prior to building the ThreadX SMP library.</span></span>
- <span data-ttu-id="9ffea-269">**TX_THREAD_SMP_INTER_CORE_INTERRUPT**: 定義されている場合、ThreadX SMP がコア間割り込みを生成します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-269">**TX_THREAD_SMP_INTER_CORE_INTERRUPT** : When defined, ThreadX SMP generates inter-core interrupts.</span></span>
- <span data-ttu-id="9ffea-270">**TX_THREAD_SMP_MAX_CORES**: 最大コア数を定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-270">**TX_THREAD_SMP_MAX_CORES** : Defines the maximum number of cores.</span></span>
- <span data-ttu-id="9ffea-271">**TX_THREAD_SMP_ONLY_CORE_0_DEFAULT**: 定義されている場合、ThreadX SMP ですべてのスレッドとタイマーがコア 0 だけで実行されるよう既定で設定されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-271">**TX_THREAD_SMP_ONLY_CORE_0_DEFAULT** : When defined, ThreadX SMP defaults all threads and timers to execute only on core 0 by default.</span></span> <span data-ttu-id="9ffea-272">アプリケーションは、コア除外 API を呼び出すことによってこれをオーバーライドする場合があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-272">The application may override this by calling the core exclude APIs.</span></span> <span data-ttu-id="9ffea-273">これは、ThreadX SMP ライブラリをビルドする前に定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-273">This should be defined prior to building the ThreadX SMP library.</span></span>
- <span data-ttu-id="9ffea-274">**TX_THREAD_SMP_WAKEUP_LOGIC**: 定義されている場合、コア "i" をウェイクアップするアプリケーション マクロが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-274">**TX_THREAD_SMP_WAKEUP_LOGIC** : When defined, application macro to wakeup core "i" is invoked.</span></span> <span data-ttu-id="9ffea-275">これは、**_tx_port.h_** をインクルードする前に定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-275">This should be defined prior to inclusion of **_tx_port.h._**</span></span>
- <span data-ttu-id="9ffea-276">**TX_THREAD_SMP_WAKEUP(i)** : コア "i" をウェイクアップするアプリケーション マクロを定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-276">**TX_THREAD_SMP_WAKEUP(i)** : Defines an application macro to wakeup core "i".</span></span> <span data-ttu-id="9ffea-277">これは、**_tx_port.h_** をインクルードする前に定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-277">This should be defined prior to inclusion of **_tx_port.h._**</span></span>
- <span data-ttu-id="9ffea-278">**TX_TIMER_ENABLE_PERFORMANCE_INFO**: 定義されている場合、タイマーに関するパフォーマンス情報の収集が有効になります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-278">**TX_TIMER_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on timers.</span></span> <span data-ttu-id="9ffea-279">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-279">By default, this option is not defined.</span></span>
- <span data-ttu-id="9ffea-280">**TX_TIMER_PROCESS_IN_ISR**: 定義されている場合、ThreadX SMP の内部システム タイマー スレッドは除去されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-280">**TX_TIMER_PROCESS_IN_ISR** : When defined, eliminates the internal system timer thread for ThreadX SMP.</span></span> <span data-ttu-id="9ffea-281">この結果、タイマー スタックと制御ブロックが不要になるため、タイマー イベントのパフォーマンスが向上し、RAM の要件が小さくなります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-281">This results in improved performance on timer events and smaller RAM requirements because the timer stack and control block are no longer needed.</span></span> <span data-ttu-id="9ffea-282">ただし、このオプションを使用すると、タイマー期限切れ処理がすべてタイマー ISR レベルに移動します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-282">However, using this option moves all the timer expiration processing to the timer ISR level.</span></span> <span data-ttu-id="9ffea-283">既定では、このオプションは定義されていません。</span><span class="sxs-lookup"><span data-stu-id="9ffea-283">By default, this option is not defined.</span></span>

    > [!NOTE]
    > <span data-ttu-id="9ffea-284">タイマーから許可されているサービスが ISR から許可されなくなる可能性があり、その結果としてこのオプションを使用しているとき許可されなくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-284">That services allowed from timers may not be allowed from ISRs and thus might not be allowed when using this option.</span></span>

- <span data-ttu-id="9ffea-285">**TX_TIMER_THREAD_PRIORITY**: ThreadX SMP の内部システム タイマー スレッドの優先度を定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-285">**TX_TIMER_THREAD_PRIORITY** : Defines the priority of the internal ThreadX SMP system timer thread.</span></span> <span data-ttu-id="9ffea-286">既定値は優先度 0 で、ThreadX SMP で最も高い優先度です。</span><span class="sxs-lookup"><span data-stu-id="9ffea-286">The default value is priority 0—the highest priority in ThreadX SMP.</span></span> <span data-ttu-id="9ffea-287">既定値は **_tx_port.h_** で定義されています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-287">The default value is defined in **_tx_port.h._**</span></span>
- <span data-ttu-id="9ffea-288">**TX_TIMER_THREAD_STACK_SIZE**: ThreadX SMP 内部システム タイマー スレッドのスタック サイズ (バイト単位) を定義します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-288">**TX_TIMER_THREAD_STACK_SIZE** : Defines the stack size (in bytes) of the internal ThreadX SMP system timer thread.</span></span> <span data-ttu-id="9ffea-289">このスレッドは、すべてのスレッド スリープ要求だけでなく、すべてのサービス呼び出しタイムアウトも処理します。</span><span class="sxs-lookup"><span data-stu-id="9ffea-289">This thread processes all thread sleep requests as well as all service call timeouts.</span></span> <span data-ttu-id="9ffea-290">さらに、すべてのアプリケーション タイマー コールバック ルーチンがこのコンテキストから呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-290">In addition, all application timer callback routines are invoked from this context.</span></span> <span data-ttu-id="9ffea-291">既定値はポート固有であり、**_tx_port.h_** にあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-291">The default value is port-specific and is found in **_tx_port.h._**</span></span>

## <a name="threadx-smp-version-id"></a><span data-ttu-id="9ffea-292">ThreadX SMP バージョン ID</span><span class="sxs-lookup"><span data-stu-id="9ffea-292">ThreadX SMP Version ID</span></span>

<span data-ttu-id="9ffea-293">ThreadX SMP バージョン ID は、\***readme_threadx.txt** _ ファイルにあります。</span><span class="sxs-lookup"><span data-stu-id="9ffea-293">The ThreadX SMP version ID can be found in the \***readme_threadx.txt** _ file.</span></span> <span data-ttu-id="9ffea-294">このファイルには、対応するポートのバージョン履歴も含まれています。</span><span class="sxs-lookup"><span data-stu-id="9ffea-294">This file also contains a version history of the corresponding port.</span></span> <span data-ttu-id="9ffea-295">アプリケーション ソフトウェアは、グローバル文字列 _ *_ _tx_version_id_*\* を調べることで ThreadX SMP バージョンを取得できます。</span><span class="sxs-lookup"><span data-stu-id="9ffea-295">Application software can obtain the ThreadX SMP version by examining the global string _ *_ _tx_version_id._*\*</span></span>