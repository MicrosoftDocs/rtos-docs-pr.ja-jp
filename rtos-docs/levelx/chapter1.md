---
title: 第 1 章 - Azure RTOS LevelX の概要
description: Azure RTOS LevelX は、埋め込みアプリケーションに対して、NAND と NOR フラッシュのウェア レベリング機能を提供します。
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 045446fec74164f125bc0ad27e8b7a904be14ab2
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811090"
---
# <a name="chapter-1---overview-of-azure-rtos-levelx"></a>第 1 章 - Azure RTOS LevelX の概要

Azure RTOS LevelX は、埋め込みアプリケーションに対して、NAND と NOR フラッシュのウェア レベリング機能を提供します。 NAND と NOR のフラッシュ メモリはどちらも、消去できる回数が限られているため、フラッシュ メモリの使用を均等に分散させることが重要です。 これは、一般に "ウェア レベリング" と呼ばれ、LevelX の背後にある目的です。

再利用するフラッシュ ブロックを選択するアルゴリズムは、主に消去カウントに基づいていますが、完全ではありません。 消去カウントが最小のブロックであっても、それとは別に、消去カウントが最小消去カウントからの許容デルタ内にあり、古いマッピングの数がいっそう多いブロックがある場合、選択されない可能性があります。 このような場合は、古いマッピングの数が最も多いブロックが消去されて再利用されて、有効なマッピング エントリを移動するオーバーヘッドが削減されます。

LevelX では、NAND や NOR のパーツの複数のインスタンスがサポートされています。つまり、同じアプリケーション内で異なる LevelX のインスタンスを利用できます。 各インスタンスには、アプリケーションによって提供される専用の制御ブロックと、専用のフラッシュ ドライバーが必要です。

LevelX によってユーザーに示される論理セクターの配列は、LevelX 内の物理フラッシュ メモリにマップされています。 パフォーマンスを向上させるため、LevelX には最新の論理セクター マッピングのキャッシュも用意されています。 このキャッシュのサイズは、プログラマが定義します。 アプリケーションでは、FileX と LevelX を併用することも、論理セクターの読み取りと書き込みを直接行うこともできます。 LevelX は FileX には依存せず、ThreadX にはほとんど依存しません (プリミティブ ThreadX データ型が使用されるだけで)。

LevelX は、フォールト トレランス対応に設計されています。 フラッシュの更新は、複数のステップからなるプロセスで実行され、各ステップで中断できます。 LevelX は、次の操作の間に自動的に最適な状態に復旧されます。

LevelX には、基になるフラッシュ メモリに物理的にアクセスするためにフラッシュ ドライバーが必要です。 NAND や NOR のシミュレートされたドライバーの例が用意されており、実際の LevelX ドライバーを実装するのに適した出発点として使用できます。 また、ドライバーの要件については、後のドキュメントで詳しく説明されています。

以降の章では、NAND と NOR での LevelX のサポートに関する機能的操作について説明します。
