---
title: 1 章 - 概要
author: philmea
description: この記事では、Azure RTOS ThreadX モジュールの概要を示します
ms.author: philmea
ms.date: 07/15/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 0c9698086468d7bb41c33ebe9fa9d1ebb61b5f1f
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104810313"
---
# <a name="chapter-1-overview"></a>1 章: 概要

ThreadX Module コンポーネントは、アプリケーションの常駐部分とは別に構築されたモジュールを、アプリケーションが動的に読み込むためのインフラストラクチャを提供します。 これは、アプリケーション コードのサイズが使用可能なメモリを超えている場合に特に役立ちます。 また、コア イメージのデプロイ後に新しい機能を追加する必要がある場合にも役立ちます。 さらに、モジュールの動的な読み込みは、部分的なファームウェアの更新が必要な場合に使用できます。

読み込まれたモジュールのメモリ保護は、モジュール プリアンブルに指定されているプロパティに応じて省略可能です。 メモリ保護を指定すると、プロセッサのメモリ管理ハードウェアは、モジュールのすべてのスレッドに対してモジュールのコードとデータ メモリへのアクセスのみを許可するように構成されます。 無関係なメモリ アクセスや実行は必ずメモリ障害を招き、問題の原因のモジュール スレッドは終了します。 アプリケーションによってメモリ障害通知コールバックが登録されている場合、これはアプリケーションにメモリ障害を通知するためにも呼び出されます。

ThreadX Module コンポーネントでは、アプリケーションに依存することによって、モジュールを読み込むことができるメモリ領域を提供します。 各モジュールの命令領域は、インプレース実行される場合もあれば、RAM モジュールのメモリ領域にコピーされて実行される場合もあります。 すべての場合において、モジュールのデータ メモリの要件はモジュールのメモリ領域から割り当てられます。

同時に読み込むことができるモジュールの数に制限は (使用可能なメモリの量を除き) ありませんが、常駐する Module Manager コードのコピーは 1 つだけです。 図 1 は、Module Manager とモジュール自体の関係を示しています。

![モジュールと Module Manager の関係](media/image2.png)

**図 1** モジュールと Module Manager

各モジュールには、独自のメモリ領域が必要です。これを定義するのは、アプリケーションの責任です。 モジュールと Module Manager は、モジュールによって要求された ThreadX サービスに対応する事前定義された要求 ID によって、ソフトウェア ディスパッチ関数をとおしてやり取りします。 また、モジュールは、単一スレッドのエントリ ポイントと、必要なスタック サイズ、優先度、モジュール ID、コールバック スレッド スタックのサイズや優先度などを提供する必要があります。この情報は、各モジュールのプリアンブルで定義されます。

Module Manager は、初期モジュール スレッドを作成し、その実行を開始する責任があります。 いったんモジュールの初期スレッドが実行されたら、モジュールによって行われるすべての ThreadX API 要求を処理するのは Module Manager の責任です。 モジュールには ThreadX API へのフル アクセス権があり、これにはモジュールの中で追加スレッドを作成する機能が含まれます。  
  
モジュールのソース コードの名前付け規則は簡単です。Module Manager のすべてのソース ファイルには ***txm_module_manager_\**** という名前が付けられ、モジュールのみに関連付けられているすべてのファイルは名前の "**_manager_ *_" 部分が省略されます。メイン インクルード ファイル _* _txm_module.h_** は、マネージャーとモジュールのソース コードによって共有されます。
