---
title: 第 2 章 - RTOS NetX Duo LWM2M クライアントのインストールと使用
description: この章では、RTOS NetX Duo LWM2M クライアントをインストールして使用する方法について説明します。
author: v-condav
ms.author: v-condav
ms.date: 01/22/2021
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 536225de30f54356157c222917fc904c6aa039fe
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104810766"
---
# <a name="chapter-2--installation-and-use-of-lwm2m-client"></a><span data-ttu-id="7d9ee-103">第 2 章 - LWM2M クライアントのインストールと使用</span><span class="sxs-lookup"><span data-stu-id="7d9ee-103">Chapter 2  Installation and Use of LWM2M Client</span></span>

<span data-ttu-id="7d9ee-104">この章では、LWM2M クライアント コンポーネントのインストール、セットアップ、および使用に関連するさまざまな問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-104">This chapter contains a description of various issues related to installation, setup, and usage of the LWM2M Client component.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="7d9ee-105">製品の配布</span><span class="sxs-lookup"><span data-stu-id="7d9ee-105">Product Distribution</span></span>

<span data-ttu-id="7d9ee-106">Azure RTOS LWM2M クライアントは、[https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/) のパブリック ソース コード リポジトリから入手できます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-106">Azure RTOS LWM2M Client can be obtained from our public source code repository at [https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/).</span></span> <span data-ttu-id="7d9ee-107">パッケージには、次のような 3 つのソース ファイルとインクルード ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-107">The package includes three source files, one include files, as follows.</span></span>

* <span data-ttu-id="7d9ee-108">**nx\_lwm2m\_client.h**: LWM2M クライアント用のヘッダー ファイル</span><span class="sxs-lookup"><span data-stu-id="7d9ee-108">**nx\_lwm2m\_client.h** Header file for the LWM2M Client</span></span>

* <span data-ttu-id="7d9ee-109">**nx\_lwm2m\_client.c**: LWM2M クライアントの C ソース ファイル</span><span class="sxs-lookup"><span data-stu-id="7d9ee-109">**nx\_lwm2m\_client.c** C Source files for LWM2M Client</span></span>

* <span data-ttu-id="7d9ee-110">**demo\_netx\_lwm2m\_client.c**: LWM2M クライアント デモの C ソース ファイル</span><span class="sxs-lookup"><span data-stu-id="7d9ee-110">**demo\_netx\_lwm2m\_client.c** C Source file for LWM2M Client Demo</span></span>

## <a name="lwm2m-client-installation"></a><span data-ttu-id="7d9ee-111">LWM2M クライアントのインストール</span><span class="sxs-lookup"><span data-stu-id="7d9ee-111">LWM2M Client Installation</span></span>

<span data-ttu-id="7d9ee-112">LWM2M クライアントは NetX Duo の一部です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-112">The LWM2M Client is part of NetX Duo.</span></span> <span data-ttu-id="7d9ee-113">このため、NetX Duo を GitHub リポジトリから複製した後、***netxduo/addons/lwm2m*** で LWM2M クライアントのソースを見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-113">Therefore, after cloning NetX Duo from the GitHub repository, LWM2M client source can be found at ***netxduo/addons/lwm2m***.</span></span>

## <a name="using-lwm2m_client"></a><span data-ttu-id="7d9ee-114">LWM2M\_Client の使用</span><span class="sxs-lookup"><span data-stu-id="7d9ee-114">Using LWM2M\_Client</span></span>

<span data-ttu-id="7d9ee-115">LWM2M クライアントの使用は簡単です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-115">Using LWM2M Client is straightforward.</span></span> <span data-ttu-id="7d9ee-116">基本的には、アプリケーション コードに ThreadX と NetX を使用するための \*\*\*\*_\* _tx\_api.h_ \*_ と _\* _nx\_api.h_ \*_ をインクルードしてから nx\_lwm2m\_client.h*_ をインクルードする必要があります。_* _nx\_lwm2m\_client.h_ *_ がインクルードされると、このガイドの後半に記載されている LWM2M クライアント関数呼び出しをアプリケーション コードで実行できるようになります。また、アプリケーションによって _* _nx\_lwm2m\_client\_.\*\*\*\* ファイルを NetX ライブラリにインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-116">Basically, the application code must include ***nx\_lwm2m\_client.h\*\*_ after it includes _*_tx\_api.h_*_ and _*_nx\_api.h_*_, in order to use ThreadX and NetX. Once _*_nx\_lwm2m\_client.h_*_ is included, the application code is then able to make the LWM2M Client function calls specified later in this guide. The application must also import the _* _nx\_lwm2m\_client\_.\***\* files into the NetX library.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="7d9ee-117">構成オプション</span><span class="sxs-lookup"><span data-stu-id="7d9ee-117">Configuration Options</span></span>

<span data-ttu-id="7d9ee-118">LWM2M クライアントを使用して LWM2M クライアント ライブラリとアプリケーションを構築する場合、構成オプションがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-118">There are several configuration options when building the LWM2M Client library and the application using the LWM2M Client.</span></span> <span data-ttu-id="7d9ee-119">構成オプションは、アプリケーション ソース内に定義できます。他に指定がない場合、コマンド ラインで指定できます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-119">The configuration options can be defined in the application source, on the command line, unless otherwise specified.</span></span>

| <span data-ttu-id="7d9ee-120">構成&nbsp;オプション</span><span class="sxs-lookup"><span data-stu-id="7d9ee-120">Configuration&nbsp;Option</span></span> | <span data-ttu-id="7d9ee-121">説明</span><span class="sxs-lookup"><span data-stu-id="7d9ee-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7d9ee-122">**NX\_LWM2M\_CLIENT\_MTU**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-122">**NX\_LWM2M\_CLIENT\_MTU**</span></span> | <span data-ttu-id="7d9ee-123">CoAP のメッセージの最大サイズを指定します (IP ヘッダーと UDP ヘッダーを含みます)。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-123">Specifies the maximum size of a CoAP message, including IP and UDP headers.</span></span> <span data-ttu-id="7d9ee-124">既定値は 1280 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-124">The default value is 1280.</span></span> |
| <span data-ttu-id="7d9ee-125">**NX\_LWM2M\_CLIENT\_SOCKET\_TOS**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-125">**NX\_LWM2M\_CLIENT\_SOCKET\_TOS**</span></span> | <span data-ttu-id="7d9ee-126">LwM2M UDP に必要なサービスの種類。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-126">Type of service required for the LwM2M UDP.</span></span> <span data-ttu-id="7d9ee-127">既定では、この値は通常の IP パケット サービスを示す NX\_IP\_NORMAL と定義されます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-127">By default, this value is defined as NX\_IP\_NORMAL to indicate normal IP packet service.</span></span> |
| <span data-ttu-id="7d9ee-128">**NX\_LWM2M\_CLIENT\_SOCKET\_TTL**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-128">**NX\_LWM2M\_CLIENT\_SOCKET\_TTL**</span></span> | <span data-ttu-id="7d9ee-129">このパケットが通過できるルーターの数を指定します。この数を超えるとパケットは破棄されます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-129">Specifies the number of routers this packet can pass before it is discarded.</span></span> <span data-ttu-id="7d9ee-130">既定値は 0x80 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-130">The default value is set to 0x80.</span></span> |
| <span data-ttu-id="7d9ee-131">**NX\_LWM2M\_CLIENT\_SOCKET\_QUEUE\_MAX**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-131">**NX\_LWM2M\_CLIENT\_SOCKET\_QUEUE\_MAX**</span></span> | <span data-ttu-id="7d9ee-132">受信キューの最大深度数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-132">Specifies the number of maximum depths of receive queue.</span></span> <span data-ttu-id="7d9ee-133">既定値は 4 に設定されています。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-133">The default value is set to 4.</span></span> |
| <span data-ttu-id="7d9ee-134">**NX\_LWM2M\_CLIENT\_MAX\_COAP\_URI\_PATH**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-134">**NX\_LWM2M\_CLIENT\_MAX\_COAP\_URI\_PATH**</span></span> | <span data-ttu-id="7d9ee-135">CoAP Uri-Path オプションの最大長を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-135">Specifies the number of maximum lengths of the CoAP Uri-Path option.</span></span> <span data-ttu-id="7d9ee-136">既定値は 32 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-136">The default value is set to 32.</span></span> |
| <span data-ttu-id="7d9ee-137">**NX\_LWM2M\_CLIENT\_MAX\_DEVICE\_ERRORS**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-137">**NX\_LWM2M\_CLIENT\_MAX\_DEVICE\_ERRORS**</span></span> | <span data-ttu-id="7d9ee-138">デバイス オブジェクトによって格納されるエラー コードの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-138">Specifies the maximum number of error codes stored by the Device Object.</span></span> <span data-ttu-id="7d9ee-139">既定値は 8 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-139">The default value is 8.</span></span> |
| <span data-ttu-id="7d9ee-140">**NX\_LWM2M\_CLIENT\_MAX\_SECURITY\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-140">**NX\_LWM2M\_CLIENT\_MAX\_SECURITY\_INSTANCES**</span></span> | <span data-ttu-id="7d9ee-141">セキュリティ オブジェクト インスタンスの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-141">Specifies the maximum number of Security Object Instances.</span></span> <span data-ttu-id="7d9ee-142">既定値は 2 であり、ブートストラップ サーバーと標準サーバーがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-142">The default value is 2 for supporting a Bootstrap Server and a standard Server.</span></span> |
| <span data-ttu-id="7d9ee-143">**NX\_LWM2M\_CLIENT\_MAX\_SERVER\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-143">**NX\_LWM2M\_CLIENT\_MAX\_SERVER\_INSTANCES**</span></span> | <span data-ttu-id="7d9ee-144">サーバー オブジェクト インスタンスの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-144">Specifies the maximum number of Server Object Instances.</span></span> <span data-ttu-id="7d9ee-145">既定値は 1 であり、1 台の標準サーバーがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-145">The default value is 1 for supporting a single standard Server.</span></span> |
| <span data-ttu-id="7d9ee-146">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-146">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_INSTANCES**</span></span> | <span data-ttu-id="7d9ee-147">アクセス制御インスタンスの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-147">Specifies the maximum number of Access Control Instances.</span></span> <span data-ttu-id="7d9ee-148">既定値は 0 です。これにより、アクセス制御は無効になります。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-148">The default value is 0, which disables access control.</span></span> <span data-ttu-id="7d9ee-149">アプリケーションで複数の LWM2M サーバーがサポートされている場合は、アクセス制御インスタンスの最大数を、LWM2M クライアントがサポートするオブジェクト インスタンスの最大数に設定する必要があります。これは、オブジェクト インスタンスごとに 1 つのアクセス制御インスタンスを作成する必要があるためです (セキュリティ オブジェクト インスタンスは除きます)。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-149">If the application supports more than one LWM2M Server, the maximum number of Access Control Instances must be set to the maximum number of Object Instances that the LWM2M Client will support, as one Access Control Instance must be created for each Object Instance (except for the Security Object Instances).</span></span> |
| <span data-ttu-id="7d9ee-150">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_ACLS**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-150">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_ACLS**</span></span> | <span data-ttu-id="7d9ee-151">アクセス制御インスタンスあたりの ACL リソースの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-151">Specifies the maximum number of ACL resources per Access Control Instance.</span></span> <span data-ttu-id="7d9ee-152">既定値は 4 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-152">The default value is 4.</span></span> |
| <span data-ttu-id="7d9ee-153">**NX\_LWM2M\_CLIENT\_MAX\_NOTIFICATIONS**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-153">**NX\_LWM2M\_CLIENT\_MAX\_NOTIFICATIONS**</span></span> | <span data-ttu-id="7d9ee-154">LWM2M クライアントでサポートする通知の最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-154">Specifies the maximum number of notifications that the LWM2M Client will support.</span></span> <span data-ttu-id="7d9ee-155">LWM2M サーバーでは、オブジェクト、オブジェクト インスタンス、およびリソースに関する通知を設定できます。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-155">A LWM2M Server can set notifications on Objects, Object Instances, and Resources.</span></span> <span data-ttu-id="7d9ee-156">既定値は 8 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-156">The default value is 8.</span></span> |
| <span data-ttu-id="7d9ee-157">**NX\_LWM2M\_CLIENT\_MAX\_RESOURCES**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-157">**NX\_LWM2M\_CLIENT\_MAX\_RESOURCES**</span></span> | <span data-ttu-id="7d9ee-158">オブジェクトごとのリソースの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-158">Specifies the maximum number of Resources per Object.</span></span> <span data-ttu-id="7d9ee-159">既定値は 32 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-159">The default value is 32.</span></span> |
| <span data-ttu-id="7d9ee-160">**NX\_LWM2M\_CLIENT\_MAX\_MULTIPLE\_RESOURCES**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-160">**NX\_LWM2M\_CLIENT\_MAX\_MULTIPLE\_RESOURCES**</span></span> | <span data-ttu-id="7d9ee-161">複数のリソースのリソース インスタンスの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-161">Specifies the maximum number of Resources instances for multiple resource.</span></span> <span data-ttu-id="7d9ee-162">既定値は 8 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-162">The default value is 8.</span></span> |
| <span data-ttu-id="7d9ee-163">**NX\_LWM2M\_CLIENT\_BOOTSTRAP\_IDLE\_TIMER**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-163">**NX\_LWM2M\_CLIENT\_BOOTSTRAP\_IDLE\_TIMER**</span></span> | <span data-ttu-id="7d9ee-164">ブートストラップ セッションが開始されたときに、セッションを中止するまでの最大待機時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-164">Specifies the maximum time to wait for bootstrap server requests when the bootstrap session is initiated before aborting the session.</span></span> <span data-ttu-id="7d9ee-165">既定値は 60 秒です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-165">The default value is 60 seconds.</span></span> |
| <span data-ttu-id="7d9ee-166">**NX\_LWM2M\_CLIENT\_DTLS\_START\_TIMEOUT**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-166">**NX\_LWM2M\_CLIENT\_DTLS\_START\_TIMEOUT**</span></span> | <span data-ttu-id="7d9ee-167">DTLS ハンドシェイクの完了を待機する最大時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-167">Specifies the maximum time to wait for DTLS handshake completion.</span></span> <span data-ttu-id="7d9ee-168">既定値は 30 秒です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-168">The default value is 30 seconds.</span></span> |
| <span data-ttu-id="7d9ee-169">**NX\_LWM2M\_CLIENT\_DTLS\_END\_TIMEOUT**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-169">**NX\_LWM2M\_CLIENT\_DTLS\_END\_TIMEOUT**</span></span> | <span data-ttu-id="7d9ee-170">DTLS シャットダウンの完了を待機する最大時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-170">Specifies the maximum time to wait for DTLS shutdown completion.</span></span> <span data-ttu-id="7d9ee-171">既定値は 5 秒です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-171">The default value is 5 seconds.</span></span> |
| <span data-ttu-id="7d9ee-172">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_URI**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-172">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_URI**</span></span> | <span data-ttu-id="7d9ee-173">終端の null 文字を含むサーバー URI の最大長を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-173">Specifies the maximum length of a server URI, including terminating null character.</span></span> <span data-ttu-id="7d9ee-174">既定値は 128 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-174">The default value is 128.</span></span> |
| <span data-ttu-id="7d9ee-175">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_PUBLIC\_KEY\_OR\_IDENTITY**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-175">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_PUBLIC\_KEY\_OR\_IDENTITY**</span></span> | <span data-ttu-id="7d9ee-176">DTLS の公開キーまたは ID の最大長を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-176">Specifies the maximum length of the public key or identity for DTLS.</span></span> <span data-ttu-id="7d9ee-177">既定値は 128 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-177">The default value is 128.</span></span> |
| <span data-ttu-id="7d9ee-178">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_PUBLIC\_KEY**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-178">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_PUBLIC\_KEY**</span></span> | <span data-ttu-id="7d9ee-179">DTLS のサーバー公開キーの最大長を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-179">Specifies the maximum length of the server public key for DTLS.</span></span> <span data-ttu-id="7d9ee-180">既定値は 128 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-180">The default value is 128.</span></span> |
| <span data-ttu-id="7d9ee-181">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SECRET\_KEY**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-181">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SECRET\_KEY**</span></span> | <span data-ttu-id="7d9ee-182">DTLS のシークレット キーの最大長を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-182">Specifies the maximum length of the secret key for DTLS.</span></span> <span data-ttu-id="7d9ee-183">既定値は 128 です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-183">The default value is 128.</span></span> |
| <span data-ttu-id="7d9ee-184">**NX\_LWM2M\_CLIENT\_HOLD\_OFF**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-184">**NX\_LWM2M\_CLIENT\_HOLD\_OFF**</span></span> | <span data-ttu-id="7d9ee-185">ブートストラップを開始する前に待機する秒数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-185">Specifies the number of seconds to wait before initiating bootstrap.</span></span> <span data-ttu-id="7d9ee-186">既定値は 1 秒です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-186">The default value is 1 second.</span></span> |
| <span data-ttu-id="7d9ee-187">**NX\_LWM2M\_CLIENT\_LIFE\_TIME**</span><span class="sxs-lookup"><span data-stu-id="7d9ee-187">**NX\_LWM2M\_CLIENT\_LIFE\_TIME**</span></span> | <span data-ttu-id="7d9ee-188">登録の有効期間の秒数を指定します。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-188">Specifies the number of seconds for the registration lifetime.</span></span> <span data-ttu-id="7d9ee-189">既定値は 600 秒です。</span><span class="sxs-lookup"><span data-stu-id="7d9ee-189">The default value is 600 seconds.</span></span> |
