---
title: 第 5 章 - Azure RTOS NetX Duo のネットワーク ドライバー
description: この章では、Azure RTOS NetX Duo のネットワーク ドライバーについて説明します。
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: ede57b7512f4a1a4c30759f428962739aaa2777c
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811000"
---
# <a name="chapter-5---azure-rtos-netx-duo-network-drivers"></a><span data-ttu-id="3cb13-103">第 5 章 - Azure RTOS NetX Duo のネットワーク ドライバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-103">Chapter 5 - Azure RTOS NetX Duo Network Drivers</span></span>

<span data-ttu-id="3cb13-104">この章では、Azure RTOS NetX Duo のネットワーク ドライバーについて説明します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-104">This chapter contains a description of network drivers for Azure RTOS NetX Duo.</span></span> <span data-ttu-id="3cb13-105">開発者が特定のアプリケーション用に NetX Duo のネットワーク ドライバーを作成するのに役立つ情報を掲載しています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-105">The information presented is designed to help developers write application-specific network drivers for NetX Duo.</span></span>

## <a name="driver-introduction"></a><span data-ttu-id="3cb13-106">ドライバーの概要</span><span class="sxs-lookup"><span data-stu-id="3cb13-106">Driver Introduction</span></span>

<span data-ttu-id="3cb13-107">NX_IP 構造体には、単一の IP インスタンスを管理するのに必要な情報がすべて含まれています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-107">The NX_IP structure contains everything to manage a single IP instance.</span></span> <span data-ttu-id="3cb13-108">これには、TCP/IP プロトコルの一般的な情報や、アプリケーション固有の物理ネットワーク ドライバーのエントリ ルーチンも含まれています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-108">This includes general TCP/IP protocol information as well as the application-specific physical network driver's entry routine.</span></span> <span data-ttu-id="3cb13-109">ドライバーのエントリ ルーチンは \***nx_ip_create** サービス実行中に定義されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-109">The driver's entry routine is defined during the \***nx_ip_create** _ service.</span></span> <span data-ttu-id="3cb13-110">新しいデバイスを IP インスタンスに追加する場合は _ *_nx_ip_interface_attach_*\* サービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-110">Additional devices may be added to the IP instance via the _ *_nx_ip_interface_attach_*\* service.</span></span>

<span data-ttu-id="3cb13-111">NetX Duo とアプリケーションのネットワーク ドライバーの通信は **NX_IP_DRIVER** 要求構造体を使用して行われます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-111">Communication between NetX Duo and the application's network driver is accomplished through the **NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="3cb13-112">多くの場合、この構造体は呼び出し元のスタックでローカルに定義され、ドライバー関数と呼び出し関数が値を返した後で解放されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-112">This structure is most often defined locally on the caller's stack and is therefore released after the driver and calling function return.</span></span> <span data-ttu-id="3cb13-113">この構造体は次のように定義されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-113">The structure is defined as follows.</span></span>

```c
typedef struct NX_IP_DRIVER_STRUCT
{
      UINT           nx_ip_driver_command;
      UINT           nx_ip_driver_status;
      ULONG          nx_ip_driver_physical_address_msw;
      ULONG          nx_ip_driver_physical_address_lsw;
      NX_PACKET      *nx_ip_driver_packet;
      ULONG          *nx_ip_driver_return_ptr;
      NX_IP          *nx_ip_driver_ptr;
      NX_INTERFACE   *nx_ip_driver_interface;01
} NX_IP_DRIVER;
```
## <a name="driver-entry"></a><span data-ttu-id="3cb13-114">ドライバー エントリ</span><span class="sxs-lookup"><span data-stu-id="3cb13-114">Driver Entry</span></span> 

<span data-ttu-id="3cb13-115">NetX Duo では、ネットワーク ドライバー エントリ関数を呼び出すことで、ドライバーの初期化、パケットの送信、ネットワーク デバイスの初期化と有効化などのさまざまな制御や状態操作を行います。</span><span class="sxs-lookup"><span data-stu-id="3cb13-115">NetX Duo invokes the network driver entry function for driver initialization and for sending packets and for various control and status operations, including initializing and enabling the network device.</span></span> <span data-ttu-id="3cb13-116">NetX Duo では、_ *NX_IP_DRIVER*\* 要求構造体の \***nx_ip_driver_command** _ フィールドを設定することにより、ネットワーク ドライバーにコマンドを発行します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-116">NetX Duo issues commands to the network driver by setting the ***nx_ip_driver_command** _ field in the _ *NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="3cb13-117">ドライバー エントリ関数の形式は次のとおりです:</span><span class="sxs-lookup"><span data-stu-id="3cb13-117">The driver entry function has the following format:</span></span>

```c
VOID my_driver_entry(NX_IP_DRIVER *request);
```
## <a name="driver-requests"></a><span data-ttu-id="3cb13-118">ドライバー要求</span><span class="sxs-lookup"><span data-stu-id="3cb13-118">Driver Requests</span></span>

<span data-ttu-id="3cb13-119">NetX Duo は特定のコマンドでドライバー要求を作成し、そのコマンドを実行するためのドライバー エントリ関数を実行します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-119">NetX Duo creates the driver request with a specific command and invokes the driver entry function to execute the command.</span></span> <span data-ttu-id="3cb13-120">各ネットワーク ドライバーには 1 つずつエントリ関数が用意されているので、NetX Duo では、あらゆる要求を行うのにドライバー要求データ構造体を使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-120">Because each network driver has a single entry function, NetX Duo makes all requests through the driver request data structure.</span></span> <span data-ttu-id="3cb13-121">ドライバー要求データ構造体 ( _\*NX_IP_DRIVER\*\*) では ***nx_ip_driver_command** _ メンバーで要求を定義します。状態の情報は、\*\*_nx_ip_driver_status_* メンバーに存在する呼び出し元に報告されます_。</span><span class="sxs-lookup"><span data-stu-id="3cb13-121">The ***nx_ip_driver_command** _ member of the driver request data structure (_*NX_IP_DRIVER\*\*) defines the request. Status information is reported back to the caller in the member \**_nx_ip_driver_status_*_.</span></span> <span data-ttu-id="3cb13-122">このフィールドが _*NX_SUCCESS*\* になっている場合、ドライバー要求が完了したことを意味します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-122">If this field is _\*NX_SUCCESS\*\*, the driver request was completed successfully.</span></span>

<span data-ttu-id="3cb13-123">NetX Duo では、ドライバーへのすべてのアクセスがシリアル化されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-123">NetX Duo serializes all access to the driver.</span></span> <span data-ttu-id="3cb13-124">そのため、エントリ関数を非同期で呼び出している複数のスレッドをドライバーで処理する必要がありません。</span><span class="sxs-lookup"><span data-stu-id="3cb13-124">Therefore, the driver does not need to handle multiple threads asynchronously calling the entry function.</span></span> <span data-ttu-id="3cb13-125">デバイス ドライバー関数は、IP ミューテックスをロックした状態で実行されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3cb13-125">Note that the device driver function executes with the IP mutex locked.</span></span> <span data-ttu-id="3cb13-126">そのため、デバイス ドライバー内部の関数は自身をブロックすることができません。</span><span class="sxs-lookup"><span data-stu-id="3cb13-126">Therefore the device driver internal function shall not block itself.</span></span>

<span data-ttu-id="3cb13-127">通常デバイス ドライバーは割り込みも処理します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-127">Typically the device driver also handles interrupts.</span></span> <span data-ttu-id="3cb13-128">そのため、すべてのドライバー関数が割り込みセーフである必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-128">Therefore, all driver functions need to be interrupt-safe.</span></span>

### <a name="driver-initialization"></a><span data-ttu-id="3cb13-129">ドライバーの初期化</span><span class="sxs-lookup"><span data-stu-id="3cb13-129">Driver Initialization</span></span>   
<span data-ttu-id="3cb13-130">実際のドライバー初期化処理はアプリケーションごとに異なりますが、通常、データ構造体と物理ハードウェアの初期化で構成されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-130">Although the actual driver initialization processing is application specific, it usually consists of data structure and physical hardware initialization.</span></span> <span data-ttu-id="3cb13-131">ドライバー初期化のために NetX Duo で必要な情報は、IP 最大転送単位 (MTU。IPv4 または IPv6 ヘッダーを含めて IP 層のペイロードに使用できるバイト数) と、物理インターフェイスで論理から物理へのマッピングが必要かどうかという情報です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-131">The information required from NetX Duo for driver initialization is the IP Maximum Transmission Unit (MTU), which is the number of bytes available to the IP-layer payload, including IPv4 or IPv6 header) and if the physical interface needs logical-to-physical mapping.</span></span> <span data-ttu-id="3cb13-132">ドライバーは ***nx_ip_interface_mtu_set*** を呼び出すことでインターフェイスの MTU を構成します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-132">The driver configures the interface MTU value by calling ***nx_ip_interface_mtu_set***.</span></span>

<span data-ttu-id="3cb13-133">デバイス ドライバーは \***nx_ip_interface_address_mapping_configure** _ を呼び出して、インターフェイスへのアドレスのマッピングが必要かどうかを NetX Duo に通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-133">The device driver needs to call \***nx_ip_interface_address_mapping_configure** _ to inform NetX Duo whether or not interface address mapping is required.</span></span> <span data-ttu-id="3cb13-134">アドレスのマッピングが必要な場合、ドライバーが有効な MAC アドレスを使用してインターフェイスを構成し、_*_nx_ip_interface_physical_address_set_*\* を通じてその MAC アドレスを NetX に渡します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-134">If address mapping is needed, the driver is responsible for configuring the interface with valid MAC address, and supply the MAC address to NetX via _\*_nx_ip_interface_physical_address_set_\*\*.</span></span>

<span data-ttu-id="3cb13-135">ネットワーク ドライバーは、NetX Duo から NX_LINK INITIALIZE 要求を受信するときに、上に示した NX_IP_DRIVER 要求制御ブロックの一部として IP 制御ブロックを指すポインターを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-135">When the network driver receives the NX_LINK INITIALIZE request from NetX Duo, it receives a pointer to the IP control block as part of the NX_IP_DRIVER request control block shown above.</span></span>

<span data-ttu-id="3cb13-136">アプリケーションで ***nx_ip_create*** を呼び出した後、IP ヘルパー スレッドは、NX_LINK_INITIALIZE に格納されたコマンドを使用して、ドライバー要求をドライバーに送信し、物理ネットワーク インターフェイスを初期化します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-136">After the application calls ***nx_ip_create***, the IP helper thread sends a driver request with the command set to NX_LINK_INITIALIZE to the driver to initialize its physical network interface.</span></span> <span data-ttu-id="3cb13-137">初期化要求には次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-137">The following NX_IP_DRIVER members are used for the initialize request.</span></span>

| <span data-ttu-id="3cb13-138">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-138">NX_IP_DRIVER&nbsp;member</span></span> | <span data-ttu-id="3cb13-139">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-139">Meaning</span></span>    |
| ------------------------- | ----------------------------- |
| <span data-ttu-id="3cb13-140">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-140">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-141">NX_LINK_INITIALIZE</span><span class="sxs-lookup"><span data-stu-id="3cb13-141">NX_LINK_INITIALIZE</span></span>    |
| <span data-ttu-id="3cb13-142">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-142">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-143">IP インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-143">Pointer to the IP instance.</span></span> <span data-ttu-id="3cb13-144">操作の対象となる IP インスタンスをドライバー関数が見つけられるよう、この値はドライバーで保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-144">This value should be saved by the driver so that the driver function can find the IP instance to operate on.</span></span>    |
| <span data-ttu-id="3cb13-145">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-145">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-146">IP インスタンス内のネットワーク インターフェイス構造体を指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-146">Pointer to the network interface structure within the IP instance.</span></span> <span data-ttu-id="3cb13-147">この情報はドライバーで保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-147">This information should be saved by the driver.</span></span> <span data-ttu-id="3cb13-148">パケットを受信すると、ドライバーはインターフェイス構造体の情報を使用してスタックの上部にパケットを送ります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-148">On receiving packets, the driver shall use the interface structure information when sending the packet up the stack.</span></span> <span data-ttu-id="3cb13-149">このデータ構造体の nx_interface_index メンバーを読み取ることでインターフェイス インデックス (デバイス インデックス) を取得できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-149">The interface index (device index) can be obtained by reading the member nx_interface_index inside this data structure.</span></span> |
| <span data-ttu-id="3cb13-150">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-150">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-151">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-151">Completion status.</span></span> <span data-ttu-id="3cb13-152">ドライバーで IP インスタンスの指定されたインターフェイスを初期化できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-152">If the driver is not able to initialize the specified interface to the IP instance, it will return a nonzero error status.</span></span> |


> [!NOTE]  
> <span data-ttu-id="3cb13-153">*実際には IP インスタンス用に作成された IP ヘルパー スレッドからドライバーが呼び出されます。そのため、ドライバー ルーチンでのブロック操作の実行を避ける必要があります。そうしないと、IP ヘルパー スレッドが停止し、その IP スレッドを必要とするアプリケーションで無期限の遅延が生じるおそれがあります*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-153">*The driver is actually called from the IP helper thread that was created for the IP instance. Therefore the driver routine should avoid performing blocking operations, or the IP helper thread could stall, causing unbounded delays to applications that rely on the IP thread*.</span></span>

### <a name="enable-link"></a><span data-ttu-id="3cb13-154">リンク有効化</span><span class="sxs-lookup"><span data-stu-id="3cb13-154">Enable Link</span></span>   
<span data-ttu-id="3cb13-155">次に IP ヘルパー スレッドは、ドライバー要求の NX_LINK_ENABLE にドライバー コマンドを設定し、その要求をネットワーク ドライバーに送信することによって、物理ネットワークを有効にします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-155">Next, the IP helper thread enables the physical network by setting the driver command to NX_LINK_ENABLE in the driver request and sending the request to the network driver.</span></span> <span data-ttu-id="3cb13-156">これは、IP ヘルパー スレッドが初期化要求を完了した直後に実行されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-156">This happens shortly after the IP helper thread completes the initialization request.</span></span> <span data-ttu-id="3cb13-157">リンクは、インターフェイス インスタンスの *nx_interface_link_up* フィールドを設定するだけで有効にできる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-157">Enabling the link may be as simple as setting the *nx_interface_link_up* field in the interface instance.</span></span> <span data-ttu-id="3cb13-158">ですが、物理ハードウェアの操作が必要な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-158">But it may also involve manipulation of the physical hardware.</span></span> <span data-ttu-id="3cb13-159">リンクを有効にする要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-159">The following NX_IP_DRIVER members are used for the enable link request.</span></span>

| <span data-ttu-id="3cb13-160">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-160">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="3cb13-161">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-161">Meaning</span></span>                      |
| ------------------------- | ---------------------------- |
| <span data-ttu-id="3cb13-162">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-162">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-163">NX_LINK_ENABLE</span><span class="sxs-lookup"><span data-stu-id="3cb13-163">NX_LINK_ENABLE</span></span>   |
| <span data-ttu-id="3cb13-164">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-164">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-165">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-165">Pointer to IP instance</span></span>  |
| <span data-ttu-id="3cb13-166">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-166">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-167">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-167">Pointer to the interface instance</span></span> |
| <span data-ttu-id="3cb13-168">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-168">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-169">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-169">Completion status.</span></span> <span data-ttu-id="3cb13-170">ドライバーで指定されたインターフェイスを有効にできない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-170">If the driver is not able to enable the specified interface, it will return a non-zero error status.</span></span> |

### <a name="disable-link"></a><span data-ttu-id="3cb13-171">リンク無効化</span><span class="sxs-lookup"><span data-stu-id="3cb13-171">Disable Link</span></span>   
<span data-ttu-id="3cb13-172">\***nx_ip_delete** _ サービスで IP インスタンスを削除するときに NetX Duo によってこの要求が行われます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-172">This request is made by NetX Duo during the deletion of an IP instance by the \***nx_ip_delete** _ service.</span></span> <span data-ttu-id="3cb13-173">または、アプリケーションでこのコマンドを実行して、電力を節約するために一時的にリンクを無効にする場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-173">Or an application may issue this command in order to temporarily disable the link in order to save power.</span></span> <span data-ttu-id="3cb13-174">このサービスにより、IP インスタンスの物理ネットワーク インターフェイスが無効になります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-174">This service disables the physical network interface on the IP instance.</span></span> <span data-ttu-id="3cb13-175">インターフェイス インスタンスで _nx_interface_link_up\* フラグを削除するだけでリンクを無効化できる場合もありますが、物理ハードウェアの操作が必要な場合もあります。これは通常 \***Enable Link**_ 操作の逆操作です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-175">The processing to disable the link may be as simple as clearing the _nx_interface_link_up\* flag in the interface instance. But it may also involve manipulation of the physical hardware. Typically it is a reverse operation of the \***Enable Link**_ operation.</span></span> <span data-ttu-id="3cb13-176">リンクを無効にした後、アプリケーションは _ *_Enable link_*\* 操作を要求してインターフェイスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-176">After the link is disabled, the application request _ *_Enable Link_*\* operation to enable the interface.</span></span>

<span data-ttu-id="3cb13-177">リンク無効化要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-177">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="3cb13-178">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-178">NX_IP_DRIVER&nbsp;member</span></span>     | <span data-ttu-id="3cb13-179">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-179">Meaning</span></span>                      |
| ------------------------- | ---------------------------- |
| <span data-ttu-id="3cb13-180">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-180">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-181">NX_LINK_DISABLE</span><span class="sxs-lookup"><span data-stu-id="3cb13-181">NX_LINK_DISABLE</span></span>    |
| <span data-ttu-id="3cb13-182">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-182">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-183">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-183">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-184">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-184">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-185">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-185">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="3cb13-186">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-186">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-187">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-187">Completion status.</span></span> <span data-ttu-id="3cb13-188">ドライバーで IP インスタンス内の指定されたインターフェイスを無効にできない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-188">If the driver is not able to disable the specified interface in the IP instance, it will return a non-zero error status.</span></span> |

### <a name="uninitialize-link"></a><span data-ttu-id="3cb13-189">リンク初期化解除</span><span class="sxs-lookup"><span data-stu-id="3cb13-189">Uninitialize Link</span></span>   
<span data-ttu-id="3cb13-190">\***nx_ip_delete** _ サービスで IP インスタンスを削除するときに NetX Duo によってこの要求が行われます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-190">This request is made by NetX Duo during the deletion of an IP instance by the \***nx_ip_delete** _ service.</span></span> <span data-ttu-id="3cb13-191">この要求によりインターフェイスを初期化前の状態に戻し、初期化中に作成したすべてのリソースを解放します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-191">This request uninitialize the interface, and release any resources created during initialization phase.</span></span> <span data-ttu-id="3cb13-192">これは通常 _ *_Initialize Link_*\* 操作の逆操作です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-192">Typically it is a reverse operation of the _ *_Initialize Link_*\* operation.</span></span> <span data-ttu-id="3cb13-193">インターフェイスを初期化前の状態に戻すと、インターフェイスを再度初期化するまでデバイスを使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-193">After the interface is uninitalized, the device cannot be used until the interface is initialized again.</span></span>

<span data-ttu-id="3cb13-194">リンク無効化要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-194">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="3cb13-195">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-195">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="3cb13-196">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-196">Meaning</span></span>                  |
|------------------------|--------------------------|
| <span data-ttu-id="3cb13-197">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-197">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-198">NX_LINK_UNINITIALZE</span><span class="sxs-lookup"><span data-stu-id="3cb13-198">NX_LINK_UNINITIALZE</span></span>      |
| <span data-ttu-id="3cb13-199">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-199">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-200">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-200">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-201">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-201">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-202">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-202">Pointer to the interface instance</span></span> |
| <span data-ttu-id="3cb13-203">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-203">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-204">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-204">Completion status.</span></span> <span data-ttu-id="3cb13-205">ドライバーで IP インスタンスの指定されたインターフェイスを初期化前の状態に戻せない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-205">If the driver is not able to uninitialize the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="packet-send"></a><span data-ttu-id="3cb13-206">パケット送信</span><span class="sxs-lookup"><span data-stu-id="3cb13-206">Packet Send</span></span>   
<span data-ttu-id="3cb13-207">この要求は、内部的に IPv4 または IPv6 送信処理を行うときに行われます。NetX Duo のすべてのプロトコルは、この処理によってパケットを送信します (ARP と RARP を除く)。</span><span class="sxs-lookup"><span data-stu-id="3cb13-207">This request is made during internal IPv4 or IPv6 send processing, which all NetX Duo protocols use to transmit packets (except for ARP, RARP).</span></span> <span data-ttu-id="3cb13-208">パケット送信コマンドを受信すると、*nx_packet_prepend_ptr* が送信するパケットの先頭、つまり IPv4 または IPv6 ヘッダーの先頭を指定します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-208">On receiving the packet send command, the *nx_packet_prepend_ptr* points to the beginning of the packet to be sent, which is the beginning of the IPv4 or IPv6 header.</span></span> <span data-ttu-id="3cb13-209">*nx_packet_length* は送信しているデータの合計サイズ (バイト単位) を示します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-209">*nx_packet_length* indicates the total size (in bytes) of the data being transmitted.</span></span> <span data-ttu-id="3cb13-210">*nx_packet_next* が有効な場合、送信する IP データグラムは複数のパケットに分割されます。この際、ドライバーは一続きになったパケットを追跡してフレーム全体を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-210">If *nx_packet_next* is valid, the outgoing IP datagram is stored in multiple packets, the driver is required to follow the chained packet and transmit the entire frame.</span></span> <span data-ttu-id="3cb13-211">一続きになった各パケットにおいて、有効なデータ領域は *nx_packet_prepend_ptr* と *nx_packet_append_ptr* の間に格納されています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-211">Note that valid data area in each chained packet is stored between *nx_packet_prepend_ptr* and *nx_packet_append_ptr*.</span></span>

<span data-ttu-id="3cb13-212">物理ヘッダーはドライバーで作成します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-212">The driver is responsible for constructing physical header.</span></span> <span data-ttu-id="3cb13-213">物理アドレスから IP アドレスへのマッピングが必要な場合 (イーサネットなど)、MAC アドレスは IP 層で前もって解決されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-213">If physical address to IP address mapping is required (such as Ethernet), the IP layer already resolved the MAC address.</span></span> <span data-ttu-id="3cb13-214">送信先の MAC アドレスは、IP インスタンスから渡されて *nx_ip_driver_physical_address_msw と nx_ip_driver_physical_address_lsw* に保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-214">The destination MAC address is passed from the IP instance, stored in *nx_ip_driver_physical_address_msw and nx_ip_driver_physical_address_lsw*.</span></span>

<span data-ttu-id="3cb13-215">物理ヘッダーを追加すると、パケット送信処理によってドライバーの出力関数が呼び出され、パケットが送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-215">After adding the physical header, the packet send processing then calls the driver's output function to transmit the packet.</span></span>

<span data-ttu-id="3cb13-216">パケット送信要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-216">The following NX_IP_DRIVER members are used for the packet send request.</span></span>

| <span data-ttu-id="3cb13-217">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-217">NX_IP_DRIVER&nbsp;member</span></span>              | <span data-ttu-id="3cb13-218">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-218">Meaning</span></span>                               |
| -----------------------------------| --------------------------------------|
| <span data-ttu-id="3cb13-219">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-219">nx_ip_driver_command</span></span>            | <span data-ttu-id="3cb13-220">NX_LINK_PACKET_SEND</span><span class="sxs-lookup"><span data-stu-id="3cb13-220">NX_LINK_PACKET_SEND</span></span>                |
| <span data-ttu-id="3cb13-221">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-221">nx_ip_driver_ptr</span></span>                | <span data-ttu-id="3cb13-222">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-222">Pointer to IP instance</span></span>                |
| <span data-ttu-id="3cb13-223">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="3cb13-223">nx_ip_driver_packet</span></span>             | <span data-ttu-id="3cb13-224">送信するパケットを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-224">Pointer to the packet to send</span></span>         |
| <span data-ttu-id="3cb13-225">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-225">nx_ip_driver_interface</span></span>          | <span data-ttu-id="3cb13-226">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-226">Pointer to the interface instance.</span></span>    |
| <span data-ttu-id="3cb13-227">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="3cb13-227">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="3cb13-228">物理アドレスの最上位 32 ビット (物理マッピングが必要な場合のみ)</span><span class="sxs-lookup"><span data-stu-id="3cb13-228">Most significant 32-bits of physical address (only if physical mapping needed)</span></span> |
| <span data-ttu-id="3cb13-229">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-229">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="3cb13-230">物理アドレスの最下位 32 ビット (物理マッピングが必要な場合のみ)</span><span class="sxs-lookup"><span data-stu-id="3cb13-230">Least significant 32-bits of physical address (only if physical mapping needed)</span></span> |
| <span data-ttu-id="3cb13-231">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-231">nx_ip_driver_status</span></span>             | <span data-ttu-id="3cb13-232">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-232">Completion status.</span></span> <span data-ttu-id="3cb13-233">ドライバーでパケットを送信できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-233">If the driver is not able to send the packet, it will return a non-zero error status.</span></span> |

### <a name="packet-broadcastipv4-packets-only"></a><span data-ttu-id="3cb13-234">パケット ブロードキャスト (IPv4 パケットのみ)</span><span class="sxs-lookup"><span data-stu-id="3cb13-234">Packet Broadcast(IPv4 packets only)</span></span>  
<span data-ttu-id="3cb13-235">この要求はパケット送信要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-235">This request is almost identical to the send packet request.</span></span> <span data-ttu-id="3cb13-236">唯一の違いは、送信先物理アドレス フィールドがイーサネットのブロードキャスト MAC アドレスに設定されていることです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-236">The only difference is that the destination physical address fields are set to the Ethernet broadcast MAC address.</span></span> <span data-ttu-id="3cb13-237">パケット ブロードキャスト要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-237">The following NX_IP_DRIVER members are used for the packet broadcast request.</span></span>

| <span data-ttu-id="3cb13-238">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-238">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="3cb13-239">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-239">Meaning</span></span>                                                                                                  |
|------------------------------------|----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3cb13-240">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-240">nx_ip_driver_command</span></span>               | <span data-ttu-id="3cb13-241">NX_LINK_PACKET_BROADCAST</span><span class="sxs-lookup"><span data-stu-id="3cb13-241">NX_LINK_PACKET_BROADCAST</span></span>                                                                                 |
| <span data-ttu-id="3cb13-242">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-242">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="3cb13-243">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-243">Pointer to IP instance</span></span>                                                                                   |
| <span data-ttu-id="3cb13-244">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="3cb13-244">nx_ip_driver_packet</span></span>                | <span data-ttu-id="3cb13-245">送信するパケットを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-245">Pointer to the packet to send</span></span>                                                                            |
| <span data-ttu-id="3cb13-246">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="3cb13-246">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="3cb13-247">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-247">0x0000FFFF (broadcast)</span></span>                                                                                   |
| <span data-ttu-id="3cb13-248">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-248">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="3cb13-249">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-249">0xFFFFFFFF (broadcast)</span></span>                                                                                   |
| <span data-ttu-id="3cb13-250">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-250">nx_ip_driver_interface</span></span>             | <span data-ttu-id="3cb13-251">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-251">Pointer to the interface instance.</span></span>                                                                       |
| <span data-ttu-id="3cb13-252">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-252">nx_ip_driver_status</span></span>                | <span data-ttu-id="3cb13-253">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-253">Completion status.</span></span> <span data-ttu-id="3cb13-254">ドライバーでパケットを送信できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-254">If the driver is not able to send the packet, it will return a non-zero error status.</span></span> |

### <a name="arp-send"></a><span data-ttu-id="3cb13-255">ARP 送信</span><span class="sxs-lookup"><span data-stu-id="3cb13-255">ARP Send</span></span>  
<span data-ttu-id="3cb13-256">この要求も IP パケット送信要求に似ています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-256">This request is also similar to the IP packet send request.</span></span> <span data-ttu-id="3cb13-257">イーサネット ヘッダーで IP パケットではなく ARP パケットを指定することと、送信先物理アドレス フィールドが MAC ブロードキャスト アドレスに設定されることだけが異なります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-257">The only difference is that the Ethernet header specifies an ARP packet instead of an IP packet, and destination physical address fields are set to MAC broadcast address.</span></span> <span data-ttu-id="3cb13-258">ARP 送信要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-258">The following NX_IP_DRIVER members are used for the ARP send request.</span></span>

| <span data-ttu-id="3cb13-259">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-259">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="3cb13-260">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-260">Meaning</span></span>                                                                                                      |
|------------------------------------|--------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3cb13-261">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-261">nx_ip_driver_command</span></span>               | <span data-ttu-id="3cb13-262">NX_LINK_ARP_SEND</span><span class="sxs-lookup"><span data-stu-id="3cb13-262">NX_LINK_ARP_SEND</span></span>                                                                                             |
| <span data-ttu-id="3cb13-263">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-263">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="3cb13-264">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-264">Pointer to IP instance</span></span>                                                                                       |
| <span data-ttu-id="3cb13-265">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="3cb13-265">nx_ip_driver_packet</span></span>                | <span data-ttu-id="3cb13-266">送信するパケットを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-266">Pointer to the packet to send</span></span>                                                                                |
| <span data-ttu-id="3cb13-267">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="3cb13-267">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="3cb13-268">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-268">0x0000FFFF (broadcast)</span></span>                                                                                       |
| <span data-ttu-id="3cb13-269">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-269">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="3cb13-270">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-270">0xFFFFFFFF (broadcast)</span></span>                                                                                       |
| <span data-ttu-id="3cb13-271">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-271">nx_ip_driver_interface</span></span>             | <span data-ttu-id="3cb13-272">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-272">Pointer to the interface instance.</span></span>                                                                           |
| <span data-ttu-id="3cb13-273">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-273">nx_ip_driver_status</span></span>                | <span data-ttu-id="3cb13-274">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-274">Completion status.</span></span> <span data-ttu-id="3cb13-275">ドライバーで ARP パケットを送信できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-275">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-276">*物理マッピングが必要ない場合、この要求の実装は必要ありません*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-276">*If physical mapping is not needed, implementation of this request is not required*.</span></span>

<span data-ttu-id="3cb13-277">*ARP は IPv6 で近隣探索プロトコルとルーター探索プロトコルに置き換えられましたが、イーサネット ネットワーク ドライバーには現在も IPv4 のピアおよびルーターとの互換性が必要です。そのため、現在でもドライバーで ARP パケットを処理する必要があります*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-277">*Although ARP has been replaced with the Neighbor Discovery Protocol and the Router Discovery Protocol in IPv6, Ethernet network drivers must still be compatible with IPv4 peers and routers. Therefore, drivers must still handle ARP packets*.</span></span>

### <a name="arp-response-send"></a><span data-ttu-id="3cb13-278">ARP 応答送信</span><span class="sxs-lookup"><span data-stu-id="3cb13-278">ARP Response Send</span></span>  
<span data-ttu-id="3cb13-279">この要求は、ARP パケット送信要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-279">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="3cb13-280">唯一の違いは、送信先物理アドレス フィールドの値が IP インスタンスから渡されることです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-280">The only difference is the destination physical address fields are passed from the IP instance.</span></span> <span data-ttu-id="3cb13-281">ARP 応答送信要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-281">The following NX_IP_DRIVER members are used for the ARP response send request.</span></span>

| <span data-ttu-id="3cb13-282">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-282">NX_IP_DRIVER&nbsp;member</span></span>                  | <span data-ttu-id="3cb13-283">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-283">Meaning</span></span>                                  |
| -------------------------------------- | -----------------------------------------|
| <span data-ttu-id="3cb13-284">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-284">nx_ip_driver_command</span></span>                | <span data-ttu-id="3cb13-285">NX_LINK_ARP_RESPONSE_SEND</span><span class="sxs-lookup"><span data-stu-id="3cb13-285">NX_LINK_ARP_RESPONSE_SEND</span></span>            |
| <span data-ttu-id="3cb13-286">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-286">nx_ip_driver_ptr</span></span>                    | <span data-ttu-id="3cb13-287">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-287">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-288">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="3cb13-288">nx_ip_driver_packet</span></span>                 | <span data-ttu-id="3cb13-289">送信するパケットを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-289">Pointer to the packet to send</span></span>          |
| <span data-ttu-id="3cb13-290">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="3cb13-290">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="3cb13-291">物理アドレスの最上位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-291">Most significant 32-bits of physical address</span></span> |
| <span data-ttu-id="3cb13-292">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-292">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="3cb13-293">物理アドレスの最下位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-293">Least significant 32-bits of physical address</span></span> |
| <span data-ttu-id="3cb13-294">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-294">nx_ip_driver_interface</span></span>              | <span data-ttu-id="3cb13-295">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-295">Pointer to the interface instance</span></span> |
| <span data-ttu-id="3cb13-296">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-296">nx_ip_driver_status</span></span>                 | <span data-ttu-id="3cb13-297">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-297">Completion status.</span></span> <span data-ttu-id="3cb13-298">ドライバーで ARP パケットを送信できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-298">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-299">*物理マッピングが必要ない場合、この要求の実装は必要ありません*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-299">*If physical mapping is not needed, implementation of this request is not required*.</span></span>

### <a name="rarp-send"></a><span data-ttu-id="3cb13-300">RARP 送信</span><span class="sxs-lookup"><span data-stu-id="3cb13-300">RARP Send</span></span>   
<span data-ttu-id="3cb13-301">この要求は、ARP パケット送信要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-301">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="3cb13-302">唯一異なるのは、物理的な送信先が常にブロードキャスト アドレスであるため、パケット ヘッダーの種類と物理アドレスのフィールドが必要ないことです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-302">The only differences are the type of packet header and the physical address fields are not required because the physical destination is always a broadcast address.</span></span>

<span data-ttu-id="3cb13-303">RARP 送信要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-303">The following NX_IP_DRIVER members are used for the RARP send request.</span></span>

| <span data-ttu-id="3cb13-304">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-304">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="3cb13-305">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-305">Meaning</span></span>                                                                                                       |
|------------------------------------|---------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3cb13-306">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-306">nx_ip_driver_command</span></span>               | <span data-ttu-id="3cb13-307">NX_LINK_RARP_SEND</span><span class="sxs-lookup"><span data-stu-id="3cb13-307">NX_LINK_RARP_SEND</span></span>                                                                                             |
| <span data-ttu-id="3cb13-308">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-308">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="3cb13-309">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-309">Pointer to IP instance</span></span>                                                                                        |
| <span data-ttu-id="3cb13-310">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="3cb13-310">nx_ip_driver_packet</span></span>                | <span data-ttu-id="3cb13-311">送信するパケットを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-311">Pointer to the packet to send</span></span>                                                                                 |
| <span data-ttu-id="3cb13-312">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="3cb13-312">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="3cb13-313">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-313">0x0000FFFF (broadcast)</span></span>                                                                                        |
| <span data-ttu-id="3cb13-314">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-314">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="3cb13-315">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="3cb13-315">0xFFFFFFFF (broadcast)</span></span>                                                                                        |
| <span data-ttu-id="3cb13-316">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-316">nx_ip_driver_interface</span></span>             | <span data-ttu-id="3cb13-317">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-317">Pointer to the interface instance.</span></span>                                                                            |
| <span data-ttu-id="3cb13-318">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-318">nx_ip_driver_status</span></span>                | <span data-ttu-id="3cb13-319">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-319">Completion status.</span></span> <span data-ttu-id="3cb13-320">ドライバーで RARP パケットを送信できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-320">If the driver is not able to send the RARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-321">*RARP サービスが必要なアプリケーションではこのコマンドを実装する必要があります*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-321">*Applications that require RARP service must implement this command*.</span></span>

### <a name="multicast-group-join"></a><span data-ttu-id="3cb13-322">マルチキャスト グループ追加</span><span class="sxs-lookup"><span data-stu-id="3cb13-322">Multicast Group Join</span></span>   
<span data-ttu-id="3cb13-323">この要求は、IPv4 では ***nx_igmp_multicast_interface join** _ および _*_nx_ipv4_multicast_interface_join_*_ サービス、IPv6 では _ *_nxd_ipv6_multicast_interface_join_** サービス、サービスおよび IPv6 で必要なさまざまな操作を使用して実行されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-323">This request is made with the ***nx_igmp_multicast_interface join** _ and _*_nx_ipv4_multicast_interface_join_*_ service in IPv4, _ *_nxd_ipv6_multicast_interface_join_** service in IPv6, and various operation required by IPv6.</span></span> <span data-ttu-id="3cb13-324">ネットワーク ドライバーは指定されたマルチキャスト グループ アドレスを使用し、物理メディアをセットアップして、マルチキャスト グループ アドレスから送信されるパケットを受信します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-324">The network driver takes the supplied multicast group address and sets up the physical media to accept incoming packets from that multicast group address.</span></span> <span data-ttu-id="3cb13-325">ドライバーがマルチキャスト フィルターをサポートしていない場合、ドライバーの受信ロジックを無作為検出モードに設定しなければならない場合があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3cb13-325">Note that for drivers that don't support multicast filter, the driver receive logic may have to be in promiscuous mode.</span></span> <span data-ttu-id="3cb13-326">この場合ドライバーでは、送信先 MAC アドレスに基づいて受信するフレームをフィルター処理しなければならず、IP インスタンスへのトラフィックが減少する場合があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-326">In this case, the driver may need to filter incoming frames based on destination MAC address, thus reducing the amount of traffic passed into the IP instance.</span></span> <span data-ttu-id="3cb13-327">マルチキャスト グループ参加要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-327">The following NX_IP_DRIVER members are used for the multicast group join request.</span></span>

| <span data-ttu-id="3cb13-328">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-328">NX_IP_DRIVER&nbsp;member</span></span>                  | <span data-ttu-id="3cb13-329">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-329">Meaning</span></span>                                 |
| -------------------------------------- | --------------------------------------- |
| <span data-ttu-id="3cb13-330">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-330">nx_ip_driver_command</span></span>                | <span data-ttu-id="3cb13-331">NX_LINK_MULTICAST_JOIN</span><span class="sxs-lookup"><span data-stu-id="3cb13-331">NX_LINK_MULTICAST_JOIN</span></span>               |
| <span data-ttu-id="3cb13-332">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-332">nx_ip_driver_ptr</span></span>                    | <span data-ttu-id="3cb13-333">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-333">Pointer to IP instance</span></span>  |
| <span data-ttu-id="3cb13-334">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="3cb13-334">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="3cb13-335">物理マルチキャスト アドレスの最上位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-335">Most significant 32-bits of physical multicast address</span></span> |
| <span data-ttu-id="3cb13-336">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-336">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="3cb13-337">物理マルチキャスト アドレスの最下位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-337">Least significant 32-bits of physical multicast address</span></span> |
| <span data-ttu-id="3cb13-338">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-338">nx_ip_driver_interface</span></span>              | <span data-ttu-id="3cb13-339">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-339">Pointer to the interface instance</span></span> |
| <span data-ttu-id="3cb13-340">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-340">nx_ip_driver_status</span></span>                 | <span data-ttu-id="3cb13-341">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-341">Completion status.</span></span> <span data-ttu-id="3cb13-342">ドライバーをマルチキャスト グループに追加できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-342">If the driver is not able to join the multicast group, it will return a non-zero error status.</span></span> |

> [!NOTE]  
> <span data-ttu-id="3cb13-343">*アドレス構成などのために、IPv6 のアプリケーションでは、ICMPv6 ベースのプロトコル用のドライバーでマルチキャストを実装する必要があります。IPv4 のアプリケーションでは、マルチキャスト機能が必要ないのであれば、この要求を実装する必要はありません。*</span><span class="sxs-lookup"><span data-stu-id="3cb13-343">*IPv6 applications will require multicast to be implemented in the driver for ICMPv6 based protocols such as address configuration. However, for IPv4 applications, implementation of this request is not necessary if multicast capabilities are not required*.</span></span>

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-344">*IPv6 が有効でなく、IPv4 でマルチキャスト機能が必要ない場合、この要求を実装する必要はありません*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-344">*If IPv6 is not enabled, and multicast capabilities are not required by IPv4, implementation of this request is not required*.</span></span>

### <a name="multicast-group-leave"></a><span data-ttu-id="3cb13-345">マルチキャスト グループ離脱</span><span class="sxs-lookup"><span data-stu-id="3cb13-345">Multicast Group Leave</span></span>  
<span data-ttu-id="3cb13-346">この要求を実行するには、***nx_igmp_multicast_interface_leave** _ サービス、IPv4 用の _*_nx_ipv4_multicast_interface_leave_*_ サービス、または IPv6 用の _ *_nxd_ipv6_multicast_interface_leave_** サービスを明示的に呼び出す方法と、IPv6 に必要なさまざまな NetX Duo 内部操作を使用する方法があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-346">This request is invoked by explicitly calling the ***nx_igmp_multicast_interface_leave** _ or _*_nx_ipv4_multicast_interface_leave_*_ services in IPv4, _ *_nxd_ipv6_multicast_interface_leave_** service in IPv6, or by various internal NetX Duo operations required for IPv6.</span></span> <span data-ttu-id="3cb13-347">ドライバーにより、指定されたイーサネット マルチキャスト アドレスがマルチキャスト リストから削除されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-347">The driver removes the supplied Ethernet multicast address from the multicast list.</span></span> <span data-ttu-id="3cb13-348">ホストがマルチキャスト グループを離脱すると、このイーサネット マルチキャスト アドレスを持つネットワーク上のパケットは、この IP インスタンスに受信されなくなります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-348">After a host has left a multicast group, packets on the network with this Ethernet multicast address are no longer received by this IP instance.</span></span> <span data-ttu-id="3cb13-349">マルチキャスト グループ離脱要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-349">The following NX_IP_DRIVER members are used for the multicast group leave request.</span></span>

| <span data-ttu-id="3cb13-350">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-350">NX_IP_DRIVER&nbsp;member</span></span>              | <span data-ttu-id="3cb13-351">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-351">Meaning</span></span>                              |
| -----------------------------------| -------------------------------------|
| <span data-ttu-id="3cb13-352">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-352">nx_ip_driver_command</span></span>            | <span data-ttu-id="3cb13-353">NX_LINK_MULTICAST_LEAVE</span><span class="sxs-lookup"><span data-stu-id="3cb13-353">NX_LINK_MULTICAST_LEAVE</span></span>           |
| <span data-ttu-id="3cb13-354">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-354">nx_ip_driver_ptr</span></span>                | <span data-ttu-id="3cb13-355">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-355">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-356">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="3cb13-356">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="3cb13-357">物理マルチキャスト アドレスの最上位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-357">Most significant 32 bits of physical multicast address</span></span> |
| <span data-ttu-id="3cb13-358">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-358">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="3cb13-359">物理マルチキャスト アドレスの最下位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-359">Least significant 32 bits of physical multicast address</span></span> |
| <span data-ttu-id="3cb13-360">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-360">nx_ip_driver_interface</span></span>              | <span data-ttu-id="3cb13-361">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-361">Pointer to the interface instance</span></span> |
| <span data-ttu-id="3cb13-362">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-362">nx_ip_driver_status</span></span>                 | <span data-ttu-id="3cb13-363">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-363">Completion status.</span></span> <span data-ttu-id="3cb13-364">ドライバーをマルチキャスト グループから外せない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-364">If the driver is not able to leave the multicast group, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-365">*IPv4 でも IPv6 でも、マルチキャスト機能が必要ない場合この要求を実装する必要はありません*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-365">*If multicast capabilities are not required by either IPv4 or IPv6, implementation of this request is not required*.</span></span>

### <a name="attach-interface"></a><span data-ttu-id="3cb13-366">インターフェイス アタッチ</span><span class="sxs-lookup"><span data-stu-id="3cb13-366">Attach Interface</span></span>  
<span data-ttu-id="3cb13-367">この要求は NetX Duo からデバイス ドライバーに対して行われます。この要求によりドライバーは、ドライバー インスタンスを、対応する IP インスタンスおよびその IP 内の物理インターフェイス インスタンスに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-367">This request is invoked from the NetX Duo to the device driver, allowing the driver to associate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="3cb13-368">インターフェイス アタッチ要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-368">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="3cb13-369">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-369">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="3cb13-370">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-370">Meaning</span></span>                  |
|------------------------|--------------------------|
| <span data-ttu-id="3cb13-371">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-371">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-372">NX_LINK_INTERFACE_ATTACH</span><span class="sxs-lookup"><span data-stu-id="3cb13-372">NX_LINK_INTERFACE_ATTACH</span></span> |
| <span data-ttu-id="3cb13-373">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-373">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-374">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-374">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-375">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-375">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-376">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-376">Pointer to the interface instance.</span></span>|
| <span data-ttu-id="3cb13-377">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-377">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-378">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-378">Completion status.</span></span> <span data-ttu-id="3cb13-379">ドライバーで IP インスタンスの指定されたインターフェイスをデタッチできない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-379">If the driver is not able to detach the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="detach-interface"></a><span data-ttu-id="3cb13-380">インターフェイス デタッチ</span><span class="sxs-lookup"><span data-stu-id="3cb13-380">Detach Interface</span></span>    
<span data-ttu-id="3cb13-381">この要求は NetX Duo からデバイス ドライバーに対して行われます。この要求によりドライバーは、ドライバー インスタンスと、対応する IP インスタンスおよびその IP 内の物理インターフェイス インスタンスとの関連付けを解除できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-381">This request is invoked by NetX Duo to the device driver, allowing the driver to disassociate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="3cb13-382">インターフェイス アタッチ要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-382">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="3cb13-383">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-383">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="3cb13-384">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-384">Meaning</span></span>                                                                                                                                    |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3cb13-385">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-385">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-386">NX_LINK_INTERFACE_DETACH</span><span class="sxs-lookup"><span data-stu-id="3cb13-386">NX_LINK_INTERFACE_DETACH</span></span>                                                                                                                   |
| <span data-ttu-id="3cb13-387">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-387">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-388">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-388">Pointer to IP instance</span></span>                                                                                                                     |
| <span data-ttu-id="3cb13-389">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-389">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-390">インターフェイス インスタンスを指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-390">Pointer to the interface instance.</span></span>                                                                                                         |
| <span data-ttu-id="3cb13-391">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-391">nx_ip_driver_status</span></span>    | <span data-ttu-id="3cb13-392">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-392">Completion status.</span></span> <span data-ttu-id="3cb13-393">ドライバーで指定されたインターフェイスを IP インスタンスにアタッチできない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-393">If the driver is not able to attach the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="get-link-status"></a><span data-ttu-id="3cb13-394">リンクの状態取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-394">Get Link Status</span></span>    
<span data-ttu-id="3cb13-395">アプリケーションは NetX Duo の ***nx_ip_interface_status_check*** サービスを使用して、ホスト上のあらゆるインターフェイスのリンクの状態を問い合わせることができます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-395">The application can query the network interface link status using the NetX Duo service ***nx_ip_interface_status_check*** service for any interface on the host.</span></span> <span data-ttu-id="3cb13-396">これらのサービスの詳細は、第 4 章、149 ページ「NetX Duo サービスの説明」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="3cb13-396">See Chapter 4, "Description of NetX Duo Services" on page 149, for more details on these services.</span></span>

<span data-ttu-id="3cb13-397">リンクの状態は、*nx_ip_driver_interface* ポインターが指し示す、NX_INTERFACE 構造体の *nx_interface_link_up* フィールドに保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-397">The link status is contained in the *nx_interface_link_up* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* pointer.</span></span> <span data-ttu-id="3cb13-398">リンクの状態要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-398">The following NX_IP_DRIVER members are used for the link status request.</span></span>

| <span data-ttu-id="3cb13-399">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-399">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="3cb13-400">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-400">Meaning</span></span>                  |
| --------------------------- | -------------------------|
| <span data-ttu-id="3cb13-401">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-401">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-402">NX_LINK_GET_STATUS</span><span class="sxs-lookup"><span data-stu-id="3cb13-402">NX_LINK_GET_STATUS</span></span>    |
| <span data-ttu-id="3cb13-403">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-403">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-404">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-404">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-405">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-405">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-406">状態の保存場所を指すポインター。</span><span class="sxs-lookup"><span data-stu-id="3cb13-406">Pointer to the destination to place the status.</span></span> |
| <span data-ttu-id="3cb13-407">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-407">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-408">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-408">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="3cb13-409">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-409">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-410">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-410">Completion status.</span></span> <span data-ttu-id="3cb13-411">ドライバーで特定の状態を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-411">If the driver is not able to get specific status, it will return a non-zero error status.</span></span> |

> [!NOTE]  
> <span data-ttu-id="3cb13-412">\***nx_ip_status_check** _ は現在でもプライマリ インターフェイスの状態の確認に使用できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-412">\***nx_ip_status_check** _ is still available for checking the status of the primary interface.</span></span> <span data-ttu-id="3cb13-413">ですが、アプリケーション開発者は、インターフェイスごとに確認ができる _ *_nx_ip_interface_status_check_*\* サービスを使用することを推奨します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-413">However, application developers are encouraged to use the interface specific service: _ *_nx_ip_interface_status_check._*\*</span></span>

### <a name="get-link-speed"></a><span data-ttu-id="3cb13-414">リンク速度取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-414">Get Link Speed</span></span>  
<span data-ttu-id="3cb13-415">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-415">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-416">ドライバーによってリンクの回線速度が指定された場所に保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-416">The driver stores the link's line speed in the supplied destination.</span></span> <span data-ttu-id="3cb13-417">リンク回線速度要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-417">The following NX_IP_DRIVER members are used for the link line speed request.</span></span>

| <span data-ttu-id="3cb13-418">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-418">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="3cb13-419">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-419">Meaning</span></span>                   |
| ------------------------| ------------------------- |
| <span data-ttu-id="3cb13-420">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-420">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-421">NX_LINK_GET_SPEED</span><span class="sxs-lookup"><span data-stu-id="3cb13-421">NX_LINK_GET_SPEED</span></span>          |
| <span data-ttu-id="3cb13-422">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-422">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-423">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-423">Pointer to IP instance</span></span>                                                                                         |
| <span data-ttu-id="3cb13-424">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-424">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-425">回線速度の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-425">Pointer to the destination to place the line speed</span></span>                                                             |
| <span data-ttu-id="3cb13-426">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-426">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-427">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-427">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="3cb13-428">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-428">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-429">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-429">Completion status.</span></span> <span data-ttu-id="3cb13-430">ドライバーで速度情報を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-430">If the driver is not able to get speed information, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-431">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-431">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-duplex-type"></a><span data-ttu-id="3cb13-432">双方向通信の種類取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-432">Get Duplex Type</span></span>   
<span data-ttu-id="3cb13-433">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-433">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-434">ドライバーによって、指定された場所にリンクの双方向通信の種類が保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-434">The driver stores the link's duplex type in the supplied destination.</span></span> <span data-ttu-id="3cb13-435">双方向通信の種類要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-435">The following NX_IP_DRIVER members are used for the duplex type request.</span></span>

| <span data-ttu-id="3cb13-436">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-436">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="3cb13-437">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-437">Meaning</span></span>                                                                                                    |
| --------------------------- | -------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="3cb13-438">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-438">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-439">NX_LINK_GET_DUPLEX_TYPE</span><span class="sxs-lookup"><span data-stu-id="3cb13-439">NX_LINK_GET_DUPLEX_TYPE</span></span>                                                                                    |
| <span data-ttu-id="3cb13-440">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-440">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-441">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-441">Pointer to IP instance</span></span>                                                                                         |
| <span data-ttu-id="3cb13-442">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-442">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-443">双方向通信の種類の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-443">Pointer to the destination to place the duplex type</span></span>                                                            |
| <span data-ttu-id="3cb13-444">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-444">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-445">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-445">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="3cb13-446">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-446">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-447">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-447">Completion status.</span></span> <span data-ttu-id="3cb13-448">ドライバーで双方向通信の情報を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-448">If the driver is not able to get duplex information, it will return a nonzero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-449">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-449">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-error-count"></a><span data-ttu-id="3cb13-450">エラー数取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-450">Get Error Count</span></span>   
<span data-ttu-id="3cb13-451">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-451">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-452">ドライバーによって、指定された場所にリンクのエラー数が保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-452">The driver stores the link's error count in the supplied destination.</span></span> <span data-ttu-id="3cb13-453">この機能をサポートするには、ドライバーで操作のエラーを追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-453">To support this feature, the driver needs to track operation errors.</span></span> <span data-ttu-id="3cb13-454">リンクのエラー数要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-454">The following NX_IP_DRIVER members are used for the link error count request.</span></span>

| <span data-ttu-id="3cb13-455">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-455">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="3cb13-456">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-456">Meaning</span></span>                   |
| --------------------------- | -------------------------------|
| <span data-ttu-id="3cb13-457">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-457">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-458">NX_LINK_GET_ERROR_COUNT</span><span class="sxs-lookup"><span data-stu-id="3cb13-458">NX_LINK_GET_ERROR_COUNT</span></span>   |
| <span data-ttu-id="3cb13-459">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-459">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-460">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-460">Pointer to IP instance</span></span>   |
| <span data-ttu-id="3cb13-461">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-461">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-462">エラー数の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-462">Pointer to the destination to place the error count</span></span> |
| <span data-ttu-id="3cb13-463">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-463">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-464">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-464">Pointer to the interface instance</span></span>|
| <span data-ttu-id="3cb13-465">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-465">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-466">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-466">Completion status.</span></span> <span data-ttu-id="3cb13-467">ドライバーでエラー数を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-467">If the driver is not able to get error count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="3cb13-468">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-468">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-receive-packet-count"></a><span data-ttu-id="3cb13-469">受信パケット数取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-469">Get Receive Packet Count</span></span>    
<span data-ttu-id="3cb13-470">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-470">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-471">ドライバーによって、指定された場所にリンクの受信パケット数が保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-471">The driver stores the link's receive packet count in the supplied destination.</span></span> <span data-ttu-id="3cb13-472">この機能をサポートするには、ドライバーで受信パケット数を追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-472">To support this feature, the driver needs to keep track of the number of packets received.</span></span> <span data-ttu-id="3cb13-473">リンクの受信パケット数要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-473">The following NX_IP_DRIVER members are used for the link receive packet count request.</span></span>

| <span data-ttu-id="3cb13-474">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-474">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="3cb13-475">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-475">Meaning</span></span>                        |
| --------------------------- | -------------------------------|
| <span data-ttu-id="3cb13-476">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-476">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-477">NX_LINK_GET_RX_COUNT</span><span class="sxs-lookup"><span data-stu-id="3cb13-477">NX_LINK_GET_RX_COUNT</span></span>      |
| <span data-ttu-id="3cb13-478">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-478">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-479">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-479">Pointer to IP instance</span></span>  |
| <span data-ttu-id="3cb13-480">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-480">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-481">受信パケット数の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-481">Pointer to the destination to place the receive packet count</span></span>   |
| <span data-ttu-id="3cb13-482">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-482">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-483">物理ネットワーク インターフェイスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-483">Pointer to the physical network interface</span></span>  |
| <span data-ttu-id="3cb13-484">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-484">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-485">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-485">Completion status.</span></span> <span data-ttu-id="3cb13-486">ドライバーで受信数を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-486">If the driver is not able to get receive count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-487">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-487">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-transmit-packet-count"></a><span data-ttu-id="3cb13-488">送信パケット数取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-488">Get Transmit Packet Count</span></span>   
<span data-ttu-id="3cb13-489">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-489">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-490">ドライバーによって、指定された場所にリンクの送信パケット数が保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-490">The driver stores the link's transmit packet count in the supplied destination.</span></span> <span data-ttu-id="3cb13-491">この機能をサポートするには、各インターフェイスで送信する各パケットをドライバーで追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-491">To support this feature, the driver needs to keep track of each packet it transmits on each interface.</span></span> <span data-ttu-id="3cb13-492">リンクの送信パケット数要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-492">The following  NX_IP_DRIVER members are used for the link transmit packet count request.</span></span>

| <span data-ttu-id="3cb13-493">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-493">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="3cb13-494">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-494">Meaning</span></span>                   |
| ----------------------- | ------------------------- |
| <span data-ttu-id="3cb13-495">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-495">nx_ip_driver_command</span></span> | <span data-ttu-id="3cb13-496">NX_LINK_GET_TX_COUNT</span><span class="sxs-lookup"><span data-stu-id="3cb13-496">NX_LINK_GET_TX_COUNT</span></span>  |
| <span data-ttu-id="3cb13-497">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-497">nx_ip_driver_ptr</span></span>     | <span data-ttu-id="3cb13-498">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-498">Pointer to IP instance</span></span>    |
| <span data-ttu-id="3cb13-499">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-499">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-500">送信パケット数の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-500">Pointer to the destination to place the transmit packet count</span></span>  |
| <span data-ttu-id="3cb13-501">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-501">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-502">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-502">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="3cb13-503">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-503">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-504">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-504">Completion status.</span></span> <span data-ttu-id="3cb13-505">ドライバーで送信数を取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-505">If the driver is not able to get transmit count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-506">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-506">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-allocation-errors"></a><span data-ttu-id="3cb13-507">割り当てエラー取得</span><span class="sxs-lookup"><span data-stu-id="3cb13-507">Get Allocation Errors</span></span>   
<span data-ttu-id="3cb13-508">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-508">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-509">ドライバーによって、指定された場所にリンクのパケット プール割り当てエラー数が保存されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-509">The driver stores the link's packet pool allocation error count in the supplied destination.</span></span> <span data-ttu-id="3cb13-510">リンクの割り当てエラー数要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-510">The following NX_IP_DRIVER members are used for the link allocation error count request.</span></span>

| <span data-ttu-id="3cb13-511">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-511">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="3cb13-512">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-512">Meaning</span></span>                       |
| --------------------------- | ----------------------------- |
| <span data-ttu-id="3cb13-513">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-513">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-514">NX_LINK_GET_ALLOC_ERRORS</span><span class="sxs-lookup"><span data-stu-id="3cb13-514">NX_LINK_GET_ALLOC_ERRORS</span></span>  |
| <span data-ttu-id="3cb13-515">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-515">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-516">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-516">Pointer to IP instance</span></span>     |
| <span data-ttu-id="3cb13-517">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-517">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-518">割り当てエラー数の保存先を指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-518">Pointer to the destination to place the allocation error count</span></span>  |
| <span data-ttu-id="3cb13-519">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-519">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-520">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-520">Pointer to the interface instance</span></span>  |
| <span data-ttu-id="3cb13-521">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-521">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-522">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-522">Completion status.</span></span> <span data-ttu-id="3cb13-523">ドライバーで割り当てエラーを取得できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-523">If the driver is not able to get allocation errors, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="3cb13-524">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-524">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="driver-deferred-processing"></a><span data-ttu-id="3cb13-525">ドライバー遅延処理</span><span class="sxs-lookup"><span data-stu-id="3cb13-525">Driver Deferred Processing</span></span>    
<span data-ttu-id="3cb13-526">この要求は、送信または受信 ISR による _\***nx_ip_driver_deferred_processing**_ ルーチンのドライバー呼び出しに対する応答として、IP ヘルパー スレッドから送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-526">This request is made from the IP helper thread in response to the driver calling the _\***nx_ip_driver_deferred_processing**_ routine from a transmit or receive ISR.</span></span> <span data-ttu-id="3cb13-527">これにより、ドライバー ISR で IP ヘルパー スレッドに対するパケットの受信および送信処理を遅延させ、この ISR での処理量を減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-527">This allows the driver ISR to defer the packet receive and transmit processing to the IP helper thread and thus reduce the amount to process in the ISR.</span></span> <span data-ttu-id="3cb13-528">*nx_ip_driver_interface* が指し示す NX_INTERFACE 構造体の _nx_interface_additional_link_info\* フィールドは、IP ヘルパー スレッド コンテキストの遅延処理イベントに関する情報を保存するために、ドライバーで使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-528">The _nx_interface_additional_link_info\* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* may be used by the driver to store information about the deferred processing event from the IP helper thread context.</span></span> <span data-ttu-id="3cb13-529">遅延処理イベントには、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-529">The following  NX_IP_DRIVER members are used for the deferred processing event.</span></span>

| <span data-ttu-id="3cb13-530">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-530">NX_IP_DRIVER&nbsp;member</span></span>     | <span data-ttu-id="3cb13-531">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-531">Meaning</span></span>                           |
| ------------------------- | --------------------------------- |
| <span data-ttu-id="3cb13-532">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-532">nx_ip_driver_command</span></span>   | <span data-ttu-id="3cb13-533">NX_LINK_DEFERRED_PROCESSING</span><span class="sxs-lookup"><span data-stu-id="3cb13-533">NX_LINK_DEFERRED_PROCESSING</span></span>    |
| <span data-ttu-id="3cb13-534">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-534">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="3cb13-535">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-535">Pointer to IP instance</span></span>            |
| <span data-ttu-id="3cb13-536">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-536">nx_ip_driver_interface</span></span> | <span data-ttu-id="3cb13-537">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-537">Pointer to the interface instance</span></span> |

### <a name="set-physical-address"></a><span data-ttu-id="3cb13-538">物理アドレス設定</span><span class="sxs-lookup"><span data-stu-id="3cb13-538">Set Physical Address</span></span>  
<span data-ttu-id="3cb13-539">この要求は \***nx_ip_interface_physical_address_set** _ サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-539">This request is made from within the \***nx_ip_interface_physical_address_set** _ service.</span></span> <span data-ttu-id="3cb13-540">このサービスにより、アプリケーションの実行中にインターフェイスの物理アドレスを変更できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-540">This service allows an application to change the interface physical address at run time.</span></span> <span data-ttu-id="3cb13-541">このコマンドを受け取ったドライバーは、ネットワーク インターフェイスのハードウェア アドレスを指定された物理アドレスに再構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-541">On receiving this command, the driver is required to re-configure the hardware address of the network interface to the supplied physical address.</span></span> <span data-ttu-id="3cb13-542">IP インスタンスには既に新しいアドレスが存在するため、このコマンドで _ *_nx_ip_interface_address_set_*\* サービスを呼び出す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="3cb13-542">Since the IP instance already has the new address, there is no need to call the _ *_nx_ip_interface_address_set_*\* service from this command.</span></span>

<span data-ttu-id="3cb13-543">このユーザー コマンド要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-543">The following NX_IP_DRIVER members are used for the user command request.</span></span>

| <span data-ttu-id="3cb13-544">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-544">NX_IP_DRIVER&nbsp;member</span></span>      | <span data-ttu-id="3cb13-545">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-545">Meaning</span></span>                      |
| -------------------------- | ---------------------------- |
| <span data-ttu-id="3cb13-546">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-546">nx_ip_driver_command</span></span>    | <span data-ttu-id="3cb13-547">NX_LINK_SET_PHYSICAL_ADDRESS</span><span class="sxs-lookup"><span data-stu-id="3cb13-547">NX_LINK_SET_PHYSICAL_ADDRESS</span></span>  |
| <span data-ttu-id="3cb13-548">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-548">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="3cb13-549">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-549">Pointer to IP instance</span></span>  |
| <span data-ttu-id="3cb13-550">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-550">nx_ip_driver_interface</span></span>  | <span data-ttu-id="3cb13-551">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-551">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="3cb13-552">nx_ip_driver_physical_ad dress_msw</span><span class="sxs-lookup"><span data-stu-id="3cb13-552">nx_ip_driver_physical_ad dress_msw</span></span> | <span data-ttu-id="3cb13-553">新しい物理アドレスの最上位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-553">Most significant 32-bits of the new physical address</span></span>  |
| <span data-ttu-id="3cb13-554">nx_ip_driver_physical_ad dress_lsw</span><span class="sxs-lookup"><span data-stu-id="3cb13-554">nx_ip_driver_physical_ad dress_lsw</span></span> | <span data-ttu-id="3cb13-555">新しい物理アドレスの最下位 32 ビット</span><span class="sxs-lookup"><span data-stu-id="3cb13-555">Least significant 32-bits of the new physical address</span></span>  |
| <span data-ttu-id="3cb13-556">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-556">nx_ip_driver_status</span></span>                  | <span data-ttu-id="3cb13-557">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-557">Completion status.</span></span> <span data-ttu-id="3cb13-558">ドライバーで物理アドレスを再構成できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-558">If the driver is not able to reconfigure the physical address, it will return a non-zero error status.</span></span> |

### <a name="user-commands"></a><span data-ttu-id="3cb13-559">ユーザー コマンド</span><span class="sxs-lookup"><span data-stu-id="3cb13-559">User Commands</span></span>    
<span data-ttu-id="3cb13-560">この要求は ***nx_ip_driver_direct_command*** サービスの内部から送信されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-560">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="3cb13-561">ドライバーではアプリケーションごとにユーザー コマンドが処理されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-561">The driver processes the application specific user commands.</span></span> <span data-ttu-id="3cb13-562">このユーザー コマンド要求には、次の NX_IP_DRIVER メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-562">The following NX_IP_DRIVER members are used for the user command request.</span></span>

| <span data-ttu-id="3cb13-563">NX_IP_DRIVER&nbsp; メンバー</span><span class="sxs-lookup"><span data-stu-id="3cb13-563">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="3cb13-564">意味</span><span class="sxs-lookup"><span data-stu-id="3cb13-564">Meaning</span></span>                       |
| --------------------------- | ----------------------------- |
| <span data-ttu-id="3cb13-565">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="3cb13-565">nx_ip_driver_command</span></span>     | <span data-ttu-id="3cb13-566">NX_LINK_USER_COMMAND</span><span class="sxs-lookup"><span data-stu-id="3cb13-566">NX_LINK_USER_COMMAND</span></span>       |
| <span data-ttu-id="3cb13-567">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-567">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="3cb13-568">IP インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-568">Pointer to IP instance</span></span>        |
| <span data-ttu-id="3cb13-569">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="3cb13-569">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="3cb13-570">ユーザー定義</span><span class="sxs-lookup"><span data-stu-id="3cb13-570">User defined</span></span>       |
| <span data-ttu-id="3cb13-571">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="3cb13-571">nx_ip_driver_interface</span></span>   | <span data-ttu-id="3cb13-572">インターフェイス インスタンスを指すポインター</span><span class="sxs-lookup"><span data-stu-id="3cb13-572">Pointer to the interface instance</span></span>    |
| <span data-ttu-id="3cb13-573">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="3cb13-573">nx_ip_driver_status</span></span>      | <span data-ttu-id="3cb13-574">完了ステータス。</span><span class="sxs-lookup"><span data-stu-id="3cb13-574">Completion status.</span></span> <span data-ttu-id="3cb13-575">ドライバーでユーザー コマンドを実行できない場合、0 以外のエラー ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-575">If the driver is not able to execute user commands, it will return a non-zero error status.</span></span> |

> [!IMPORTANT] 
> <span data-ttu-id="3cb13-576">*この要求は NetX Duo 内では使用しないため実装は任意です*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-576">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="unimplemented-commands"></a><span data-ttu-id="3cb13-577">実装されていないコマンド</span><span class="sxs-lookup"><span data-stu-id="3cb13-577">Unimplemented Commands</span></span>  
<span data-ttu-id="3cb13-578">ネットワーク ドライバーで実装していないコマンドは、戻りステータス フィールドを NX_UNHANDLED_COMMAND に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-578">Commands unimplemented by the network driver must have the return status field set to NX_UNHANDLED_COMMAND.</span></span>

## <a name="driver-capability"></a><span data-ttu-id="3cb13-579">ドライバーの機能</span><span class="sxs-lookup"><span data-stu-id="3cb13-579">Driver Capability</span></span>

<span data-ttu-id="3cb13-580">一部のネットワーク インターフェイスはチェックサム オフロード機能を備えています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-580">Some network interfaces offer checksum offload features.</span></span> <span data-ttu-id="3cb13-581">デバイス ドライバーは、ハードウェア アクセラレータを利用して、さまざまなチェックサムの計算にかかる CPU 時間をなくします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-581">Device drivers may take advantage of the hardware accelerations to free up CPU time from running various checksum computations.</span></span>

<span data-ttu-id="3cb13-582">ハードウェアでサポートされるハードウェア チェックサムの程度に応じて、ハードウェアのどの機能が有効であるかを、デバイス ドライバーから IP インスタンスに通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-582">Depending the level of hardware checksum support from the hardware, the device driver needs to inform the IP instance which hardware feature is enabled.</span></span> <span data-ttu-id="3cb13-583">これにより、IP インスタンスはハードウェア機能を認識し、できる限り多くの計算をハードウェアに任せます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-583">This way, the IP instance is aware of the hardware feature, and offload as much computation to the hardware as possible.</span></span> <span data-ttu-id="3cb13-584">ドライバーでは ***nx_ip_interface_capability_set*** API を使用して、物理インターフェイスで処理できるすべての機能を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-584">The driver should use the API ***nx_ip_interface_capability_set*** to set all the features the physical interface is able to handle.</span></span>

<span data-ttu-id="3cb13-585">次の機能を使用できます:</span><span class="sxs-lookup"><span data-stu-id="3cb13-585">The following features can be used:</span></span>

- <span data-ttu-id="3cb13-586">NX_INTERFACE_CAPABILITY_IPV4_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-586">NX_INTERFACE_CAPABILITY_IPV4_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-587">NX_INTERFACE_CAPABILITY_IPV4_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-587">NX_INTERFACE_CAPABILITY_IPV4_RX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-588">NX_INTERFACE_CAPABILITY_TCP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-588">NX_INTERFACE_CAPABILITY_TCP_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-589">NX_INTERFACE_CAPABILITY_TCP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-589">NX_INTERFACE_CAPABILITY_TCP_RX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-590">NX_INTERFACE_CAPABILITY_UDP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-590">NX_INTERFACE_CAPABILITY_UDP_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-591">NX_INTERFACE_CAPABILITY_UDP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-591">NX_INTERFACE_CAPABILITY_UDP_RX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-592">NX_INTERFACE_CAPABILITY_ICMPV4_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-592">NX_INTERFACE_CAPABILITY_ICMPV4_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-593">NX_INTERFACE_CAPABILITY_ICMPV4_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-593">NX_INTERFACE_CAPABILITY_ICMPV4_RX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-594">NX_INTERFACE_CAPABILITY_ICMPV6_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-594">NX_INTERFACE_CAPABILITY_ICMPV6_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-595">NX_INTERFACE_CAPABILITY_ICMPV6_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-595">NX_INTERFACE_CAPABILITY_ICMPV6_RX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-596">NX_INTERFACE_CAPABILITY_IGMP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-596">NX_INTERFACE_CAPABILITY_IGMP_TX_CHECKSUM</span></span>
- <span data-ttu-id="3cb13-597">NX_INTERFACE_CAPABILITY_IGMP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="3cb13-597">NX_INTERFACE_CAPABILITY_IGMP_RX_CHECKSUM</span></span>

<span data-ttu-id="3cb13-598">ハードウェアで実行できるチェックサム計算については、ドライバーでハードウェア記述子またはバッファー記述子を正しく設定し、ハードウェアで送信パケットのチェックサムを生成してヘッダーに埋め込めるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-598">For a checksum computation that can be performed in hardware, the driver must set up the hardware or the buffer descriptors correctly so the checksum for an out-going packet can be generated and inserted into the header by the hardware.</span></span> <span data-ttu-id="3cb13-599">パケットを受信したときに、ハードウェアのチェックサム ロジックでチェックサム値を検証できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-599">On receiving a packet, the hardware checksum logic should be able to verify the checksum value.</span></span> <span data-ttu-id="3cb13-600">チェックサムの値が間違っている場合は受信したフレームを破棄します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-600">If the checksum value is incorrect, the received frame should be discarded.</span></span>

<span data-ttu-id="3cb13-601">ハードウェアでチェックサムを計算する機能がある場合も、IP インスタンスのチェックサム機能は維持されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-601">Even with the capability of performing checksum computation in hardware, the IP instance still maintains the checksum capability.</span></span> <span data-ttu-id="3cb13-602">たとえば IPsec で保護された UDP データグラムを送信する場合など、特定の状況では、UDP チェックサムをソフトウェアで計算してから UDP フレームをスタック下部へ送る必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-602">In certain scenarios, for example a UDP datagram going through IPsec protection, the UDP checksum must be computed in software before passing the UDP frame down the stack.</span></span> <span data-ttu-id="3cb13-603">ほとんどのハードウェア チェックサム機能では、IPsec で保護されたデータセグメントのチェックサム計算をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="3cb13-603">Most hardware checksum feature does not support checksum computation for a segment of data protected by IPsec.</span></span> <span data-ttu-id="3cb13-604">UDP または ICMP フレームのフラグメント化が必要な場合、UDP または ICMP チェックサムをソフトウェアで計算する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-604">For a UDP or ICMP frame that needs to be fragmented, the UDP or ICMP checksum needs to be computed in software.</span></span> <span data-ttu-id="3cb13-605">ほとんどのハードウェア チェックサム ロジックは、データを複数のフレームに分割する処理に対応できません。</span><span class="sxs-lookup"><span data-stu-id="3cb13-605">Most hardware checksum logic does not handle the case where the data is split into multiple frames.</span></span>

## <a name="driver-output"></a><span data-ttu-id="3cb13-606">ドライバー出力</span><span class="sxs-lookup"><span data-stu-id="3cb13-606">Driver Output</span></span>  

<span data-ttu-id="3cb13-607">前述のすべてのパケット送信要求では、ドライバーで出力関数を実装している必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-607">All previously mentioned packet transmit requests require an output function implemented in the driver.</span></span> <span data-ttu-id="3cb13-608">特定のハードウェアに対応している特定の送信ロジックもありますが、ロジックの内容は通常、ハードウェアが直ちにパケットを送信できるかどうかの確認です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-608">Specific transmit logic is hardware specific, but it usually consists of checking for hardware capacity to send the packet immediately.</span></span> <span data-ttu-id="3cb13-609">できる場合、パケットのペイロード (および一続きになったパケット中に存在する追加ペイロード) が 1 つまたは複数のハードウェア送信バッファーに読み込まれ、送信操作が開始されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-609">If possible, the packet payload (and additional payloads in the packet  chain) are loaded into one or more of the hardware transmit buffers and a transmit operation is initiated.</span></span> <span data-ttu-id="3cb13-610">使用可能な送信バッファーにパケットをコピーできない場合、そのパケットをキューに入れて、バッファーが使用できる状態になったときに送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-610">If the packet won't fit in the available transmit buffers, the packet should be queued, and be transmitted when the transmission buffers become available.</span></span>

<span data-ttu-id="3cb13-611">送信キューには、先頭と末尾にポインターがある単方向リストを推奨します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-611">The recommended transmit queue is a singly linked list, having both head and tail pointers.</span></span> <span data-ttu-id="3cb13-612">新しいパケットをキューの末尾に追加し、最も古いパケットを先頭に維持します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-612">New packets are added to the end of the queue, keeping the oldest packet at the front.</span></span> <span data-ttu-id="3cb13-613">*nx_packet_queue_next* フィールドは、キューにあるパケットの次のリンクとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-613">The *nx_packet_queue_next* field is used as the packet's next link in the queue.</span></span> <span data-ttu-id="3cb13-614">送信キューの先頭および末尾のポインターをドライバーで指定します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-614">The driver defines the head and tail pointers of the transmit queue.</span></span>

> [!CAUTION]  
> <span data-ttu-id="3cb13-615">*このキューはドライバーのスレッドと割り込み部分からアクセスを受けるため、キューの操作を割り込みから保護する必要があります*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-615">*Because this queue is accessed from thread and interrupt portions of the driver, interrupt protection must be placed around the queue manipulations*.</span></span>

<span data-ttu-id="3cb13-616">ほとんどの物理ハードウェアの実装では、パケットの送信が完了したときに割り込みが発生します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-616">Most physical hardware implementations generate an interrupt upon packet transmit completion.</span></span> <span data-ttu-id="3cb13-617">ドライバーはこのような割り込みを受けると、通常、送信中のパケットに関連付けられたリソースを解放します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-617">When the driver receives such an interrupt, it typically releases the resources associated with the packet just being transmitted.</span></span> <span data-ttu-id="3cb13-618">NX_PACKET バッファーから直接データを読み取る送信ロジックでは、ドライバーで ***nx_packet_transmit_release*** サービスを使用し、送信完了割り込みに関連付けられたパケットを解放して、使用可能なパケットのプールに戻す必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-618">In case the transmit logic reads data directly from the NX_PACKET buffer, the driver should use the ***nx_packet_transmit_release*** service to release the packet associated with the transmit complete interrupt back to the available packet pool.</span></span> <span data-ttu-id="3cb13-619">次にドライバーは、送信キューにある送信待ちの追加パケットを調べます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-619">Next, the driver examines the transmit queue for additional packets waiting to be sent.</span></span> <span data-ttu-id="3cb13-620">キューに入っている送信パケットのうちハードウェア送信バッファーにコピーできるものの多くは、デキューされてバッファーに読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-620">As many of the queued transmit packets that fit into the hardware transmit buffer(s) are de-queued and loaded into the buffers.</span></span> <span data-ttu-id="3cb13-621">それから再度送信操作が開始されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-621">This is followed by initiation of another send operation.</span></span>

<span data-ttu-id="3cb13-622">NX_PACKET のデータを送信 FIFO に移すとすぐに (ドライバーでゼロ コピー操作がサポートされている場合は、NX_PACKET のデータが送信されるとすぐに)、ドライバーによって *nx_packet_prepend_ptr* が IP ヘッダーの先頭に配置し、それから ***nx_packet_transmit_release** を呼び出す必要があります。それに合わせて _nx_packet_length* フィールドを調整することを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="3cb13-622">As soon as the data in the NX_PACKET has been moved into the transmitter FIFO (or in case a driver supports zero-copy operation, the data in NX_PACKET has been transmitted), the driver must move the *nx_packet_prepend_ptr* to the beginning of the IP header before calling ***nx_packet_transmit_release.** _ Remember to adjust _nx_packet_length* field accordingly.</span></span> <span data-ttu-id="3cb13-623">IP フレームが複数のパケットで構成される場合、開放する必要があるのは先頭のパケットだけです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-623">If an IP frame is made up of multiple packets, only the head of the packet chain needs to be released.</span></span>

## <a name="driver-input"></a><span data-ttu-id="3cb13-624">ドライバー入力</span><span class="sxs-lookup"><span data-stu-id="3cb13-624">Driver Input</span></span>

<span data-ttu-id="3cb13-625">受信パケット割り込みを受けると、ネットワーク ドライバーは物理ハードウェアの受信バッファーからパケットを取得し、有効な NetX Duo パケットを構築します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-625">Upon reception of a received packet interrupt, the network driver retrieves the packet from the physical hardware receive buffers and builds a valid NetX Duo packet.</span></span> <span data-ttu-id="3cb13-626">受信パケットのサイズがパケットのペイロード 1 つ分よりも大きい場合、有効な NetX Duo パケットを構築するには、長さフィールドを適切に設定して複数のパケットを連結する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-626">Building a valid NetX Duo packet involves setting up the appropriate length field and chaining together multiple packets if the incoming packet's size is greater than a single packet payload.</span></span> <span data-ttu-id="3cb13-627">正しく構築すると *prepend_ptr* が物理層ヘッダーの後ろに置かれ、受信パケットが NetX Duo に配置されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-627">Once properly built, the *prepend_ptr* is moved after the physical layer header and the receive packet is dispatched to NetX Duo.</span></span>

<span data-ttu-id="3cb13-628">NetX Duo では、IP (IPv4 および IPv6) ヘッダーと ARP ヘッダーが **ULONG** 型の境界にアラインしてあることを前提にしています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-628">NetX Duo assumes that the IP (IPv4 and IPv6) and ARP headers are aligned on a **ULONG** boundary.</span></span> <span data-ttu-id="3cb13-629">そのため、NetX Duo のドライバーは、アライメントがこの方法で行われるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-629">The NetX Duo driver must, therefore, ensure this alignment.</span></span> <span data-ttu-id="3cb13-630">イーサネット環境では、そのために、パケットの先頭から 2 バイトの位置からイーサネット ヘッダーを開始します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-630">In Ethernet environments this is done by starting the Ethernet header two bytes from the beginning of the packet.</span></span> <span data-ttu-id="3cb13-631">*nx_packet_prepend_ptr* がイーサネット ヘッダーの先に移されると、下層の IP ヘッダー (IPv4 と IPv6) または ARP ヘッダーが 4 バイトでアラインされます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-631">When the *nx_packet_prepend_ptr* is moved beyond the Ethernet header, the underlying IP (IPv4 and IPv6) or ARP header is 4-byte aligned.</span></span>

> [!WARNING] 
> <span data-ttu-id="3cb13-632">*IPv6 と IPv6 イーサネット ヘッダーの重要な違いは、下の「イーサネット ヘッダー」セクションをご覧ください*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-632">*See the section "Ethernet Headers" below for important differences between IPv6 and IPv6 Ethernet headers*.</span></span>

<span data-ttu-id="3cb13-633">NetX Duo ではいくつかの受信パケット関数を使用できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-633">There are several receive packet functions available in NetX Duo.</span></span> <span data-ttu-id="3cb13-634">受信するパケットが ARP パケットである場合は _\***nx_arp_packet_deferred_receive**_ が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-634">If the received packet is an ARP packet, _\***nx_arp_packet_deferred_receive**_ is called.</span></span> <span data-ttu-id="3cb13-635">受信するパケットが RARP パケットの場合は _ _*_nx_rarp_packet_deferred_receive_*_ が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-635">If the received packet is an RARP packet, _ _*_nx_rarp_packet_deferred_receive_*_ is called.</span></span> <span data-ttu-id="3cb13-636">受信 IP パケットを処理する方法はいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-636">There are several options for handling incoming IP packets.</span></span> <span data-ttu-id="3cb13-637">IP パケットを最も速く処理するには _ _*_nx_ip_packet_receive_*_ を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-637">For the fastest handling of IP packets, _ _*_nx_ip_packet_receive_*_ is called.</span></span> <span data-ttu-id="3cb13-638">この方法はオーバーヘッドが最も少ないですが、ドライバーの受信割り込みハンドラー (ISR) で行う処理が増えます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-638">This approach has the least overhead, but requires more processing in the driver's receive interrupt service handler (ISR).</span></span> <span data-ttu-id="3cb13-639">__ *_nx_ip_packet_deferred_receive_*\* を呼び出す方法は ISR 処理量が最も小さいです。</span><span class="sxs-lookup"><span data-stu-id="3cb13-639">For minimal ISR processing __ *_nx_ip_packet_deferred_receive_*\* is called.</span></span>

<span data-ttu-id="3cb13-640">新しい受信パケットを正しく構築した後、物理ハードウェアで受信バッファーを用意し、受信できるデータを増やします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-640">After the new receive packet is properly built, the physical hardware's receive buffers are setup to receive more data.</span></span> <span data-ttu-id="3cb13-641">そのためには、ハードウェアの受信バッファーに NetX Duo パケットを割り振ってペイロードのアドレスを指定するか、または単純にハードウェアの受信バッファーの設定を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-641">This might require allocating NetX Duo packets and placing the payload address in the hardware receive buffer or it may simply amount to changing a setting in the hardware receive buffer.</span></span> <span data-ttu-id="3cb13-642">オーバーランの可能性を最小限に抑えるには、パケットを受信した後で、ハードウェアの受信バッファーとして使用できるバッファーをできる限り速く確保することが重要です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-642">To minimize overrun possibilities, it is important that the hardware's receive buffers have available buffers as soon as possible after a packet is received.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="3cb13-643">*初期受信バッファーはドライバーの初期化中に用意されます*。</span><span class="sxs-lookup"><span data-stu-id="3cb13-643">*The initial receive buffers are setup during driver initialization*.</span></span>

### <a name="deferred-receive-packet-handling"></a><span data-ttu-id="3cb13-644">遅延受信パケット処理</span><span class="sxs-lookup"><span data-stu-id="3cb13-644">Deferred Receive Packet Handling</span></span>  
<span data-ttu-id="3cb13-645">ドライバーは、NetX Duo の IP ヘルパー スレッドの受信パケット処理を遅延させる場合があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-645">The driver may defer receive packet processing to the NetX Duo IP helper thread.</span></span> <span data-ttu-id="3cb13-646">アプリケーションによっては、ISR 処理と破棄されるパケットをできる限り減らすために、これを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-646">For some applications this may be necessary to minimize ISR processing as well as dropped packets.</span></span> 

<span data-ttu-id="3cb13-647">遅延パケット処理を行うには、\***NX_DRIVER_DEFERRED_PROCESSING** _ を定義した上で、最初に NetX Duo ライブラリをコンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-647">To use deferred packet handling, the NetX Duo library must first be compiled with \***NX_DRIVER_DEFERRED_PROCESSING** _ defined.</span></span> <span data-ttu-id="3cb13-648">これで、遅延パケット ロジックを NetX Duo IP ヘルパー スレッドに追加できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-648">This adds the deferred packet logic to the NetX Duo IP helper thread.</span></span> <span data-ttu-id="3cb13-649">次に、データ パケットの受信時に、ドライバーで __nx_ip_packet_deferred_receive() を呼び出す必要があります:\*</span><span class="sxs-lookup"><span data-stu-id="3cb13-649">Next, on receiving a data packet, the driver must call __nx_ip_packet_deferred_receive():\*</span></span>

```c
_nx_ip_packet_deferred_receive(ip_ptr, packet_ptr);
```
<span data-ttu-id="3cb13-650">遅延受信関数は、*packet_ptr* が表す受信パケットを FIFO (リンク リスト) に入れて、IP ヘルパー スレッドに通知します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-650">The deferred receive function places the receive packet represented by *packet_ptr* on a FIFO (linked list) and notifies the IP helper thread.</span></span> <span data-ttu-id="3cb13-651">実行後、IP ヘルパーは遅延処理関数を繰り返し呼び出して、各遅延パケットを処理します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-651">After executing, the IP helper repetitively calls the deferred handling function to process each deferred packet.</span></span> <span data-ttu-id="3cb13-652">遅延ハンドラーの処理では通常、パケットの物理層ヘッダー (通常はイーサネット) を削除し、次の NetX Duo の受信関数のどれかにこのパケットを渡します:</span><span class="sxs-lookup"><span data-stu-id="3cb13-652">The deferred handler processing typically includes removing the packet's physical layer header (usually Ethernet) and dispatching it to one of these NetX Duo receive functions:</span></span>

- <span data-ttu-id="3cb13-653">***_nx_ip_packet_receive***</span><span class="sxs-lookup"><span data-stu-id="3cb13-653">***_nx_ip_packet_receive***</span></span>
- <span data-ttu-id="3cb13-654">***_nx_arp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="3cb13-654">***_nx_arp_packet_deferred_receive***</span></span>
- <span data-ttu-id="3cb13-655">***_nx_rarp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="3cb13-655">***_nx_rarp_packet_deferred_receive***</span></span>

## <a name="ethernet-headers"></a><span data-ttu-id="3cb13-656">イーサネット ヘッダー</span><span class="sxs-lookup"><span data-stu-id="3cb13-656">Ethernet Headers</span></span> 

<span data-ttu-id="3cb13-657">イーサネット ヘッダーに関する IPv6 と IPv4 の特に重要な違いの 1 つは、フレームの種類の設定です。</span><span class="sxs-lookup"><span data-stu-id="3cb13-657">One of the most significant differences between IPv6 and IPv4 for Ethernet Headers is the frame type setting.</span></span> <span data-ttu-id="3cb13-658">パケットを送信するときは、イーサネット ドライバーにより、送信パケットにイーサネット フレームの種類を設定します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-658">When sending out packets, the Ethernet driver is responsible for setting the Ethernet frame type in outgoing packets.</span></span> <span data-ttu-id="3cb13-659">IPv6 パケットではフレームの種類を 0x86DD に、IPv4 パケットでは 0x0800 にします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-659">For IPv6 packets, the frame type should be 0x86DD; for IPv4 packets, the frame type should be 0x0800.</span></span>

<span data-ttu-id="3cb13-660">次に示すコードの抜粋で、この処理を例示します:</span><span class="sxs-lookup"><span data-stu-id="3cb13-660">The following code segment illustrates this process:</span></span>

```c
NX_PACKET *packet_ptr;
packet_ptr = driver_req_ptr -> nx_ip_driver_packet;
if (packet_ptr -> nx_packet_ip_version == NX_IP_VERSION_V4)
{

   /* Set Ethernet frame type to IPv4 /*
   ethernet_frame_ptr -> frame_type = 0x0800;

   /* Swap endian-ness for little endian targets.*/
   NX_CHANGE_USHORT_ENDIAN(ethernet_frame_ptr -> frame_type);
}
else if (packet_ptr -> nx_packet_ip_version == NX_IP_VERSION_V6)
{

   /* Set Ethernet frame type to IPv6. /*
   ethernet_frame_ptr -> frame_type = 0x86DD;

   /* Swap endian-ness for little endian targets.*/
   NX_CHANGE_USHORT_ENDIAN(ethernet_frame_ptr -> frame_type);
}
else
{

   /* Unknown IP version. Free the packet we will not send. */
   nx_packet_transmit_release(packet_ptr);
}
```
<span data-ttu-id="3cb13-661">同様に、受信パケットでは、イーサネット ドライバーにより、イーサネット フレームの種類からパケットの種類を判断します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-661">Similarly, for incoming packets, the Ethernet driver should determine the packet type from the Ethernet frame type.</span></span> <span data-ttu-id="3cb13-662">フレームの種類として IPv6 (0x86DD)、IPv4 (0x0800)、ARP (0x0806)、RARP (0x8035) を受け入れるように実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-662">It should be implemented to accept IPv6 (0x86DD), IPv4 (0x0800), ARP (0x0806), and RARP (0x8035) frame types.</span></span>

## <a name="example-ram-ethernet-network-driver"></a><span data-ttu-id="3cb13-663">RAM イーサネット ネットワーク ドライバーの例</span><span class="sxs-lookup"><span data-stu-id="3cb13-663">Example RAM Ethernet Network Driver</span></span>

<span data-ttu-id="3cb13-664">NetX Duo のデモ システムは、RAM ベースの簡単なネットワーク ドライバーと合わせて配布しています。このドライバーは ***nx_ram_network_driver.c*** に定義されています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-664">The NetX Duo demonstration system is delivered with a small RAM-based network driver, defined in the file ***nx_ram_network_driver.c.***</span></span> <span data-ttu-id="3cb13-665">このドライバーでは、IP インスタンスがすべて同じネットワーク上にあり、仮想ハードウェア アドレス (MAC アドレス) が作成時に単純に各デバイス インスタンスに割り当てられることを前提にしています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-665">This driver assumes the IP instances are all on the same network and simply assigns virtual hardware addresses (MAC addresses) to each device instance as they are created.</span></span> <span data-ttu-id="3cb13-666">このファイルは、NetX Duo の物理ネットワーク ドライバーの基本構造の分かりやすい例になっています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-666">This file provides a good example of the basic structure of NetX Duo physical network drivers.</span></span> <span data-ttu-id="3cb13-667">ユーザーは、この例に示されているドライバー フレームワークを使用して、独自のネットワーク ドライバーを開発できます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-667">Users may develop their own network drivers using the driver framework presented in this example.</span></span>

<span data-ttu-id="3cb13-668">ネットワーク ドライバーのエントリ関数は \* **_nx_ram_network_driver()** であり、IP インスタンス作成呼び出しに渡されます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-668">The entry function of the network driver is \***_nx_ram_network_driver(),** _ which is passed to the IP instance create call.</span></span> <span data-ttu-id="3cb13-669">追加のネットワーク インターフェイスのエントリ関数は _nx_ip_interface_attach()\* サービスに渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="3cb13-669">Entry functions for additional network interfaces can be passed into the _nx_ip_interface_attach()\* service.</span></span> <span data-ttu-id="3cb13-670">IP インスタンスが立ち上がった後、ドライバー エントリ関数を実行し、デバイスを初期化、有効化します (**NX_LINK_INITIALIZE** と **NX_LINK_ENABLE** の事例を参考にしてください)。</span><span class="sxs-lookup"><span data-stu-id="3cb13-670">After the IP instance starts to run, the driver entry function is invoked to initialize and enable the device (refer to the case **NX_LINK_INITIALIZE** and **NX_LINK_ENABLE**).</span></span> <span data-ttu-id="3cb13-671">**NX_LINK_ENABLE** コマンドを発行した後、デバイスはパケットを送受信できる状態である必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-671">After the **NX_LINK_ENABLE** command is issued, the device should be ready to transmit and receive packets.</span></span> 

<span data-ttu-id="3cb13-672">IP インスタンスは、次のいずれかのコマンドを使用してネットワーク パケットを送信します:</span><span class="sxs-lookup"><span data-stu-id="3cb13-672">The IP instance transmits network packets via one of these commands:</span></span>

|                                 |                                                                |
| ------------------------------- | -------------------------------------------------------------- |
| <span data-ttu-id="3cb13-673">***NX_LINK_PACKET_SEND***</span><span class="sxs-lookup"><span data-stu-id="3cb13-673">***NX_LINK_PACKET_SEND***</span></span>    | <span data-ttu-id="3cb13-674">IPv4 または IPv6 パケットを送信しています、</span><span class="sxs-lookup"><span data-stu-id="3cb13-674">An IPv4 or IPv6 packet is being transmitted,</span></span>                   |
| <span data-ttu-id="3cb13-675">***NX_LINK_ARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="3cb13-675">***NX_LINK_ARP_SEND***</span></span>       | <span data-ttu-id="3cb13-676">ARP 要求または ARP 応答パケットを送信しています、</span><span class="sxs-lookup"><span data-stu-id="3cb13-676">An ARP request or ARP response packet is being transmitted,</span></span>    |
| <span data-ttu-id="3cb13-677">***NX_LINK_ARP_RARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="3cb13-677">***NX_LINK_ARP_RARP_SEND***</span></span> | <span data-ttu-id="3cb13-678">逆 ARP 要求または応答パケットを送信しています、</span><span class="sxs-lookup"><span data-stu-id="3cb13-678">A Reverse ARP request or response packet is being transmitted,</span></span> |

<span data-ttu-id="3cb13-679">ネットワーク ドライバーは、これらのコマンドを処理したら、パケットの先頭に適切なイーサネット フレーム ヘッダーを付加し、送信を行うために、そのパケットを下層のハードウェアに送る必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-679">On processing these commands, the network driver needs to prepend the appropriate Ethernet frame header, and then send it to the underlying hardware for transmission.</span></span> <span data-ttu-id="3cb13-680">送信処理中、ネットワーク ドライバーはパケット バッファー領域を専有します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-680">During the transmission process, the network driver has the exclusive ownership of the packet buffer area.</span></span> <span data-ttu-id="3cb13-681">そのため、データを送信したら (またはデータをドライバー内部の転送バッファーにコピーしたら)、ネットワーク ドライバーによってパケット バッファーを開放します。その際、先頭に付加したパケット バッファーをイーサネット ヘッダーの先にある IP ヘッダーに移動してから (パケットの長さもそれに合わせて調整します)、***nx_packet_transmit_release()*** サービスを呼び出してパケットを解放します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-681">Therefore once the data is being transmitted (or once the data has been copied into the driver internal transfer buffer), the network driver is responsible for releasing the packet buffer by first moving the prepend pointer past the Ethernet header to the IP header (and adjust packet length accordingly), and then by calling the ***nx_packet_transmit_release()*** service to release the packet.</span></span> <span data-ttu-id="3cb13-682">データ送信後にパケットを解放しないとパケットがリークします。</span><span class="sxs-lookup"><span data-stu-id="3cb13-682">Not releasing the packet after data transmission will cause packets to leak.</span></span>

<span data-ttu-id="3cb13-683">ネットワーク デバイス ドライバーでは受信データ パケットの処理も行います。</span><span class="sxs-lookup"><span data-stu-id="3cb13-683">The network device driver is also responsible for handling incoming data packets.</span></span> <span data-ttu-id="3cb13-684">RAM ドライバーの例では ***_nx_ram_network_driver_receive()*** 関数で受信パケットを処理します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-684">In the RAM driver example, the received packet is processed by the function ***_nx_ram_network_driver_receive()***.</span></span> <span data-ttu-id="3cb13-685">デバイスにイーサネット フレームを受信したときは、このドライバーによって NX_PACKET 構造体にそのデータを保存します。</span><span class="sxs-lookup"><span data-stu-id="3cb13-685">Once the device receives an Ethernet frame, the driver is responsible for storing the data in  NX_PACKET structure.</span></span> <span data-ttu-id="3cb13-686">NetX Duo では、4 バイトでアラインされた位置から IP ヘッダーが始まることを前提にしています。</span><span class="sxs-lookup"><span data-stu-id="3cb13-686">Note that NetX Duo assumes the IP header starts from 4-byte aligned address.</span></span> <span data-ttu-id="3cb13-687">イーサネット ヘッダーの長さは 14 バイトなので、ドライバーは、2 バイトでアラインされた位置に先頭が来るようにイーサネット ヘッダーを配置し、4 バイトでアラインされた位置から IP ヘッダーが始まることを保証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3cb13-687">Since the length of Ethernet header is 14byte, the driver needs to store the starting of the Ethernet header at 2-byte aligned address to guarantee that the IP header starts at 4-byte aligned address.</span></span>