---
title: 第 3 章 - Azure RTOS FileX の機能コンポーネント
description: この章では、高パフォーマンスの Azure RTOS FileX 組み込みファイル システムについて、機能の観点から説明します
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: a94344a7079e3f0e3e451bc678c369fee543aef6
ms.sourcegitcommit: 60ad844b58639d88830f2660ab0c4ff86b92c10f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/07/2021
ms.locfileid: "106550169"
---
# <a name="chapter-3---functional-components-of-azure-rtos-filex"></a><span data-ttu-id="82c13-103">第 3 章 - Azure RTOS FileX の機能コンポーネント</span><span class="sxs-lookup"><span data-stu-id="82c13-103">Chapter 3 - Functional components of Azure RTOS FileX</span></span>

<span data-ttu-id="82c13-104">この章では、高パフォーマンスの Azure RTOS FileX 組み込みファイル システムについて、機能の観点から説明します。</span><span class="sxs-lookup"><span data-stu-id="82c13-104">This chapter contains a description of the high-performance Azure RTOS FileX embedded file system from a functional perspective.</span></span>

## <a name="media-description"></a><span data-ttu-id="82c13-105">メディアの説明</span><span class="sxs-lookup"><span data-stu-id="82c13-105">Media Description</span></span>

<span data-ttu-id="82c13-106">FileX は、FAT ファイル システム形式に準拠した高パフォーマンスの組み込みファイル システムです。</span><span class="sxs-lookup"><span data-stu-id="82c13-106">FileX is a high-performance embedded file system that conforms to the FAT file system format.</span></span> <span data-ttu-id="82c13-107">FileX では、物理メディアが論理セクターの配列と見なされます。</span><span class="sxs-lookup"><span data-stu-id="82c13-107">FileX views the physical media as an array of logical sectors.</span></span> <span data-ttu-id="82c13-108">これらのセクターを基になる物理メディアにマップする方法は、***fx_media_open*** の呼び出し中に FileX メディアに接続されている I/O ドライバーによって決まります。</span><span class="sxs-lookup"><span data-stu-id="82c13-108">How these sectors are mapped to the underlying physical media is determined by the I/O driver connected to the FileX media during the ***fx_media_open*** call.</span></span>

### <a name="fat121632-logical-sectors"></a><span data-ttu-id="82c13-109">FAT12、16、32 の論理セクター</span><span class="sxs-lookup"><span data-stu-id="82c13-109">FAT12/16/32 Logical Sectors</span></span>

<span data-ttu-id="82c13-110">メディアの論理セクターの正確な構成は、物理メディアのブート レコードの内容によって決まります。</span><span class="sxs-lookup"><span data-stu-id="82c13-110">The exact organization of the media's logical sectors is determined by the contents of the physical media's boot record.</span></span> <span data-ttu-id="82c13-111">図 1 に、メディアの論理セクターの一般的なレイアウトを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-111">The general layout of the media's logical sectors is shown in Figure 1.</span></span>

<span data-ttu-id="82c13-112">FileX の論理セクターは、メディアの最初の予約済みセクターを指す論理セクター 1 から始まります。</span><span class="sxs-lookup"><span data-stu-id="82c13-112">FileX logical sectors start at logical sector 1, which points to the first reserved sector of the media.</span></span> <span data-ttu-id="82c13-113">予約済みセクターはオプションですが、使用時には、通常、ブート コードなどのシステム情報が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-113">Reserved sectors are optional, but when in use they typically contain system information such as boot code.</span></span>

### <a name="fat121632-media-boot-record"></a><span data-ttu-id="82c13-114">FAT12、16、32 のメディア ブート レコード</span><span class="sxs-lookup"><span data-stu-id="82c13-114">FAT12/16/32 Media Boot Record</span></span>

<span data-ttu-id="82c13-115">メディアの論理セクター ビュー内の他の領域の正確なセクター オフセットは、"*メディア ブート レコード*" の内容から派生しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-115">The exact sector offset of the other areas in the logical sector view of the media is derived from the contents of the *media boot record*.</span></span> <span data-ttu-id="82c13-116">ブート レコードの場所は、通常、セクター 0 です。</span><span class="sxs-lookup"><span data-stu-id="82c13-116">The location of the boot record is typically at sector 0.</span></span> <span data-ttu-id="82c13-117">ただし、メディアに "*非表示セクター*" がある場合は、ブート セクターへのオフセットがそれらを占める必要があります (これらはブート セクターの直前にあります)。</span><span class="sxs-lookup"><span data-stu-id="82c13-117">However, if the media has *hidden sectors*, the offset to the boot sector must account for them (they are located immediately BEFORE the boot sector).</span></span> <span data-ttu-id="82c13-118">表 1 では、メディアのブート レコードのコンポーネントの一覧を示し、そのコンポーネントについては短い文章で説明します。</span><span class="sxs-lookup"><span data-stu-id="82c13-118">Table 1 lists the media's boot record components, and the components are described in the paragraphs.</span></span>

- <span data-ttu-id="82c13-119">**ジャンプ命令**: "*ジャンプ命令*" フィールドは、プロセッサのジャンプ用の Intel x86 マシン命令を表す 3 バイトのフィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-119">**Jump Instruction** The *jump instruction* field is a three-byte field that represents an Intel x86 machine instruction for a processor jump.</span></span> <span data-ttu-id="82c13-120">これは、ほとんどの場合にレガシ フィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-120">This is a legacy field in most situations.</span></span>

  ![FileX Media の論理セクター ビュー](./media/user-guide/filex-media-logical-sector-view.png)

  <span data-ttu-id="82c13-122">**図 1. FileX Media の論理セクター ビュー**</span><span class="sxs-lookup"><span data-stu-id="82c13-122">**FIGURE 1. FileX Media Logical Sector View**</span></span>

- <span data-ttu-id="82c13-123">**OEM 名**: "*OEM 名*" フィールドは、製造元が自社の名前またはデバイスの名前を配置するために予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-123">**OEM Name** The *OEM name* field is reserved for manufacturers to place their name or a name for the device.</span></span>
- <span data-ttu-id="82c13-124">**1 セクターあたりのバイト数**: メディア ブート レコードの "*1 セクターあたりのバイト数*" フィールドは、各セクターのバイト数 (メディアの基本要素) を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-124">**Bytes Per Sector** The *bytes per sector* field in the media boot record defines how many bytes are in each sector—the fundamental element of the media.</span></span>
- <span data-ttu-id="82c13-125">**1 クラスターあたりのセクター数**: メディア ブート レコードの "*1 クラスターあたりのセクター数*" フィールドは、クラスターに割り当てられるセクターの数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-125">**Sectors Per Cluster** The *sectors per cluster* field in the media boot record defines the number of sectors assigned to a cluster.</span></span> <span data-ttu-id="82c13-126">このクラスターは、FAT 互換ファイル システムの基本的な割り当て要素です。</span><span class="sxs-lookup"><span data-stu-id="82c13-126">The cluster is the fundamental allocation element in an FAT compatible file system.</span></span> <span data-ttu-id="82c13-127">すべてのファイル情報とサブディレクトリは、ファイル アロケーション テーブル (FAT) によって決定される、メディアの利用可能なクラスターから割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="82c13-127">All file information and subdirectories are allocated from the media's available clusters as determined by the File Allocation Table (FAT).</span></span>

    <span data-ttu-id="82c13-128">**表 1. FileX のメディア ブート レコード**</span><span class="sxs-lookup"><span data-stu-id="82c13-128">**TABLE 1. FileX Media Boot Record**</span></span>
    
    |<span data-ttu-id="82c13-129">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-129">Offset</span></span>  |<span data-ttu-id="82c13-130">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-130">Field</span></span>  |<span data-ttu-id="82c13-131">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-131">Number of Bytes</span></span>|
    |----------|-----------|------------|
    |<span data-ttu-id="82c13-132">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-132">0x00</span></span>|<span data-ttu-id="82c13-133">ジャンプ命令 (e9,xx,xx または eb,xx,90)</span><span class="sxs-lookup"><span data-stu-id="82c13-133">Jump Instruction (e9,xx,xx or eb,xx,90)</span></span>|<span data-ttu-id="82c13-134">3</span><span class="sxs-lookup"><span data-stu-id="82c13-134">3</span></span>|
    |<span data-ttu-id="82c13-135">0x03</span><span class="sxs-lookup"><span data-stu-id="82c13-135">0x03</span></span>|<span data-ttu-id="82c13-136">OEM 名</span><span class="sxs-lookup"><span data-stu-id="82c13-136">OEM Name</span></span>|<span data-ttu-id="82c13-137">8</span><span class="sxs-lookup"><span data-stu-id="82c13-137">8</span></span>|
    |<span data-ttu-id="82c13-138">0x0B</span><span class="sxs-lookup"><span data-stu-id="82c13-138">0x0B</span></span>|<span data-ttu-id="82c13-139">1 セクターあたりのバイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-139">Bytes Per Sector</span></span>|<span data-ttu-id="82c13-140">2</span><span class="sxs-lookup"><span data-stu-id="82c13-140">2</span></span>|
    |<span data-ttu-id="82c13-141">0x0D</span><span class="sxs-lookup"><span data-stu-id="82c13-141">0x0D</span></span>|<span data-ttu-id="82c13-142">1 クラスターあたりのセクター数</span><span class="sxs-lookup"><span data-stu-id="82c13-142">Sectors Per Cluster</span></span>|<span data-ttu-id="82c13-143">1</span><span class="sxs-lookup"><span data-stu-id="82c13-143">1</span></span>|
    |<span data-ttu-id="82c13-144">0x0E</span><span class="sxs-lookup"><span data-stu-id="82c13-144">0x0E</span></span>|<span data-ttu-id="82c13-145">予約済みセクターの数</span><span class="sxs-lookup"><span data-stu-id="82c13-145">Number of Reserved Sectors</span></span>|<span data-ttu-id="82c13-146">2</span><span class="sxs-lookup"><span data-stu-id="82c13-146">2</span></span>|
    |<span data-ttu-id="82c13-147">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-147">0x10</span></span>|<span data-ttu-id="82c13-148">FAT の数</span><span class="sxs-lookup"><span data-stu-id="82c13-148">Number of FATs</span></span>|<span data-ttu-id="82c13-149">1</span><span class="sxs-lookup"><span data-stu-id="82c13-149">1</span></span>|
    |<span data-ttu-id="82c13-150">0x11</span><span class="sxs-lookup"><span data-stu-id="82c13-150">0x11</span></span>|<span data-ttu-id="82c13-151">ルート ディレクトリのサイズ</span><span class="sxs-lookup"><span data-stu-id="82c13-151">Size of Root Directory</span></span>|<span data-ttu-id="82c13-152">2</span><span class="sxs-lookup"><span data-stu-id="82c13-152">2</span></span>|
    |<span data-ttu-id="82c13-153">0x13</span><span class="sxs-lookup"><span data-stu-id="82c13-153">0x13</span></span>|<span data-ttu-id="82c13-154">セクターの数 (FAT-12 および FAT-16)</span><span class="sxs-lookup"><span data-stu-id="82c13-154">Number of Sectors FAT-12 &amp; FAT-16</span></span>|<span data-ttu-id="82c13-155">2</span><span class="sxs-lookup"><span data-stu-id="82c13-155">2</span></span>|
    |<span data-ttu-id="82c13-156">0x15</span><span class="sxs-lookup"><span data-stu-id="82c13-156">0x15</span></span>|<span data-ttu-id="82c13-157">メディアの種類</span><span class="sxs-lookup"><span data-stu-id="82c13-157">Media Type</span></span>|<span data-ttu-id="82c13-158">1</span><span class="sxs-lookup"><span data-stu-id="82c13-158">1</span></span>|
    |<span data-ttu-id="82c13-159">0x16</span><span class="sxs-lookup"><span data-stu-id="82c13-159">0x16</span></span>|<span data-ttu-id="82c13-160">FAT あたりのセクター数</span><span class="sxs-lookup"><span data-stu-id="82c13-160">Number of Sectors Per FAT</span></span>|<span data-ttu-id="82c13-161">2</span><span class="sxs-lookup"><span data-stu-id="82c13-161">2</span></span>|
    |<span data-ttu-id="82c13-162">0x18</span><span class="sxs-lookup"><span data-stu-id="82c13-162">0x18</span></span>|<span data-ttu-id="82c13-163">1 トラックあたりのセクター数</span><span class="sxs-lookup"><span data-stu-id="82c13-163">Sectors Per Track</span></span>|<span data-ttu-id="82c13-164">2</span><span class="sxs-lookup"><span data-stu-id="82c13-164">2</span></span>|
    |<span data-ttu-id="82c13-165">0x1A</span><span class="sxs-lookup"><span data-stu-id="82c13-165">0x1A</span></span>|<span data-ttu-id="82c13-166">ヘッドの数</span><span class="sxs-lookup"><span data-stu-id="82c13-166">Number of Heads</span></span>|<span data-ttu-id="82c13-167">2</span><span class="sxs-lookup"><span data-stu-id="82c13-167">2</span></span>|
    |<span data-ttu-id="82c13-168">0x1C</span><span class="sxs-lookup"><span data-stu-id="82c13-168">0x1C</span></span>|<span data-ttu-id="82c13-169">非表示セクターの数</span><span class="sxs-lookup"><span data-stu-id="82c13-169">Number of Hidden Sectors</span></span>|<span data-ttu-id="82c13-170">4</span><span class="sxs-lookup"><span data-stu-id="82c13-170">4</span></span>|
    |<span data-ttu-id="82c13-171">0x20</span><span class="sxs-lookup"><span data-stu-id="82c13-171">0x20</span></span>|<span data-ttu-id="82c13-172">セクターの数 (FAT-32)</span><span class="sxs-lookup"><span data-stu-id="82c13-172">Number of Sectors - FAT-32</span></span>|<span data-ttu-id="82c13-173">4</span><span class="sxs-lookup"><span data-stu-id="82c13-173">4</span></span>|
    |<span data-ttu-id="82c13-174">0x24</span><span class="sxs-lookup"><span data-stu-id="82c13-174">0x24</span></span>|<span data-ttu-id="82c13-175">FAT あたりのセクター数 (FAT-32)</span><span class="sxs-lookup"><span data-stu-id="82c13-175">Sectors per FAT (FAT-32)</span></span>|<span data-ttu-id="82c13-176">4</span><span class="sxs-lookup"><span data-stu-id="82c13-176">4</span></span>|
    |<span data-ttu-id="82c13-177">0x2C</span><span class="sxs-lookup"><span data-stu-id="82c13-177">0x2C</span></span>|<span data-ttu-id="82c13-178">ルート ディレクトリ クラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-178">Root Directory Cluster</span></span>|<span data-ttu-id="82c13-179">4</span><span class="sxs-lookup"><span data-stu-id="82c13-179">4</span></span>|
    |<span data-ttu-id="82c13-180">0x3E</span><span class="sxs-lookup"><span data-stu-id="82c13-180">0x3E</span></span>|<span data-ttu-id="82c13-181">システム ブート コード</span><span class="sxs-lookup"><span data-stu-id="82c13-181">System Boot code</span></span>|<span data-ttu-id="82c13-182">448</span><span class="sxs-lookup"><span data-stu-id="82c13-182">448</span></span>
    |<span data-ttu-id="82c13-183">0x1FE</span><span class="sxs-lookup"><span data-stu-id="82c13-183">0x1FE</span></span>|<span data-ttu-id="82c13-184">0x55AA</span><span class="sxs-lookup"><span data-stu-id="82c13-184">0x55AA</span></span>|<span data-ttu-id="82c13-185">2</span><span class="sxs-lookup"><span data-stu-id="82c13-185">2</span></span>|

- <span data-ttu-id="82c13-186">**予約済みセクターの数**: メディア ブート レコードの "*予約済みセクターの数*" フィールドは、ブート レコードと FAT 領域の最初のセクターの間で予約されるセクターの数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-186">**Reserved Sectors** The *reserved sectors* field in the media boot record defines the number of sectors reserved between the boot record and the first sector of the FAT area.</span></span> <span data-ttu-id="82c13-187">ほとんどの場合、このエントリは 0 です。</span><span class="sxs-lookup"><span data-stu-id="82c13-187">This entry is zero in most cases.</span></span>
- <span data-ttu-id="82c13-188">**FAT の数**: メディア ブート レコードの "*FAT の数*" エントリは、メディア内の FAT の数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-188">**Number of FATs** The *number of FATs* entry in the media boot record defines the number of FATs in the media.</span></span> <span data-ttu-id="82c13-189">メディアには常に 1 つ以上の FAT が必要です。</span><span class="sxs-lookup"><span data-stu-id="82c13-189">There must always be at least one FAT in a media.</span></span> <span data-ttu-id="82c13-190">追加の FAT は、プライマリ (1 番目の) FAT の複製コピーにすぎず、通常は診断または復旧ソフトウェアによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-190">Additional FATs are merely duplicate copies of the primary (first) FAT and are typically used by diagnostic or recovery software.</span></span>
- <span data-ttu-id="82c13-191">**ルート ディレクトリのサイズ**: メディア ブート レコードの "*ルート ディレクトリのサイズ*" エントリは、メディアのルート ディレクトリに含まれるエントリの定数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-191">**Root Directory Size** The *root directory size* entry in the media boot record defines the fixed number of entries in the root directory of the media.</span></span> <span data-ttu-id="82c13-192">このフィールドは、サブディレクトリと FAT-32 ルート ディレクトリには適用されません。これらは両方ともメディアのクラスターから割り当てられるためです。</span><span class="sxs-lookup"><span data-stu-id="82c13-192">This field is not applicable to subdirectories and the FAT-32 root directory because they are both allocated from the media's clusters.</span></span>
- <span data-ttu-id="82c13-193">**セクターの数 (FAT-12 および FAT-16)** : メディア ブート レコードの "*セクターの数*" フィールドには、メディア内のセクターの総数が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-193">**Number of Sectors FAT-12 & FAT-16** The *number of sectors* field in the media boot record contains the total number of sectors in the media.</span></span> <span data-ttu-id="82c13-194">このフィールドが 0 の場合、セクターの総数は、ブート レコードでこれより後にある "*セクターの数 (FAT-32)* " フィールドに格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-194">If this field is zero, then the total number of sectors is contained in the *number of sectors FAT-32* field located later in the boot record.</span></span>
- <span data-ttu-id="82c13-195">**メディアの種類**: "*メディアの種類*" フィールドは、デバイス ドライバーに提示されるメディアの種類を識別するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-195">**Media Type** The *media type* field is used to identify the type of media present to the device driver.</span></span> <span data-ttu-id="82c13-196">これは、レガシ フィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-196">This is a legacy field.</span></span>
- <span data-ttu-id="82c13-197">**FAT あたりのセクター数**: メディア ブート レコードの "*FAT あたりのセクター数*" フィールドには、FAT 領域内の各 FAT に関連付けられているセクターの数が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-197">**Sectors Per FAT** The *sectors per FAT* filed in the media boot record contains the number of sectors associated with each FAT in the FAT area.</span></span> <span data-ttu-id="82c13-198">FAT セクターの数は、メディアで割り当てることができるクラスターの最大数を占めるのに十分な大きさにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-198">The number of FAT sectors must be large enough to account for the maximum possible number of clusters that can be allocated in the media.</span></span>
- <span data-ttu-id="82c13-199">**1 トラックあたりのセクター数**: メディア ブート レコードの "*1 トラックあたりのセクター数*" フィールドは、トラックあたりのセクター数を定義します。これは、通常、実際のディスク型メディアのみに関連します。</span><span class="sxs-lookup"><span data-stu-id="82c13-199">**Sectors Per Track** The *sectors per track* field in the media boot record defines the number of sectors per track. This is typically only pertinent to actual disk-type media.</span></span> <span data-ttu-id="82c13-200">フラッシュ デバイスはこのマッピングを使用しません。</span><span class="sxs-lookup"><span data-stu-id="82c13-200">FLASH devices don't use this mapping.</span></span>
- <span data-ttu-id="82c13-201">**ヘッド数**: メディア ブート レコードの "*ヘッド数*" フィールドは、メディア内のヘッド数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-201">**Number of Heads** The *number of heads* field in the media boot record defines the number of heads in the media.</span></span> <span data-ttu-id="82c13-202">これは、通常、実際のディスク型メディアにのみ関連します。</span><span class="sxs-lookup"><span data-stu-id="82c13-202">This is typically only pertinent to actual disk-type media.</span></span> <span data-ttu-id="82c13-203">フラッシュ デバイスはこのマッピングを使用しません。</span><span class="sxs-lookup"><span data-stu-id="82c13-203">FLASH devices don't use this mapping.</span></span>
- <span data-ttu-id="82c13-204">**非表示セクター**: メディア ブート レコードの "*非表示セクター*" フィールドは、ブート レコードの前にあるセクター数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-204">**Hidden Sectors** The *hidden sectors* field in the media boot record defines the number of sectors before the boot record.</span></span> <span data-ttu-id="82c13-205">このフィールドは、**FX_MEDIA** 制御ブロック内に保持され、FileX によって行われるすべての読み取りおよび書き込み要求の FileX I/O ドライバー内で考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-205">This field is maintained in the **FX_MEDIA** control block and must be accounted for in FileX I/O drivers in all read and write requests made by FileX.</span></span>
- <span data-ttu-id="82c13-206">**セクターの数 (FAT-32)** : メディア ブート レコードの "*セクターの数*" フィールドは、2 バイトの "*セクターの数*" フィールドが 0 の場合にのみ有効です。</span><span class="sxs-lookup"><span data-stu-id="82c13-206">**Number of Sectors FAT-32** The *number of sectors* field in the media boot record is valid only if the two-byte *number of sectors* field is zero.</span></span> <span data-ttu-id="82c13-207">このような場合、この 4 バイトのフィールドには、メディア内のセクターの数が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-207">In such a case, this four-byte field contains the number of sectors in the media.</span></span>
- <span data-ttu-id="82c13-208">**FAT あたりのセクター数 (FAT-32)** : "*FAT あたりのセクター数 (FAT-32)* " フィールドは、FAT-32 形式でのみ有効です。メディアの各 FAT に割り当てられるセクターの数が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-208">**Sectors per FAT (FAT-32)** The *sectors per FAT (FAT-32)* field is valid only in FAT-32 format and contains the number of sectors allocated for each FAT of the media.</span></span>
- <span data-ttu-id="82c13-209">**ルート ディレクトリ クラスター**: "*ルート ディレクトリ クラスター*" フィールドは、FAT-32 形式でのみ有効です。ルート ディレクトリの開始クラスター番号が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-209">**Root Directory Cluster** The *root directory cluster* field is valid only in FAT-32 format and contains the starting cluster number of the root directory.</span></span>
- <span data-ttu-id="82c13-210">**システム ブート コード**: "*システム ブート コード*" フィールドは、ブート コードの一部を格納する領域です。</span><span class="sxs-lookup"><span data-stu-id="82c13-210">**System Boot Code** The *system boot code* field is an area to store a small portion of boot code.</span></span> <span data-ttu-id="82c13-211">今日のほとんどのデバイスでは、これはレガシ フィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-211">In most devices today, this is a legacy field.</span></span>
- <span data-ttu-id="82c13-212">**シグネチャ 0x55AA**: "*シグネチャ*" フィールドは、ブート レコードを識別するために使用されるデータ パターンです。</span><span class="sxs-lookup"><span data-stu-id="82c13-212">**Signature 0x55AA** The *signature* field is a data pattern used to identify the boot record.</span></span> <span data-ttu-id="82c13-213">このフィールドが存在しない場合、ブート レコードは無効です。</span><span class="sxs-lookup"><span data-stu-id="82c13-213">If this field is not present, the boot record is not valid.</span></span>

### <a name="exfat"></a><span data-ttu-id="82c13-214">exFAT</span><span class="sxs-lookup"><span data-stu-id="82c13-214">exFAT</span></span>

<span data-ttu-id="82c13-215">FAT32 での最大ファイル サイズは 4 GB です。これは、高解像度のマルチメディア ファイルの幅広い導入を制限するものです。</span><span class="sxs-lookup"><span data-stu-id="82c13-215">The maximum file size in FAT32 is 4GB, which limits the wide adoption of high-definition multimedia files.</span></span> <span data-ttu-id="82c13-216">既定では、FAT32 でサポートされるストレージ メディアは最大 32 GB です。</span><span class="sxs-lookup"><span data-stu-id="82c13-216">By default FAT32 supports storage media up to 32GB.</span></span> <span data-ttu-id="82c13-217">フラッシュと SD カードの容量の増加に伴い、FAT32 では、大容量ボリュームを管理する際の効率が低下します。</span><span class="sxs-lookup"><span data-stu-id="82c13-217">With increasing flash and SD card capacity, FAT32 becomes less efficient in managing large volumes.</span></span> <span data-ttu-id="82c13-218">exFAT は、これらの制限を克服するために設計されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-218">exFAT is designed to overcome these limitations.</span></span> <span data-ttu-id="82c13-219">exFAT では、最大 1 エクサバイト (EB) (約 10 億 GB) のファイル サイズがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="82c13-219">exFAT supports file size up to one Exabyte (EB), which is approximately one billion GB.</span></span> <span data-ttu-id="82c13-220">exFAT と FAT32 のもう 1 つの大きな違いとして、exFAT では、ビットマップを使用してボリューム内の使用可能な領域が管理されます。これにより、exFAT では、ファイルにデータを書き込むときに使用可能な領域をより効率的に見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-220">Another significant difference between exFAT and FAT32 is that exFAT uses bitmap to manage available space in the volume, making exFAT more efficient in finding available space when writing data to the file.</span></span> <span data-ttu-id="82c13-221">連続したクラスターに保存されているファイルの場合、exFAT では、FAT チェーンをたどってすべてのクラスターを見つける必要がないため、大きなファイルにより効率的にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="82c13-221">For file stored in contiguous clusters, exFAT eliminates the walking down the FAT chain to find all the clusters, making it more efficient when accessing large files.</span></span> <span data-ttu-id="82c13-222">32 GB を超えるフラッシュ ストレージおよび SD カードには exFAT が必要です。</span><span class="sxs-lookup"><span data-stu-id="82c13-222">exFAT is required for flash storage and SD cards larger than 32GB.</span></span>

### <a name="exfat-logical-sectors"></a><span data-ttu-id="82c13-223">exFAT の論理セクター</span><span class="sxs-lookup"><span data-stu-id="82c13-223">exFAT Logical Sectors</span></span>

<span data-ttu-id="82c13-224">図 2 に、exFAT でのメディアの論理セクターの一般的なレイアウトを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-224">The general layout of the media's logical sectors in exFAT is illustrated in Figure 2.</span></span> <span data-ttu-id="82c13-225">exFAT では、ブート ブロックと FAT 領域はシステム領域に属しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-225">In exFAT the boot block and the FAT area belong to System Area.</span></span> <span data-ttu-id="82c13-226">残りのクラスターはユーザー領域です。</span><span class="sxs-lookup"><span data-stu-id="82c13-226">The rest of the clusters are User Area.</span></span> <span data-ttu-id="82c13-227">必須ではありませんが、exFAT 標準では、アロケーション ビットマップをユーザー領域の先頭に配置し、その後に大文字変換テーブルとルート ディレクトリを配置することが推奨されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-227">Although not required, exFAT standard does recommend that the Allocation Bitmap is at the beginning of the User Area, followed by the Up-case Table and the root directory.</span></span>

### <a name="exfat-media-boot-record"></a><span data-ttu-id="82c13-228">exFAT のメディア ブート レコード</span><span class="sxs-lookup"><span data-stu-id="82c13-228">exFAT Media Boot Record</span></span>

<span data-ttu-id="82c13-229">exFAT のメディア ブート レコードの内容は、FAT12、16、32 のものとは異なります。</span><span class="sxs-lookup"><span data-stu-id="82c13-229">The content of the Media Boot Record in exFAT is different from those in FAT12/16/32.</span></span> <span data-ttu-id="82c13-230">これらを表 2 に示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-230">They are listed in Table 2.</span></span> <span data-ttu-id="82c13-231">exFAT では、混乱を防ぐために、FAT12、16、32 のさまざまなメディア パラメーターを含む 0x0B と 0x40 の間の領域が "*予約済み*" としてマークされています。</span><span class="sxs-lookup"><span data-stu-id="82c13-231">To prevent confusion, the area between 0x0B and 0x40, which contains various media parameters in FAT12/16/32 is marked as *Reserved* in exFAT.</span></span> <span data-ttu-id="82c13-232">この予約済み領域は、メディア ブート レコードを誤って解釈することを避けるために、0 でプログラミングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-232">This reserved area must be programmed with zeros, avoiding any misinterpreting the Media Boot Record.</span></span>

![exFAT の論理セクター](./media/user-guide/exfat-logical-sectors.png)

<span data-ttu-id="82c13-234">**図 2. exFAT の論理セクター**</span><span class="sxs-lookup"><span data-stu-id="82c13-234">**FIGURE 2. exFAT Logical Sectors**</span></span>

- <span data-ttu-id="82c13-235">**ジャンプ命令**: "*ジャンプ命令*" フィールドは、プロセッサのジャンプ用の Intel x86 マシン命令を表す 3 バイトのフィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-235">**Jump Instruction** The *jump instruction* field is a three-byte field that represents an Intel x86 machine instruction for a processor jump.</span></span> <span data-ttu-id="82c13-236">これは、ほとんどの場合にレガシ フィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-236">This is a legacy field in most situations.</span></span>

    <span data-ttu-id="82c13-237">**表 2. exFAT のメディア ブート レコード**</span><span class="sxs-lookup"><span data-stu-id="82c13-237">**TABLE 2. exFAT Media Boot Record**</span></span>

    |<span data-ttu-id="82c13-238">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-238">Offset</span></span>  |<span data-ttu-id="82c13-239">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-239">Field</span></span>  |<span data-ttu-id="82c13-240">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-240">Number of Bytes</span></span>|
    |----------|-----------|------------|
    |<span data-ttu-id="82c13-241">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-241">0x00</span></span>|<span data-ttu-id="82c13-242">ジャンプ命令</span><span class="sxs-lookup"><span data-stu-id="82c13-242">Jump Instruction</span></span>|<span data-ttu-id="82c13-243">3</span><span class="sxs-lookup"><span data-stu-id="82c13-243">3</span></span>|
    |<span data-ttu-id="82c13-244">0x03</span><span class="sxs-lookup"><span data-stu-id="82c13-244">0x03</span></span>|<span data-ttu-id="82c13-245">ファイル システム名</span><span class="sxs-lookup"><span data-stu-id="82c13-245">File System Name</span></span>|<span data-ttu-id="82c13-246">8</span><span class="sxs-lookup"><span data-stu-id="82c13-246">8</span></span>|
    |<span data-ttu-id="82c13-247">0x0B</span><span class="sxs-lookup"><span data-stu-id="82c13-247">0x0B</span></span>|<span data-ttu-id="82c13-248">予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-248">Reserved</span></span>|<span data-ttu-id="82c13-249">53</span><span class="sxs-lookup"><span data-stu-id="82c13-249">53</span></span>|
    |<span data-ttu-id="82c13-250">0x40</span><span class="sxs-lookup"><span data-stu-id="82c13-250">0x40</span></span>|<span data-ttu-id="82c13-251">パーティション オフセット</span><span class="sxs-lookup"><span data-stu-id="82c13-251">Partition Offset</span></span>|<span data-ttu-id="82c13-252">8</span><span class="sxs-lookup"><span data-stu-id="82c13-252">8</span></span>|
    |<span data-ttu-id="82c13-253">0x48</span><span class="sxs-lookup"><span data-stu-id="82c13-253">0x48</span></span>|<span data-ttu-id="82c13-254">ボリュームの長さ</span><span class="sxs-lookup"><span data-stu-id="82c13-254">Volume Length</span></span>|<span data-ttu-id="82c13-255">8</span><span class="sxs-lookup"><span data-stu-id="82c13-255">8</span></span>|
    |<span data-ttu-id="82c13-256">0x50</span><span class="sxs-lookup"><span data-stu-id="82c13-256">0x50</span></span>|<span data-ttu-id="82c13-257">FAT オフセット</span><span class="sxs-lookup"><span data-stu-id="82c13-257">FAT Offset</span></span>|<span data-ttu-id="82c13-258">4</span><span class="sxs-lookup"><span data-stu-id="82c13-258">4</span></span>|
    |<span data-ttu-id="82c13-259">0x54</span><span class="sxs-lookup"><span data-stu-id="82c13-259">0x54</span></span>|<span data-ttu-id="82c13-260">FAT の長さ</span><span class="sxs-lookup"><span data-stu-id="82c13-260">FAT Length</span></span>|<span data-ttu-id="82c13-261">4</span><span class="sxs-lookup"><span data-stu-id="82c13-261">4</span></span>|
    |<span data-ttu-id="82c13-262">0x58</span><span class="sxs-lookup"><span data-stu-id="82c13-262">0x58</span></span>|<span data-ttu-id="82c13-263">クラスター ヒープ オフセット</span><span class="sxs-lookup"><span data-stu-id="82c13-263">Cluster Heap Offset</span></span>|<span data-ttu-id="82c13-264">4</span><span class="sxs-lookup"><span data-stu-id="82c13-264">4</span></span>|
    |<span data-ttu-id="82c13-265">0x5C</span><span class="sxs-lookup"><span data-stu-id="82c13-265">0x5C</span></span>|<span data-ttu-id="82c13-266">クラスター数</span><span class="sxs-lookup"><span data-stu-id="82c13-266">Cluster Count</span></span>|<span data-ttu-id="82c13-267">4</span><span class="sxs-lookup"><span data-stu-id="82c13-267">4</span></span>|
    |<span data-ttu-id="82c13-268">0x60</span><span class="sxs-lookup"><span data-stu-id="82c13-268">0x60</span></span>|<span data-ttu-id="82c13-269">ルート ディレクトリの最初のクラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-269">First Cluster of Root Directory</span></span>|<span data-ttu-id="82c13-270">4</span><span class="sxs-lookup"><span data-stu-id="82c13-270">4</span></span>|
    |<span data-ttu-id="82c13-271">0x64</span><span class="sxs-lookup"><span data-stu-id="82c13-271">0x64</span></span>|<span data-ttu-id="82c13-272">ボリュームのシリアル番号</span><span class="sxs-lookup"><span data-stu-id="82c13-272">Volume Serial Number</span></span>|<span data-ttu-id="82c13-273">4</span><span class="sxs-lookup"><span data-stu-id="82c13-273">4</span></span>|
    |<span data-ttu-id="82c13-274">0x68</span><span class="sxs-lookup"><span data-stu-id="82c13-274">0x68</span></span>|<span data-ttu-id="82c13-275">ファイル システムのリビジョン</span><span class="sxs-lookup"><span data-stu-id="82c13-275">File System Revision</span></span>|<span data-ttu-id="82c13-276">2</span><span class="sxs-lookup"><span data-stu-id="82c13-276">2</span></span>|
    |<span data-ttu-id="82c13-277">0x6A</span><span class="sxs-lookup"><span data-stu-id="82c13-277">0x6A</span></span>|<span data-ttu-id="82c13-278">ボリューム フラグ</span><span class="sxs-lookup"><span data-stu-id="82c13-278">Volume Flags</span></span>|<span data-ttu-id="82c13-279">2</span><span class="sxs-lookup"><span data-stu-id="82c13-279">2</span></span>|
    |<span data-ttu-id="82c13-280">0x6C</span><span class="sxs-lookup"><span data-stu-id="82c13-280">0x6C</span></span>|<span data-ttu-id="82c13-281">セクターあたりのバイト数のシフト</span><span class="sxs-lookup"><span data-stu-id="82c13-281">Bytes Per Sector Shift</span></span>|<span data-ttu-id="82c13-282">1</span><span class="sxs-lookup"><span data-stu-id="82c13-282">1</span></span>|
    |<span data-ttu-id="82c13-283">0x6D</span><span class="sxs-lookup"><span data-stu-id="82c13-283">0x6D</span></span>|<span data-ttu-id="82c13-284">クラスターあたりのセクター数のシフト</span><span class="sxs-lookup"><span data-stu-id="82c13-284">Sector Per Cluster Shift</span></span>|<span data-ttu-id="82c13-285">1</span><span class="sxs-lookup"><span data-stu-id="82c13-285">1</span></span>|
    |<span data-ttu-id="82c13-286">0x6E</span><span class="sxs-lookup"><span data-stu-id="82c13-286">0x6E</span></span>|<span data-ttu-id="82c13-287">FAT の数</span><span class="sxs-lookup"><span data-stu-id="82c13-287">Number of FATs</span></span>|<span data-ttu-id="82c13-288">1</span><span class="sxs-lookup"><span data-stu-id="82c13-288">1</span></span>|
    |<span data-ttu-id="82c13-289">0x6F</span><span class="sxs-lookup"><span data-stu-id="82c13-289">0x6F</span></span>|<span data-ttu-id="82c13-290">ドライブの選択</span><span class="sxs-lookup"><span data-stu-id="82c13-290">Drive Select</span></span>|<span data-ttu-id="82c13-291">1</span><span class="sxs-lookup"><span data-stu-id="82c13-291">1</span></span>|
    |<span data-ttu-id="82c13-292">0x70</span><span class="sxs-lookup"><span data-stu-id="82c13-292">0x70</span></span>|<span data-ttu-id="82c13-293">使用率</span><span class="sxs-lookup"><span data-stu-id="82c13-293">Percent in Use</span></span>|<span data-ttu-id="82c13-294">7</span><span class="sxs-lookup"><span data-stu-id="82c13-294">7</span></span>|
    |<span data-ttu-id="82c13-295">0x71</span><span class="sxs-lookup"><span data-stu-id="82c13-295">0x71</span></span>|<span data-ttu-id="82c13-296">予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-296">Reserved</span></span>|<span data-ttu-id="82c13-297">1</span><span class="sxs-lookup"><span data-stu-id="82c13-297">1</span></span>|
    |<span data-ttu-id="82c13-298">0x78</span><span class="sxs-lookup"><span data-stu-id="82c13-298">0x78</span></span>|<span data-ttu-id="82c13-299">ブート コード</span><span class="sxs-lookup"><span data-stu-id="82c13-299">Boot Code</span></span>|<span data-ttu-id="82c13-300">390</span><span class="sxs-lookup"><span data-stu-id="82c13-300">390</span></span>|
    |<span data-ttu-id="82c13-301">0x1FE</span><span class="sxs-lookup"><span data-stu-id="82c13-301">0x1FE</span></span>|<span data-ttu-id="82c13-302">ブート シグネチャ</span><span class="sxs-lookup"><span data-stu-id="82c13-302">Boot Signature</span></span>|<span data-ttu-id="82c13-303">2</span><span class="sxs-lookup"><span data-stu-id="82c13-303">2</span></span>|

- <span data-ttu-id="82c13-304">**ファイル システム名**: exFAT の場合、"*ファイル システム名*" フィールドの内容は、"EXFAT" とそれに続く 3 つの空白である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-304">**File System Name** For exFAT the *file system name* field must be "EXFAT" followed by three trailing white spaces.</span></span>
- <span data-ttu-id="82c13-305">**予約済み**: "*予約済み*" フィールドの内容は 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-305">**Reserved** The content of the *reserved* field must be zero.</span></span> <span data-ttu-id="82c13-306">この領域は、FAT12、16、32 のブート レコードと重複しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-306">This region overlaps with the boot records in FAT12/16/ 32.</span></span> <span data-ttu-id="82c13-307">この領域を 0 にすると、ファイル システムがこのボリュームを誤って解釈するのを防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-307">Making this area zero avoids file systems from mis-interprets this volume.</span></span>
- <span data-ttu-id="82c13-308">**パーティション オフセット**: "*パーティション オフセット*" フィールドは、このパーティションの開始を示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-308">**Partition Offset** The *partition offset* field indicates the starting of this partition.</span></span>
- <span data-ttu-id="82c13-309">**ボリュームの長さ**: "*ボリュームの長さ*" フィールドは、このパーティションのサイズをセクター数で定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-309">**Volume Length** The *volume length* field defines the size, in number of sectors, of this partition.</span></span>
- <span data-ttu-id="82c13-310">**FAT オフセット**: "*FAT オフセット*" フィールドは、このパーティションの先頭を基準にして、このパーティションの FAT テーブルの開始セクター番号を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-310">**FAT Offset** The *FAT offset* field defines the starting sector number, relative to the beginning of this partition, of the FAT table for this partition.</span></span>
- <span data-ttu-id="82c13-311">**FAT の長さ**: "*FAT の長さ*" フィールドは、FAT テーブルのサイズをセクター数で定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-311">**FAT Length** The *FAT length* field defines the size of the FAT table, in number of sectors.</span></span>
- <span data-ttu-id="82c13-312">**クラスター ヒープ オフセット**: "*クラスター ヒープ オフセット*" フィールドは、パーティションの先頭を基準にして、クラスター ヒープの開始セクター番号を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-312">**Cluster Heap Offset** The *cluster heap offset* field defines the starting sector number, relative to the beginning of the partition, of the cluster heap.</span></span> <span data-ttu-id="82c13-313">クラスター ヒープは、ディレクトリ情報とファイル データが格納される領域です。</span><span class="sxs-lookup"><span data-stu-id="82c13-313">Cluster heap is the area where the directories information and the file data are stored.</span></span>
- <span data-ttu-id="82c13-314">**クラスター数**: "*クラスター数*" フィールドは、このパーティションに含まれるクラスターの数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-314">**Cluster Count** The *cluster count* field defines the number of cluster this partition has.</span></span>
- <span data-ttu-id="82c13-315">**ルート ディレクトリの最初のクラスター**: "*ルート ディレクトリの最初のクラスター*" フィールドは、ルート ディレクトリの開始位置を定義します。これは、アロケーション ビットマップと大文字変換テーブルの直後に配置することが推奨されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-315">**First Cluster of Root Directory** The *first cluster of root directory* field defines the starting location of the root directory, which is recommend to be right after the allocation bitmap and the up-case table.</span></span>
- <span data-ttu-id="82c13-316">**ボリュームのシリアル番号**: "*ボリュームのシリアル番号*" フィールドは、このパーティションのシリアル番号を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-316">**Volume Serial Number** The *volume serial number* field defines the serial number for this partition.</span></span>
- <span data-ttu-id="82c13-317">**ファイル システムのリビジョン**: "*ファイル システムのリビジョン*" フィールドは、exFAT のメジャー バージョンとマイナー バージョンを定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-317">**File System Revision** The *file system revision* field defines the major and minor version of exFAT.</span></span>
- <span data-ttu-id="82c13-318">**ボリューム フラグ**: "*ボリューム フラグ*" フィールドには、このボリュームの状態を示すフラグが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-318">**Volume Flags** The *volume flags* field contains flags indicating the state of this volume.</span></span>
- <span data-ttu-id="82c13-319">**セクターあたりのバイト数のシフト**: "*セクターあたりのバイト数のシフト*" フィールドは、セクターあたりのバイト数を log2(n) として定義します。ここで、n は、セクターあたりのバイト数です。</span><span class="sxs-lookup"><span data-stu-id="82c13-319">**Bytes Per Sector Shift** The *bytes per sector shift* field defines the number of bytes per sector, in log2(n), where n is the number of bytes per sector.</span></span> <span data-ttu-id="82c13-320">たとえば、SD カードでは、セクター サイズは 512 バイトです。</span><span class="sxs-lookup"><span data-stu-id="82c13-320">For example, in SD card, sector size is 512 bytes.</span></span> <span data-ttu-id="82c13-321">したがって、このフィールドは 9 (log2(512) = 9) になります。</span><span class="sxs-lookup"><span data-stu-id="82c13-321">Therefore this field shall be 9 (log2(512) = 9).</span></span>
- <span data-ttu-id="82c13-322">**クラスターあたりのセクター数のシフト**: "*クラスターあたりのセクター数のシフト*" フィールドは、クラスター内のセクター数を log2(n) として定義します。ここで、n は、クラスターあたりのセクター数です。</span><span class="sxs-lookup"><span data-stu-id="82c13-322">**Sectors Per Cluster Shift** The *sectors per cluster shift* field defines the number of sectors in a cluster, in log2(n) where n is the number of sectors per cluster.</span></span>
- <span data-ttu-id="82c13-323">**FAT の数**: "*FAT の数*" フィールドは、このパーティション内の FAT テーブルの数を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-323">**Number of FATs** The *number of FATs* field defines the number of FAT tables in this partition.</span></span> <span data-ttu-id="82c13-324">exFAT の場合、値を 1 (1 つの FAT テーブルを表します) にすることが推奨されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-324">For exFAT, the value is recommended to be 1, for one FAT table.</span></span>
- <span data-ttu-id="82c13-325">**ドライブの選択**: "*ドライブの選択*" フィールドは、拡張 INT 13h ドライブ番号を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-325">**Drive Select** The *driver select* field defines the extended INT 13h drive number.</span></span>
- <span data-ttu-id="82c13-326">**使用率**: "*使用率*" フィールドは、クラスター ヒープ内の割り当てられているクラスターの割合を定義します。</span><span class="sxs-lookup"><span data-stu-id="82c13-326">**Percent in Use** The *percent in use* field define the percentage of the clusters in the cluster heap is being allocated.</span></span> <span data-ttu-id="82c13-327">有効な値は 0 から 100 です。</span><span class="sxs-lookup"><span data-stu-id="82c13-327">The valid values are between 0 and 100, inclusive.</span></span>
- <span data-ttu-id="82c13-328">**予約済み**: このフィールドは将来の使用のために予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-328">**Reserved** This field is reserved for future use.</span></span>
- <span data-ttu-id="82c13-329">**ブート コード**: "*ブート コード*" フィールドは、ブート コードの一部を格納する領域です。</span><span class="sxs-lookup"><span data-stu-id="82c13-329">**Boot Code** The *boot code* field is an area to store a small portion of the boot code.</span></span> <span data-ttu-id="82c13-330">今日のほとんどのデバイスでは、これはレガシ フィールドです。</span><span class="sxs-lookup"><span data-stu-id="82c13-330">In most devices today, this is a legacy field.</span></span>
- <span data-ttu-id="82c13-331">**シグネチャ 0x55AA**: "*ブート シグネチャ*" フィールドは、ブート レコードを識別するために使用されるデータ パターンです。</span><span class="sxs-lookup"><span data-stu-id="82c13-331">**Signature 0x55AA** The *boot signature* field is a data pattern used to identify the boot record.</span></span> <span data-ttu-id="82c13-332">このフィールドが存在しない場合、ブート レコードは無効です。</span><span class="sxs-lookup"><span data-stu-id="82c13-332">If this field is not present, the boot record is not valid.</span></span>

### <a name="file-allocation-table-fat"></a><span data-ttu-id="82c13-333">ファイル アロケーション テーブル (FAT)</span><span class="sxs-lookup"><span data-stu-id="82c13-333">File Allocation Table (FAT)</span></span>

<span data-ttu-id="82c13-334">"*ファイル アロケーション テーブル (FAT)* " は、メディアの予約済みセクターの後から開始されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-334">The *File Allocation Table (FAT)* starts after the reserved sectors in the media.</span></span> <span data-ttu-id="82c13-335">FAT 領域は、基本的には、クラスターが割り当て済みであるか、サブディレクトリまたはファイルを構成するクラスターのチェーンの一部であるかを判定する、12 ビット、16 ビット、または 32 ビットのエントリの配列です。</span><span class="sxs-lookup"><span data-stu-id="82c13-335">The FAT area is basically an array of 12-bit, 16-bit, or 32-bit entries that determine if that cluster is allocated or part of a chain of clusters comprising a subdirectory or a file.</span></span> <span data-ttu-id="82c13-336">各 FAT エントリのサイズは、表す必要があるクラスターの数によって決まります。</span><span class="sxs-lookup"><span data-stu-id="82c13-336">The size of each FAT entry is determined by the number of clusters that need to be represented.</span></span> <span data-ttu-id="82c13-337">クラスターの数 (セクターの総数をクラスターあたりのセクター数で割ったもの) が 4,086 個以下の場合は、12 ビットの FAT エントリが使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-337">If the number of clusters (derived from the total sectors divided by the sectors per cluster) is less than or equal to 4,086, 12-bit FAT entries are used.</span></span> <span data-ttu-id="82c13-338">クラスターの総数が 4,086 個を超え 65,525 個に満たない場合は、16 ビットの FAT エントリが使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-338">If the total number of clusters is greater than 4,086 and less than 65,525, 16-bit FAT entries are used.</span></span> <span data-ttu-id="82c13-339">それ以外でクラスターの総数が 65,525 個以上の場合は、32 ビット FAT または exFAT が使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-339">Otherwise, if the total number of clusters is greater than or equal to 65,525, 32-bit FAT or exFAT are used.</span></span>

<span data-ttu-id="82c13-340">FAT12、16、32 の場合、FAT テーブルは、クラスター チェーンを保持するだけでなく、クラスターの割り当てに関する情報 (クラスターが使用可能かどうか) も提供します。</span><span class="sxs-lookup"><span data-stu-id="82c13-340">For FAT12/16/32, the FAT table not only maintains the cluster chain, it also provides information on cluster allocation: whether or not a cluster is available.</span></span> <span data-ttu-id="82c13-341">exFAT では、クラスターの割り当て情報は、アロケーション ビットマップ ディレクトリ エントリによって保持されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-341">In exFAT, the cluster allocation information is maintained by an Allocation Bitmap Directory Entry.</span></span> <span data-ttu-id="82c13-342">各パーティションには、独自のアロケーション ビットマップがあります。</span><span class="sxs-lookup"><span data-stu-id="82c13-342">Each partition has its own allocation bitmap.</span></span> <span data-ttu-id="82c13-343">ビットマップは、使用可能なすべてのクラスターを対象とするのに十分な大きさを持ちます。</span><span class="sxs-lookup"><span data-stu-id="82c13-343">The size of the bitmap is large enough to cover all the available clusters.</span></span> <span data-ttu-id="82c13-344">クラスターを割り当てに使用できる場合、アロケーション ビットマップの対応するビットが 0 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-344">If a cluster is available for allocation, the corresponding bit in the allocation bitmap is set to 0.</span></span> <span data-ttu-id="82c13-345">それ以外の場合、ビットは 1 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-345">Otherwise the bit is set to 1.</span></span> <span data-ttu-id="82c13-346">連続するクラスターが占有されるファイルの場合、exFAT では、すべてのクラスターを追跡するために FAT チェーンを必要としません。</span><span class="sxs-lookup"><span data-stu-id="82c13-346">For a file that occupies consecutive clusters, exFAT does not require a FAT chain to keep track of all the clusters.</span></span> <span data-ttu-id="82c13-347">ただし、連続するクラスターが占有されないファイルの場合は、FAT チェーンを保持する必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-347">However, for a file that does not occupy consecutive clusters, a FAT chain still needs to be maintained.</span></span>

### <a name="fat-entry-contents"></a><span data-ttu-id="82c13-348">FAT エントリの内容</span><span class="sxs-lookup"><span data-stu-id="82c13-348">FAT Entry Contents</span></span>

<span data-ttu-id="82c13-349">FAT テーブルの最初の 2 つのエントリは使用されず、通常は次の内容が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-349">The first two entries in the FAT table are not used and typically have the following contents.</span></span>

|<span data-ttu-id="82c13-350">FAT エントリ</span><span class="sxs-lookup"><span data-stu-id="82c13-350">FAT Entry</span></span> |<span data-ttu-id="82c13-351">12 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-351">12-bit FAT</span></span>|<span data-ttu-id="82c13-352">16 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-352">16-bit FAT</span></span>|<span data-ttu-id="82c13-353">32 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-353">32-bit FAT</span></span>| <span data-ttu-id="82c13-354">exFAT</span><span class="sxs-lookup"><span data-stu-id="82c13-354">exFAT</span></span>|
|----------|-----------|------------|-------|------|
|<span data-ttu-id="82c13-355">エントリ 0</span><span class="sxs-lookup"><span data-stu-id="82c13-355">Entry 0</span></span>|<span data-ttu-id="82c13-356">0x0F0</span><span class="sxs-lookup"><span data-stu-id="82c13-356">0x0F0</span></span>|<span data-ttu-id="82c13-357">0x00F0</span><span class="sxs-lookup"><span data-stu-id="82c13-357">0x00F0</span></span>|<span data-ttu-id="82c13-358">0x000000F0</span><span class="sxs-lookup"><span data-stu-id="82c13-358">0x000000F0</span></span>|<span data-ttu-id="82c13-359">0xF8FFFFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-359">0xF8FFFFFF</span></span>|
|<span data-ttu-id="82c13-360">エントリ 1</span><span class="sxs-lookup"><span data-stu-id="82c13-360">Entry 1</span></span>|<span data-ttu-id="82c13-361">0xFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-361">0xFFF</span></span>|<span data-ttu-id="82c13-362">0xFFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-362">0xFFFF</span></span>|<span data-ttu-id="82c13-363">0x0FFFFFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-363">0x0FFFFFFF</span></span>|<span data-ttu-id="82c13-364">0xFFFFFFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-364">0xFFFFFFFF</span></span>|

<span data-ttu-id="82c13-365">FAT エントリ番号 2 は、メディアのデータ領域の最初のクラスターを表します。</span><span class="sxs-lookup"><span data-stu-id="82c13-365">FAT entry number 2 represents the first cluster in the media's data area.</span></span> <span data-ttu-id="82c13-366">各クラスター エントリの内容によって、それが空であるか、ファイルまたはサブディレクトリに割り当てられたクラスターのリンク リストの一部であるかが判定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-366">The contents of each cluster entry determines whether or not it is free or part of a linked list of clusters allocated for a file or a subdirectory.</span></span> <span data-ttu-id="82c13-367">クラスター エントリに別の有効なクラスター エントリが含まれている場合は、クラスターが割り当てられていて、その値はクラスター チェーン内で割り当てられている次のクラスターを指します。</span><span class="sxs-lookup"><span data-stu-id="82c13-367">If the cluster entry contains another valid cluster entry, then the cluster is allocated and its value points to the next cluster allocated in the cluster chain.</span></span>

<span data-ttu-id="82c13-368">使用可能なクラスター エントリは、次のように定義されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-368">Possible cluster entries are defined as follows.</span></span>

|<span data-ttu-id="82c13-369">説明</span><span class="sxs-lookup"><span data-stu-id="82c13-369">Meaning</span></span>|<span data-ttu-id="82c13-370">12 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-370">12-bit FAT</span></span>|<span data-ttu-id="82c13-371">16 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-371">16-bit FAT</span></span>|<span data-ttu-id="82c13-372">32 ビット FAT</span><span class="sxs-lookup"><span data-stu-id="82c13-372">32-bit FAT</span></span>| <span data-ttu-id="82c13-373">exFAT</span><span class="sxs-lookup"><span data-stu-id="82c13-373">exFAT</span></span>|
|----------|-----------|------------|-------|------|
|<span data-ttu-id="82c13-374">空きクラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-374">Free Cluster</span></span>|<span data-ttu-id="82c13-375">0x000</span><span class="sxs-lookup"><span data-stu-id="82c13-375">0x000</span></span>|<span data-ttu-id="82c13-376">0x0000</span><span class="sxs-lookup"><span data-stu-id="82c13-376">0x0000</span></span>|<span data-ttu-id="82c13-377">0x00000000</span><span class="sxs-lookup"><span data-stu-id="82c13-377">0x00000000</span></span>|<span data-ttu-id="82c13-378">0x00000000</span><span class="sxs-lookup"><span data-stu-id="82c13-378">0x00000000</span></span>|
|<span data-ttu-id="82c13-379">未使用</span><span class="sxs-lookup"><span data-stu-id="82c13-379">Not Used</span></span>|<span data-ttu-id="82c13-380">0x001</span><span class="sxs-lookup"><span data-stu-id="82c13-380">0x001</span></span>|<span data-ttu-id="82c13-381">0x0001</span><span class="sxs-lookup"><span data-stu-id="82c13-381">0x0001</span></span>|<span data-ttu-id="82c13-382">0x00000001</span><span class="sxs-lookup"><span data-stu-id="82c13-382">0x00000001</span></span>|<span data-ttu-id="82c13-383">0x00000001</span><span class="sxs-lookup"><span data-stu-id="82c13-383">0x00000001</span></span>|
|<span data-ttu-id="82c13-384">予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-384">Reserved</span></span>|<span data-ttu-id="82c13-385">0xFF0 から FF6</span><span class="sxs-lookup"><span data-stu-id="82c13-385">0xFF0-FF6</span></span>|<span data-ttu-id="82c13-386">0xFFF0 から FFF6</span><span class="sxs-lookup"><span data-stu-id="82c13-386">0xFFF0-FFF6</span></span>|<span data-ttu-id="82c13-387">0x0FFFFFF0 から 6</span><span class="sxs-lookup"><span data-stu-id="82c13-387">0x0FFFFFF0-6</span></span>|<span data-ttu-id="82c13-388">ClusterCounter +2 から 0xFFFFFFF6</span><span class="sxs-lookup"><span data-stu-id="82c13-388">ClusterCounter +2 to 0xFFFFFFF6</span></span>|
|<span data-ttu-id="82c13-389">無効なクラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-389">Bad Cluster</span></span>|<span data-ttu-id="82c13-390">0xFF7</span><span class="sxs-lookup"><span data-stu-id="82c13-390">0xFF7</span></span>|<span data-ttu-id="82c13-391">0xFFF7</span><span class="sxs-lookup"><span data-stu-id="82c13-391">0xFFF7</span></span>|<span data-ttu-id="82c13-392">0x0FFFFFF7</span><span class="sxs-lookup"><span data-stu-id="82c13-392">0x0FFFFFF7</span></span>|<span data-ttu-id="82c13-393">0xFFFFFFF7</span><span class="sxs-lookup"><span data-stu-id="82c13-393">0xFFFFFFF7</span></span>|
|<span data-ttu-id="82c13-394">予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-394">Reserved</span></span>| - | - | - | <span data-ttu-id="82c13-395">0xFFFFFFF8 から E</span><span class="sxs-lookup"><span data-stu-id="82c13-395">0xFFFFFFF8-E</span></span>|
|<span data-ttu-id="82c13-396">最後のクラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-396">Last Cluster</span></span>| <span data-ttu-id="82c13-397">0xFF8 から FFF</span><span class="sxs-lookup"><span data-stu-id="82c13-397">0xFF8-FFF</span></span>| <span data-ttu-id="82c13-398">0xFFF8 から FFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-398">0xFFF8-FFFF</span></span>| <span data-ttu-id="82c13-399">0x0FFFFFF8 から F</span><span class="sxs-lookup"><span data-stu-id="82c13-399">0x0FFFFFF8-F</span></span>| <span data-ttu-id="82c13-400">0xFFFFFFFF</span><span class="sxs-lookup"><span data-stu-id="82c13-400">0xFFFFFFFF</span></span>|
|<span data-ttu-id="82c13-401">クラスター リンク</span><span class="sxs-lookup"><span data-stu-id="82c13-401">Cluster Link</span></span>| <span data-ttu-id="82c13-402">0x002 から 0xFEF</span><span class="sxs-lookup"><span data-stu-id="82c13-402">0x002-0xFEF</span></span>| <span data-ttu-id="82c13-403">0x0002 から FFEF</span><span class="sxs-lookup"><span data-stu-id="82c13-403">0x0002-FFEF</span></span>| <span data-ttu-id="82c13-404">0x2 から 0x0FFFFFEF</span><span class="sxs-lookup"><span data-stu-id="82c13-404">0x2-0x0FFFFFEF</span></span> | <span data-ttu-id="82c13-405">0x2 から ClusterCount + 1</span><span class="sxs-lookup"><span data-stu-id="82c13-405">0x2 - ClusterCount + 1</span></span>|

<span data-ttu-id="82c13-406">割り当てられたクラスター チェーンの最後のクラスターには、(上で定義した) 最後のクラスターの値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-406">The last cluster in an allocated chain of clusters contains the Last Cluster value (defined above).</span></span> <span data-ttu-id="82c13-407">最初のクラスター番号は、ファイルまたはサブディレクトリのディレクトリ エントリに見つかります。</span><span class="sxs-lookup"><span data-stu-id="82c13-407">The first cluster number is found in the file or subdirectory's directory entry.</span></span>

### <a name="internal-logical-cache"></a><span data-ttu-id="82c13-408">内部論理キャッシュ</span><span class="sxs-lookup"><span data-stu-id="82c13-408">Internal Logical Cache</span></span>

<span data-ttu-id="82c13-409">FileX では、開かれたメディアごとに "*最近使用された*" 論理セクター キャッシュが保持されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-409">FileX maintains a *most-recently-used* logical sector cache for each opened media.</span></span> <span data-ttu-id="82c13-410">論理セクター キャッシュの最大サイズは、**_fx_api.h_** 内の定数 **FX_MAX_SECTOR_CACHE** によって定義されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-410">The maximum size of the logical sector cache is defined by the constant **FX_MAX_SECTOR_CACHE** and is located in **_fx_api.h_**.</span></span> <span data-ttu-id="82c13-411">これは、内部論理セクター キャッシュのサイズを判定する最初の要素です。</span><span class="sxs-lookup"><span data-stu-id="82c13-411">This is the first factor determining the size of the internal logical sector cache.</span></span>

<span data-ttu-id="82c13-412">論理セクター キャッシュのサイズを決定するもう 1 つの要素は、アプリケーションによって \***fx_media_open** _ 呼び出しに渡されるメモリの量です。</span><span class="sxs-lookup"><span data-stu-id="82c13-412">The other factor that determines the size of the logical sector cache is the amount of memory supplied to the \***fx_media_open** _ call by the application.</span></span> <span data-ttu-id="82c13-413">少なくとも 1 つの論理セクターに十分なメモリが必要です。</span><span class="sxs-lookup"><span data-stu-id="82c13-413">There must be enough memory for at least one logical sector.</span></span> <span data-ttu-id="82c13-414">_ *FX_MAX_SECTOR_CACHE*\* を超える論理セクターが必要な場合は、**_fx_api.h_** 内の定数を変更した後、FileX ライブラリ全体を再構築する必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-414">If more than _ *FX_MAX_SECTOR_CACHE*\* logical sectors are required, the constant must be changed in **_fx_api.h_** and the entire FileX library must be rebuilt.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="82c13-415">"*オープン呼び出し中に指定されたメモリに応じて、FileX で開かれた各メディアのキャッシュ サイズが異なる場合があります。* "</span><span class="sxs-lookup"><span data-stu-id="82c13-415">*Each opened media in FileX may have a different cache size depending on the memory supplied during the open call.*</span></span>

### <a name="write-protect"></a><span data-ttu-id="82c13-416">書き込み保護</span><span class="sxs-lookup"><span data-stu-id="82c13-416">Write Protect</span></span>

<span data-ttu-id="82c13-417">FileX では、メディアに対して書き込み保護を動的に設定する機能がアプリケーション ドライバーに提供されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-417">FileX provides the application driver the ability to dynamically set write protection on the media.</span></span> <span data-ttu-id="82c13-418">書き込み保護が必要な場合、ドライバーは、関連付けられた FX_MEDIA 構造体の *fx_media_driver_write_protect* フィールドを FX_TRUE に設定します。</span><span class="sxs-lookup"><span data-stu-id="82c13-418">If write protection is required, the driver sets to FX_TRUE the *fx_media_driver_write_protect* field in the associated FX_MEDIA structure.</span></span> <span data-ttu-id="82c13-419">設定すると、アプリケーションがメディアを変更しようとする試みがすべて拒否されるだけでなく、書き込み用にファイルを開こうとする試みも拒否されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-419">When set, all attempts by the application to modify the media are rejected as well as attempts to open files for writing.</span></span> <span data-ttu-id="82c13-420">ドライバーは、このフィールドを解除することにより、書き込み保護を無効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="82c13-420">The driver may also disable write protection by clearing this field.</span></span>

### <a name="free-sector-update"></a><span data-ttu-id="82c13-421">空きセクターの更新</span><span class="sxs-lookup"><span data-stu-id="82c13-421">Free Sector Update</span></span>

<span data-ttu-id="82c13-422">FileX には、セクターが使用されなくなったときにアプリケーション ドライバーに通知するメカニズムがあります。</span><span class="sxs-lookup"><span data-stu-id="82c13-422">FileX provides a mechanism to inform the application driver when sectors are no longer in use.</span></span> <span data-ttu-id="82c13-423">これは、FileX によって使用されているすべての論理セクターを管理するフラッシュ メモリ マネージャーに特に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="82c13-423">This is especially useful for FLASH memory managers that manage all logical sectors being used by FileX.</span></span>

<span data-ttu-id="82c13-424">空きセクターの通知が必要な場合、アプリケーション ドライバーは、関連付けられた FX_MEDIA 構造体の *fx_media_driver_free_sector_update* フィールドを FX_TRUE に設定します。</span><span class="sxs-lookup"><span data-stu-id="82c13-424">If notification of free sectors is required, the application driver sets to FX_TRUE the *fx_media_driver_free_sector_update* field in the associated FX_MEDIA structure.</span></span> <span data-ttu-id="82c13-425">この割り当ては、通常、ドライバーの初期化中に行われます。</span><span class="sxs-lookup"><span data-stu-id="82c13-425">This assignment is typically done during driver initialization.</span></span>

<span data-ttu-id="82c13-426">このフィールドが設定されると、FileX により、1 つ以上の連続するセクターが空きセクターになったことを示す **FX_DRIVER_RELEASE_SECTORS** ドライバー呼び出しが行われます。</span><span class="sxs-lookup"><span data-stu-id="82c13-426">Setting this field, FileX makes a **FX_DRIVER_RELEASE_SECTORS** driver call indicating when one or more consecutive sectors become free.</span></span>

### <a name="media-control-block-fx_media"></a><span data-ttu-id="82c13-427">メディア制御ブロック FX_MEDIA</span><span class="sxs-lookup"><span data-stu-id="82c13-427">Media Control Block FX_MEDIA</span></span>

<span data-ttu-id="82c13-428">FileX で開かれている各メディアの特性は、メディア制御ブロックに含まれています。</span><span class="sxs-lookup"><span data-stu-id="82c13-428">The characteristics of each open media in FileX are contained in the media control block.</span></span> <span data-ttu-id="82c13-429">この構造体は ***fx_api.h*** ファイルに定義されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-429">This structure is defined in the file ***fx_api.h***.</span></span>

<span data-ttu-id="82c13-430">メディア制御ブロックは、メモリ内の任意の場所に配置できますが、最も一般的なのは、制御ブロックを任意の関数のスコープ外に定義してグローバルな構造体にすることです。</span><span class="sxs-lookup"><span data-stu-id="82c13-430">The media control block can be located anywhere in memory, but it is most common to make the control block a global structure by defining it outside the scope of any function.</span></span>

<span data-ttu-id="82c13-431">動的に割り当てられたすべてのメモリと同様に、他の領域に制御ブロックを配置するにはもう少し注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="82c13-431">Locating the control block in other areas requires a bit more care, just like all dynamically allocated memory.</span></span> <span data-ttu-id="82c13-432">制御ブロックが C 関数内に割り当てられている場合、それに関連付けられているメモリは、呼び出し元スレッドのスタックの一部になります。</span><span class="sxs-lookup"><span data-stu-id="82c13-432">If a control block is allocated within a C function, the memory associated with it is part of the calling thread's stack.</span></span>

> [!WARNING]
><span data-ttu-id="82c13-433">"*一般に、制御ブロックにローカル ストレージを使用することは避けてください。これは、関数から制御が返された後、そのローカル変数スタック領域が、まだ使用中かどうかに関係なくすべて解放されるためです。* "</span><span class="sxs-lookup"><span data-stu-id="82c13-433">*In general, avoid using local storage for control blocks because after the function returns, all of its local variable stack space is released—regardless of whether it is still in use!*</span></span>

## <a name="fat121632-directory-description"></a><span data-ttu-id="82c13-434">**FAT12、16、32 のディレクトリの説明**</span><span class="sxs-lookup"><span data-stu-id="82c13-434">**FAT12/16/32 Directory Description**</span></span>

<span data-ttu-id="82c13-435">FileX では、8.3 と Windows の長いファイル名 (LFN) の両方の名前形式がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="82c13-435">FileX supports both 8.3 and Windows Long File Name (LFN) name formats.</span></span> <span data-ttu-id="82c13-436">名前に加えて、各ディレクトリ エントリには、エントリの属性、最終変更時刻と日付、開始クラスター インデックス、およびエントリのサイズ (バイト単位) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-436">In addition to the name, each directory entry contains the entry's attributes, the last modified time and date, the starting cluster index, and the size in bytes of the entry.</span></span> <span data-ttu-id="82c13-437">表 3 に、FileX の 8.3 ディレクトリ エントリの内容とサイズを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-437">Table 3 shows the contents and size of a FileX 8.3 directory entry.</span></span>

- <span data-ttu-id="82c13-438">**ディレクトリ名**</span><span class="sxs-lookup"><span data-stu-id="82c13-438">**Directory Name**</span></span>

    <span data-ttu-id="82c13-439">FileX では、1 から 255 文字のファイル名がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="82c13-439">FileX supports file names ranging in size from 1 to 255 characters.</span></span> <span data-ttu-id="82c13-440">標準の 8 文字のファイル名は、メディア上の 1 つのディレクトリ エントリで表されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-440">Standard eight-character file names are represented in a single directory entry on the media.</span></span> <span data-ttu-id="82c13-441">これらはディレクトリ名フィールドで左寄せされ、空白で埋められます。</span><span class="sxs-lookup"><span data-stu-id="82c13-441">They are left justified in the directory name field and are blank padded.</span></span> <span data-ttu-id="82c13-442">また、名前を構成する ASCII 文字は常に大文字になります。</span><span class="sxs-lookup"><span data-stu-id="82c13-442">In addition, the ASCII characters that comprise the name are always capitalized.</span></span>

    <span data-ttu-id="82c13-443">長いファイル名 (LFN) は、連続するディレクトリ エントリによって逆の順序で表され、その直後に 8.3 標準ファイル名が続きます。</span><span class="sxs-lookup"><span data-stu-id="82c13-443">Long File Names (LFNs) are represented by consecutive directory entries, in reverse order, followed immediately by an 8.3 standard file name.</span></span> <span data-ttu-id="82c13-444">作成された 8.3 名には、その名前に関連付けられているすべての意味のあるディレクトリ情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-444">The created 8.3 name contains all the meaningful directory information associated with the name.</span></span> <span data-ttu-id="82c13-445">表 4 は、長いファイル名情報を保持するために使用されるディレクトリ エントリの内容を示しています。表 5 は、4 つのディレクトリ エントリをまとめたものを必要とする 39 文字の LFN の例を示しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-445">Table 4 shows the contents of the directory entries used to hold the Long File Name information, and Table 5 shows an example of a 39-character LFN that requires a total of four directory entries.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="82c13-446">"***fx_api.h** で定義されている定数 **FX_MAX_LONG_NAME_LEN** には、FileX でサポートされる最大長が含まれます。* "</span><span class="sxs-lookup"><span data-stu-id="82c13-446">*The constant **FX_MAX_LONG_NAME_LEN**, defined in **fx_api.h**, contains the maximum length supported by FileX.*</span></span>

- <span data-ttu-id="82c13-447">**ディレクトリ ファイル名拡張子**</span><span class="sxs-lookup"><span data-stu-id="82c13-447">**Directory Filename Extension**</span></span>

    <span data-ttu-id="82c13-448">標準の 8.3 ファイル名については、FileX では、省略可能な 3 文字の "*ディレクトリ ファイル名拡張子*" もサポートされます。</span><span class="sxs-lookup"><span data-stu-id="82c13-448">For standard 8.3 file names, FileX also supports the optional three-character *directory filename extension*.</span></span> <span data-ttu-id="82c13-449">8 文字のファイル名と同様に、ファイル名拡張子は、ディレクトリ ファイル名拡張子フィールドで左寄せされ、空白で埋められ、常に大文字になります。</span><span class="sxs-lookup"><span data-stu-id="82c13-449">Just like the eight-character file name, filename extensions are left justified in the directory filename extension field, blank padded, and always capitalized.</span></span>

    <span data-ttu-id="82c13-450">**表 3. FileX の 8.3 ディレクトリ エントリ**</span><span class="sxs-lookup"><span data-stu-id="82c13-450">**TABLE 3. FileX 8.3 Directory Entry**</span></span>

    |<span data-ttu-id="82c13-451">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-451">Offset</span></span>|<span data-ttu-id="82c13-452">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-452">Field</span></span>|<span data-ttu-id="82c13-453">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-453">Number of Bytes</span></span>|
    |------------|-----------|------------|
    |<span data-ttu-id="82c13-454">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-454">0x00</span></span>|<span data-ttu-id="82c13-455">ディレクトリ エントリ名</span><span class="sxs-lookup"><span data-stu-id="82c13-455">Directory Entry Name</span></span>|<span data-ttu-id="82c13-456">8</span><span class="sxs-lookup"><span data-stu-id="82c13-456">8</span></span>|
    |<span data-ttu-id="82c13-457">0x08</span><span class="sxs-lookup"><span data-stu-id="82c13-457">0x08</span></span>|<span data-ttu-id="82c13-458">ディレクトリ拡張</span><span class="sxs-lookup"><span data-stu-id="82c13-458">Directory Extension</span></span>|<span data-ttu-id="82c13-459">3</span><span class="sxs-lookup"><span data-stu-id="82c13-459">3</span></span>|
    |<span data-ttu-id="82c13-460">0x0B</span><span class="sxs-lookup"><span data-stu-id="82c13-460">0x0B</span></span>|<span data-ttu-id="82c13-461">属性</span><span class="sxs-lookup"><span data-stu-id="82c13-461">Attributes</span></span>|<span data-ttu-id="82c13-462">1</span><span class="sxs-lookup"><span data-stu-id="82c13-462">1</span></span>|
    |<span data-ttu-id="82c13-463">0x0C</span><span class="sxs-lookup"><span data-stu-id="82c13-463">0x0C</span></span>|<span data-ttu-id="82c13-464">NT (長いファイル名形式で導入され、NT 用に予約されています [常に 0])</span><span class="sxs-lookup"><span data-stu-id="82c13-464">NT (introduced by the long file name format and is reserved for NT [always 0])</span></span>|<span data-ttu-id="82c13-465">1</span><span class="sxs-lookup"><span data-stu-id="82c13-465">1</span></span>|
    |<span data-ttu-id="82c13-466">0x0D</span><span class="sxs-lookup"><span data-stu-id="82c13-466">0x0D</span></span>|<span data-ttu-id="82c13-467">ミリ秒単位の作成時間 (長いファイル名形式で導入され、ファイルが作成されたときのミリ秒数を表します)。</span><span class="sxs-lookup"><span data-stu-id="82c13-467">Created Time in milliseconds ( introduced by the long file name format and represents the number of milliseconds when the file was created.)</span></span>|<span data-ttu-id="82c13-468">1</span><span class="sxs-lookup"><span data-stu-id="82c13-468">1</span></span>|
    |<span data-ttu-id="82c13-469">0x0E</span><span class="sxs-lookup"><span data-stu-id="82c13-469">0x0E</span></span>|<span data-ttu-id="82c13-470">時間と分単位の作成時間 (長いファイル名形式で導入され、ファイルが作成されたときの時間と分を表します)。</span><span class="sxs-lookup"><span data-stu-id="82c13-470">Created Time in hours &amp; minutes (introduced by the long file name format and represents the hour and minute the file was created )</span></span>|<span data-ttu-id="82c13-471">2</span><span class="sxs-lookup"><span data-stu-id="82c13-471">2</span></span>|
    |<span data-ttu-id="82c13-472">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-472">0x10</span></span>|<span data-ttu-id="82c13-473">作成日 (長いファイル名形式で導入され、ファイルが作成されたときの日付を表します)。</span><span class="sxs-lookup"><span data-stu-id="82c13-473">Created Date (introduced by the long file name format and represents the date the file was created.)</span></span>|<span data-ttu-id="82c13-474">2</span><span class="sxs-lookup"><span data-stu-id="82c13-474">2</span></span>|
    |<span data-ttu-id="82c13-475">0x12</span><span class="sxs-lookup"><span data-stu-id="82c13-475">0x12</span></span>|<span data-ttu-id="82c13-476">最終アクセス日 (長いファイル名形式で導入され、ファイルが最後にアクセスされた日付を表します)。</span><span class="sxs-lookup"><span data-stu-id="82c13-476">Last Accessed Date ( introduced by the long file name format and represents the date the file was last accessed.)</span></span>|<span data-ttu-id="82c13-477">2</span><span class="sxs-lookup"><span data-stu-id="82c13-477">2</span></span>|
    |<span data-ttu-id="82c13-478">0x14</span><span class="sxs-lookup"><span data-stu-id="82c13-478">0x14</span></span>|<span data-ttu-id="82c13-479">開始クラスター (上位 16 ビット、FAT-32 のみ)</span><span class="sxs-lookup"><span data-stu-id="82c13-479">Starting Cluster (Upper 16 bits FAT-32 only)</span></span>|<span data-ttu-id="82c13-480">2</span><span class="sxs-lookup"><span data-stu-id="82c13-480">2</span></span>|
    |<span data-ttu-id="82c13-481">0x16</span><span class="sxs-lookup"><span data-stu-id="82c13-481">0x16</span></span>|<span data-ttu-id="82c13-482">更新時刻</span><span class="sxs-lookup"><span data-stu-id="82c13-482">Modified Time</span></span>|<span data-ttu-id="82c13-483">2</span><span class="sxs-lookup"><span data-stu-id="82c13-483">2</span></span>|
    |<span data-ttu-id="82c13-484">0x18</span><span class="sxs-lookup"><span data-stu-id="82c13-484">0x18</span></span>|<span data-ttu-id="82c13-485">更新日</span><span class="sxs-lookup"><span data-stu-id="82c13-485">Modified Date</span></span>|<span data-ttu-id="82c13-486">2</span><span class="sxs-lookup"><span data-stu-id="82c13-486">2</span></span>|
    |<span data-ttu-id="82c13-487">0x1A</span><span class="sxs-lookup"><span data-stu-id="82c13-487">0x1A</span></span>|<span data-ttu-id="82c13-488">開始クラスター (下位 16 ビット、FAT-32 または FAT-12 または FAT-16)</span><span class="sxs-lookup"><span data-stu-id="82c13-488">Starting Cluster (Lower 16 bits FAT-32 or FAT-12 or FAT-16)</span></span>|<span data-ttu-id="82c13-489">2</span><span class="sxs-lookup"><span data-stu-id="82c13-489">2</span></span>|
    |<span data-ttu-id="82c13-490">0x1C</span><span class="sxs-lookup"><span data-stu-id="82c13-490">0x1C</span></span>|<span data-ttu-id="82c13-491">ファイル サイズ</span><span class="sxs-lookup"><span data-stu-id="82c13-491">File Size</span></span>|<span data-ttu-id="82c13-492">4</span><span class="sxs-lookup"><span data-stu-id="82c13-492">4</span></span>|


- <span data-ttu-id="82c13-493">**ディレクトリ属性**</span><span class="sxs-lookup"><span data-stu-id="82c13-493">**Directory Attributes**</span></span>

    <span data-ttu-id="82c13-494">1 バイトの "*ディレクトリ属性*" フィールド エントリには、ディレクトリ エントリのさまざまなプロパティを指定する一連のビットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-494">The one-byte *directory attribute* field entry contains a series of bits that specify various properties of the directory entry.</span></span> <span data-ttu-id="82c13-495">ディレクトリ属性の定義は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="82c13-495">Directory attribute definitions are as follow:</span></span>

    |<span data-ttu-id="82c13-496">属性ビット</span><span class="sxs-lookup"><span data-stu-id="82c13-496">Attribute Bit</span></span>|<span data-ttu-id="82c13-497">説明</span><span class="sxs-lookup"><span data-stu-id="82c13-497">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="82c13-498">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-498">0x01</span></span>|<span data-ttu-id="82c13-499">エントリは読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="82c13-499">Entry is read-only.</span></span>|
    |<span data-ttu-id="82c13-500">0x02</span><span class="sxs-lookup"><span data-stu-id="82c13-500">0x02</span></span>|<span data-ttu-id="82c13-501">エントリは非表示です。</span><span class="sxs-lookup"><span data-stu-id="82c13-501">Entry is hidden.</span></span>|
    |<span data-ttu-id="82c13-502">0x04</span><span class="sxs-lookup"><span data-stu-id="82c13-502">0x04</span></span>|<span data-ttu-id="82c13-503">エントリはシステム エントリです。</span><span class="sxs-lookup"><span data-stu-id="82c13-503">Entry is a system entry.</span></span>|
    |<span data-ttu-id="82c13-504">0x08</span><span class="sxs-lookup"><span data-stu-id="82c13-504">0x08</span></span>|<span data-ttu-id="82c13-505">エントリはボリューム ラベルです</span><span class="sxs-lookup"><span data-stu-id="82c13-505">Entry is a volume label</span></span>|
    |<span data-ttu-id="82c13-506">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-506">0x10</span></span>|<span data-ttu-id="82c13-507">エントリはディレクトリです。</span><span class="sxs-lookup"><span data-stu-id="82c13-507">Entry is a directory.</span></span>|
    |<span data-ttu-id="82c13-508">0x20</span><span class="sxs-lookup"><span data-stu-id="82c13-508">0x20</span></span>|<span data-ttu-id="82c13-509">エントリが変更されました。</span><span class="sxs-lookup"><span data-stu-id="82c13-509">Entry has been modified.</span></span>|

    <span data-ttu-id="82c13-510">すべての属性ビットは相互に排他的であるため、一度に複数の属性ビットが設定されている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-510">Because all the attribute bits are mutually exclusive, there may be more than one attribute bit set at a time.</span></span>

- <span data-ttu-id="82c13-511">**ディレクトリ時間**</span><span class="sxs-lookup"><span data-stu-id="82c13-511">**Directory Time**</span></span>

    <span data-ttu-id="82c13-512">2 バイトの "*ディレクトリ時間*" フィールドには、指定されたディレクトリ エントリが最後に変更された時間、分、および秒が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-512">The two-byte *directory time* field contains the hours, minutes, and seconds of the last change to the specified directory entry.</span></span> <span data-ttu-id="82c13-513">ビット 15 から 11 には時間が含まれます。ビット 10 から 5 には分が含まれます。ビット 4 から 0 には 0.5 秒が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-513">Bits 15 through 11 contain the hours, bits 10 though 5 contain the minutes, and bits 4 though 0 contain the half seconds.</span></span> <span data-ttu-id="82c13-514">実際の秒数は、このフィールドに書き込まれる前に 2 で除算されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-514">Actual seconds are divided by two before being written into this field.</span></span>

- <span data-ttu-id="82c13-515">**ディレクトリ日付**</span><span class="sxs-lookup"><span data-stu-id="82c13-515">**Directory Date**</span></span>

    <span data-ttu-id="82c13-516">2 バイトの "*ディレクトリ日付*" フィールドには、指定されたディレクトリ エントリが最後に変更された年 (1980 年からのオフセット)、月、および日が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-516">The two-byte *directory date* field contains the year (offset from 1980), month, and day of the last change to the specified directory entry.</span></span> <span data-ttu-id="82c13-517">ビット 15 から 9 には年のオフセットが含まれます。ビット 8 から 5 には月のオフセットが含まれます。ビット 4 から 0 には日が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-517">Bits 15 through 9 contain the year offset, bits 8 through 5 contain the month offset, and bits 4 through 0 contain the day.</span></span>

- <span data-ttu-id="82c13-518">**ディレクトリ開始クラスター**</span><span class="sxs-lookup"><span data-stu-id="82c13-518">**Directory Starting Cluster**</span></span>

    <span data-ttu-id="82c13-519">FAT-12 および FAT-16 の場合、このフィールドは 2 バイトを占有します。</span><span class="sxs-lookup"><span data-stu-id="82c13-519">This field occupies 2 bytes for FAT-12 and FAT-16.</span></span> <span data-ttu-id="82c13-520">FAT-32 の場合、このフィールドは 4 バイトを占有します。</span><span class="sxs-lookup"><span data-stu-id="82c13-520">For FAT-32 this field occupies 4 bytes.</span></span> <span data-ttu-id="82c13-521">このフィールドには、エントリ (サブディレクトリまたはファイル) に割り当てられた最初のクラスター番号が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-521">This field contains the first cluster number allocated to the entry (subdirectory or file).</span></span>

    > [!NOTE]
    > <span data-ttu-id="82c13-522">\*FileX では初期クラスターなしで新しいファイルが作成されることに注意してください (開始クラスター フィールド = 0)。これにより、ユーザーは、必要に応じて、新しく作成されたファイルに連続した数のクラスターを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-522">\*Note that FileX creates new files without an initial cluster (starting cluster field equal to zero) to allow users to optionally allocate a contiguous number of clusters for a newly created file.</span></span> *

- <span data-ttu-id="82c13-523">**ディレクトリ ファイル サイズ**</span><span class="sxs-lookup"><span data-stu-id="82c13-523">**Directory File Size**</span></span>

    <span data-ttu-id="82c13-524">4 バイトの "*ディレクトリ* *ファイル サイズ*" フィールドには、ファイルのバイト数が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-524">The four-byte *directory* *file size* field contains the number of bytes in the file.</span></span> <span data-ttu-id="82c13-525">エントリが実際にはサブディレクトリの場合、サイズ フィールドは 0 になります。</span><span class="sxs-lookup"><span data-stu-id="82c13-525">If the entry is really a subdirectory, the size field is zero.</span></span>

### <a name="long-file-name-directory"></a><span data-ttu-id="82c13-526">長いファイル名ディレクトリ</span><span class="sxs-lookup"><span data-stu-id="82c13-526">Long File Name Directory</span></span>

- <span data-ttu-id="82c13-527">**Ordinal**</span><span class="sxs-lookup"><span data-stu-id="82c13-527">**Ordinal**</span></span>

    <span data-ttu-id="82c13-528">LFN エントリの番号を指定する 1 バイトの "*序数*" フィールド。</span><span class="sxs-lookup"><span data-stu-id="82c13-528">The one-byte *ordinal* field that specifies the number of the LFN entry.</span></span> <span data-ttu-id="82c13-529">LFN エントリは逆順に配置されるため、単一の LFN を構成する LFN ディレクトリ エントリの序数値は 1 少なくなります。</span><span class="sxs-lookup"><span data-stu-id="82c13-529">Because LFN entries are positioned in reverse order, the ordinal values of the LFN directory entries comprising a single LFN decrease by one.</span></span> <span data-ttu-id="82c13-530">さらに、8.3 ファイル名の直前にある LFN の序数値は 1 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-530">In addition, the ordinal value of the LFN directly before the 8.3 file name must be one.</span></span>

    <span data-ttu-id="82c13-531">**表 4. 長いファイル名ディレクトリ エントリ**</span><span class="sxs-lookup"><span data-stu-id="82c13-531">**TABLE 4. Long File Name Directory Entry**</span></span>

    | <span data-ttu-id="82c13-532">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-532">Offset</span></span> | <span data-ttu-id="82c13-533">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-533">Field</span></span> | <span data-ttu-id="82c13-534">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-534">Number of Bytes</span></span> |
    |------------|-----------|------------|
    | <span data-ttu-id="82c13-535">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-535">0x00</span></span> | <span data-ttu-id="82c13-536">序数フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-536">Ordinal Field</span></span> | <span data-ttu-id="82c13-537">1</span><span class="sxs-lookup"><span data-stu-id="82c13-537">1</span></span> |
    | <span data-ttu-id="82c13-538">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-538">0x01</span></span> | <span data-ttu-id="82c13-539">Unicode 文字 1</span><span class="sxs-lookup"><span data-stu-id="82c13-539">Unicode Character 1</span></span> | <span data-ttu-id="82c13-540">2</span><span class="sxs-lookup"><span data-stu-id="82c13-540">2</span></span> |
    | <span data-ttu-id="82c13-541">0x03</span><span class="sxs-lookup"><span data-stu-id="82c13-541">0x03</span></span> | <span data-ttu-id="82c13-542">Unicode 文字 2</span><span class="sxs-lookup"><span data-stu-id="82c13-542">Unicode Character 2</span></span> | <span data-ttu-id="82c13-543">2</span><span class="sxs-lookup"><span data-stu-id="82c13-543">2</span></span> |
    | <span data-ttu-id="82c13-544">0x05</span><span class="sxs-lookup"><span data-stu-id="82c13-544">0x05</span></span> | <span data-ttu-id="82c13-545">Unicode 文字 3</span><span class="sxs-lookup"><span data-stu-id="82c13-545">Unicode Character 3</span></span> | <span data-ttu-id="82c13-546">2</span><span class="sxs-lookup"><span data-stu-id="82c13-546">2</span></span> |
    | <span data-ttu-id="82c13-547">0x07</span><span class="sxs-lookup"><span data-stu-id="82c13-547">0x07</span></span> | <span data-ttu-id="82c13-548">Unicode 文字 4</span><span class="sxs-lookup"><span data-stu-id="82c13-548">Unicode Character 4</span></span> | <span data-ttu-id="82c13-549">2</span><span class="sxs-lookup"><span data-stu-id="82c13-549">2</span></span> |
    | <span data-ttu-id="82c13-550">0x09</span><span class="sxs-lookup"><span data-stu-id="82c13-550">0x09</span></span> | <span data-ttu-id="82c13-551">Unicode 文字 5</span><span class="sxs-lookup"><span data-stu-id="82c13-551">Unicode Character 5</span></span> | <span data-ttu-id="82c13-552">2</span><span class="sxs-lookup"><span data-stu-id="82c13-552">2</span></span> |
    | <span data-ttu-id="82c13-553">0x0B</span><span class="sxs-lookup"><span data-stu-id="82c13-553">0x0B</span></span> | <span data-ttu-id="82c13-554">LFN 属性</span><span class="sxs-lookup"><span data-stu-id="82c13-554">LFN Attributes</span></span> | <span data-ttu-id="82c13-555">1</span><span class="sxs-lookup"><span data-stu-id="82c13-555">1</span></span> |
    | <span data-ttu-id="82c13-556">0x0C</span><span class="sxs-lookup"><span data-stu-id="82c13-556">0x0C</span></span> | <span data-ttu-id="82c13-557">LFN の種類 (予約済み。常に 0)</span><span class="sxs-lookup"><span data-stu-id="82c13-557">LFN Type (Reserved always 0)</span></span> | <span data-ttu-id="82c13-558">1</span><span class="sxs-lookup"><span data-stu-id="82c13-558">1</span></span> |
    | <span data-ttu-id="82c13-559">0x0D</span><span class="sxs-lookup"><span data-stu-id="82c13-559">0x0D</span></span> | <span data-ttu-id="82c13-560">LFN チェックサム</span><span class="sxs-lookup"><span data-stu-id="82c13-560">LFN Checksum</span></span> | <span data-ttu-id="82c13-561">1</span><span class="sxs-lookup"><span data-stu-id="82c13-561">1</span></span> |
    | <span data-ttu-id="82c13-562">0x0E</span><span class="sxs-lookup"><span data-stu-id="82c13-562">0x0E</span></span> | <span data-ttu-id="82c13-563">Unicode 文字 6</span><span class="sxs-lookup"><span data-stu-id="82c13-563">Unicode Character 6</span></span> | <span data-ttu-id="82c13-564">2</span><span class="sxs-lookup"><span data-stu-id="82c13-564">2</span></span> | 
    | <span data-ttu-id="82c13-565">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-565">0x10</span></span> | <span data-ttu-id="82c13-566">Unicode 文字 7</span><span class="sxs-lookup"><span data-stu-id="82c13-566">Unicode Character 7</span></span> | <span data-ttu-id="82c13-567">2</span><span class="sxs-lookup"><span data-stu-id="82c13-567">2</span></span> |
    | <span data-ttu-id="82c13-568">0x12</span><span class="sxs-lookup"><span data-stu-id="82c13-568">0x12</span></span> | <span data-ttu-id="82c13-569">Unicode 文字 8</span><span class="sxs-lookup"><span data-stu-id="82c13-569">Unicode Character 8</span></span> | <span data-ttu-id="82c13-570">2</span><span class="sxs-lookup"><span data-stu-id="82c13-570">2</span></span> |
    | <span data-ttu-id="82c13-571">0x14</span><span class="sxs-lookup"><span data-stu-id="82c13-571">0x14</span></span> | <span data-ttu-id="82c13-572">Unicode 文字 9</span><span class="sxs-lookup"><span data-stu-id="82c13-572">Unicode Character 9</span></span> | <span data-ttu-id="82c13-573">2</span><span class="sxs-lookup"><span data-stu-id="82c13-573">2</span></span> |
    | <span data-ttu-id="82c13-574">0x16</span><span class="sxs-lookup"><span data-stu-id="82c13-574">0x16</span></span> | <span data-ttu-id="82c13-575">Unicode 文字 10</span><span class="sxs-lookup"><span data-stu-id="82c13-575">Unicode Character 10</span></span> | <span data-ttu-id="82c13-576">2</span><span class="sxs-lookup"><span data-stu-id="82c13-576">2</span></span> |
    | <span data-ttu-id="82c13-577">0x18</span><span class="sxs-lookup"><span data-stu-id="82c13-577">0x18</span></span> | <span data-ttu-id="82c13-578">Unicode 文字 11</span><span class="sxs-lookup"><span data-stu-id="82c13-578">Unicode Character 11</span></span> | <span data-ttu-id="82c13-579">2</span><span class="sxs-lookup"><span data-stu-id="82c13-579">2</span></span> |
    | <span data-ttu-id="82c13-580">0x1A</span><span class="sxs-lookup"><span data-stu-id="82c13-580">0x1A</span></span> | <span data-ttu-id="82c13-581">LFN クラスター (使用しない。常に 0)</span><span class="sxs-lookup"><span data-stu-id="82c13-581">LFN Cluster (unused always 0)</span></span> | <span data-ttu-id="82c13-582">2</span><span class="sxs-lookup"><span data-stu-id="82c13-582">2</span></span> |
    | <span data-ttu-id="82c13-583">0x1C</span><span class="sxs-lookup"><span data-stu-id="82c13-583">0x1C</span></span> | <span data-ttu-id="82c13-584">Unicode 文字 12</span><span class="sxs-lookup"><span data-stu-id="82c13-584">Unicode Character 12</span></span> | <span data-ttu-id="82c13-585">2</span><span class="sxs-lookup"><span data-stu-id="82c13-585">2</span></span> |
    | <span data-ttu-id="82c13-586">0x1E</span><span class="sxs-lookup"><span data-stu-id="82c13-586">0x1E</span></span> | <span data-ttu-id="82c13-587">Unicode 文字 13</span><span class="sxs-lookup"><span data-stu-id="82c13-587">Unicode Character 13</span></span> | <span data-ttu-id="82c13-588">2</span><span class="sxs-lookup"><span data-stu-id="82c13-588">2</span></span> |

- <span data-ttu-id="82c13-589">**Unicode 文字**</span><span class="sxs-lookup"><span data-stu-id="82c13-589">**Unicode Character**</span></span>

    <span data-ttu-id="82c13-590">2 バイトの "*Unicode 文字*" フィールドは、多くの異なる言語の文字をサポートするように設計されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-590">The two-byte *Unicode Character* fields are designed to support characters from many different languages.</span></span> <span data-ttu-id="82c13-591">標準 ASCII 文字は、Unicode 文字の最初のバイトに格納されている ASCII 文字とそれに続く空白文字で表されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-591">Standard ASCII characters are represented with the ASCII character stored in the first byte of the Unicode character followed by a space character.</span></span>

- <span data-ttu-id="82c13-592">**LFN 属性**</span><span class="sxs-lookup"><span data-stu-id="82c13-592">**LFN Attributes**</span></span>

    <span data-ttu-id="82c13-593">1 バイトの "*LFN 属性*" フィールドには、ディレクトリ エントリを LFN ディレクトリ エントリとして識別する属性が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-593">The one-byte *LFN Attributes* field contains attributes that identify the directory entry as an LFN directory entry.</span></span> <span data-ttu-id="82c13-594">これは、読み取り専用、システム、非表示、およびボリュームの属性をすべて設定することによって実現されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-594">This is accomplished by having the read-only, system, hidden, and volume attributes all set.</span></span>

- <span data-ttu-id="82c13-595">**LFN の種類**</span><span class="sxs-lookup"><span data-stu-id="82c13-595">**LFN Type**</span></span>

    <span data-ttu-id="82c13-596">1 バイトの "*LFN の種類*" フィールドは予約されており、常に 0 です。</span><span class="sxs-lookup"><span data-stu-id="82c13-596">The one-byte *LFN Type* field is reserved and is always 0.</span></span>

- <span data-ttu-id="82c13-597">**LFN チェックサム**</span><span class="sxs-lookup"><span data-stu-id="82c13-597">**LFN Checksum**</span></span>

    <span data-ttu-id="82c13-598">1 バイトの "*LFN チェックサム*" フィールドは、関連付けられている MSDOS 8.3 ファイル名の 11 文字のチェックサムを表します。</span><span class="sxs-lookup"><span data-stu-id="82c13-598">The one-byte *LFN Checksum* field represents a checksum of the 11 characters of the associated MSDOS 8.3 file name.</span></span> <span data-ttu-id="82c13-599">このチェックサムは、LFN エントリが適切な 8.3 ファイル名に対応していることを確認するために、各 LFN エントリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-599">This checksum is stored in each LFN entry to help ensure the LFN entry corresponds to the appropriate 8.3 file name.</span></span>

- <span data-ttu-id="82c13-600">**LFN クラスター**</span><span class="sxs-lookup"><span data-stu-id="82c13-600">**LFN Cluster**</span></span>

    <span data-ttu-id="82c13-601">2 バイトの "*LFN クラスター*" フィールドは使用されておらず、常に 0 です。</span><span class="sxs-lookup"><span data-stu-id="82c13-601">The two-byte *LFN Cluster* field is unused and is always 0.</span></span>

    <span data-ttu-id="82c13-602">**表 5. 39 文字の LFN を構成するディレクトリ エントリ**</span><span class="sxs-lookup"><span data-stu-id="82c13-602">**TABLE 5. Directory Entries Comprising a 39-Character LFN**</span></span>

    |<span data-ttu-id="82c13-603">入力</span><span class="sxs-lookup"><span data-stu-id="82c13-603">Entry</span></span>|<span data-ttu-id="82c13-604">説明</span><span class="sxs-lookup"><span data-stu-id="82c13-604">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="82c13-605">1</span><span class="sxs-lookup"><span data-stu-id="82c13-605">1</span></span>|<span data-ttu-id="82c13-606">LFN ディレクトリ エントリ 3</span><span class="sxs-lookup"><span data-stu-id="82c13-606">LFN Directory Entry 3</span></span>|
    |<span data-ttu-id="82c13-607">2</span><span class="sxs-lookup"><span data-stu-id="82c13-607">2</span></span>|<span data-ttu-id="82c13-608">LFN ディレクトリ エントリ 2</span><span class="sxs-lookup"><span data-stu-id="82c13-608">LFN Directory Entry 2</span></span>|
    |<span data-ttu-id="82c13-609">3</span><span class="sxs-lookup"><span data-stu-id="82c13-609">3</span></span>|<span data-ttu-id="82c13-610">LFN ディレクトリ エントリ 1</span><span class="sxs-lookup"><span data-stu-id="82c13-610">LFN Directory Entry 1</span></span>|
    |<span data-ttu-id="82c13-611">4</span><span class="sxs-lookup"><span data-stu-id="82c13-611">4</span></span>|<span data-ttu-id="82c13-612">8.3 ディレクトリ エントリ (ttttt~n.xx)</span><span class="sxs-lookup"><span data-stu-id="82c13-612">8.3 Directory Entry (ttttt~n.xx)</span></span>|

### <a name="exfat-directory-description"></a><span data-ttu-id="82c13-613">exFAT のディレクトリの説明</span><span class="sxs-lookup"><span data-stu-id="82c13-613">exFAT Directory Description</span></span>

<span data-ttu-id="82c13-614">exFAT ファイル システムでは、ディレクトリ エントリとファイル名が異なる方法で格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-614">exFAT file system stores directory entry and file name differently.</span></span> <span data-ttu-id="82c13-615">ディレクトリ エントリには、エントリの属性や、エントリが作成、変更、およびアクセスされたときのさまざまなタイムスタンプが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-615">Directory entry contains the entry's attributes, various timestamps on when the entry was created, modified, and accessed.</span></span> <span data-ttu-id="82c13-616">ファイル サイズや開始クラスターなどの他の情報は、プライマリ ディレクトリ エントリの直後にあるストリーム拡張ディレクトリ エントリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-616">Other information, such as file size and starting cluster, is stored in Stream Extension Directory Entry which immediately follows the primary directory entry.</span></span> <span data-ttu-id="82c13-617">exFAT では、長いファイル名 (LFN) 名形式のみがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="82c13-617">exFAT supports only Long File Name (LFN) name format.</span></span> <span data-ttu-id="82c13-618">これは、表 2 に示すように、ファイル名ディレクトリ エントリの直後にあるストリーム拡張ディレクトリ エントリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-618">which is stored in File Name Directory Entry immediately follows the Stream Extension Directory Entry, as shown in Table 2.</span></span>

### <a name="exfat-file-directory-entry"></a><span data-ttu-id="82c13-619">exFAT ファイル ディレクトリ エントリ</span><span class="sxs-lookup"><span data-stu-id="82c13-619">exFAT File Directory Entry</span></span>

<span data-ttu-id="82c13-620">exFAT ファイル ディレクトリ エントリとその内容について、次の表と段落で説明します。</span><span class="sxs-lookup"><span data-stu-id="82c13-620">A description of exFAT file directory entry and its contents is included in the following table and paragraphs.</span></span>

- <span data-ttu-id="82c13-621">**[エントリの種類]**</span><span class="sxs-lookup"><span data-stu-id="82c13-621">**Entry Type**</span></span>

    <span data-ttu-id="82c13-622">エントリの種類フィールドは、このエントリの種類を示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-622">The entry type field indicates the type of this entry.</span></span> <span data-ttu-id="82c13-623">ファイル ディレクトリ エントリの場合、このフィールドは 0x85 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-623">For File Directory Entry, this field must be 0x85.</span></span>

- <span data-ttu-id="82c13-624">**セカンダリ エントリの数**</span><span class="sxs-lookup"><span data-stu-id="82c13-624">**Secondary Entry Count**</span></span>

    <span data-ttu-id="82c13-625">"*セカンダリ エントリの数*" フィールドは、このプライマリ エントリの直後にあるセカンダリ エントリの数を示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-625">The *secondary entry count* field indicates the number of secondary entries immediately follows this primary entry.</span></span> <span data-ttu-id="82c13-626">ファイル ディレクトリ エントリに関連付けられたセカンダリ エントリには、1 つのストリーム拡張ディレクトリ エントリと 1 つ以上のファイル名ディレクトリ エントリが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-626">Secondary entries associated with the file directory entry include one stream extension directory entry and one or more file name directory entries.</span></span>

    <span data-ttu-id="82c13-627">**表 6. exFAT ファイル ディレクトリ エントリ**</span><span class="sxs-lookup"><span data-stu-id="82c13-627">**TABLE 6. exFAT File Directory Entry**</span></span>

    |<span data-ttu-id="82c13-628">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-628">Offset</span></span>|<span data-ttu-id="82c13-629">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-629">Field</span></span>|<span data-ttu-id="82c13-630">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-630">Number of Bytes</span></span>|
    |----|-----------|-|
    |<span data-ttu-id="82c13-631">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-631">0x00</span></span>|<span data-ttu-id="82c13-632">[エントリの種類]</span><span class="sxs-lookup"><span data-stu-id="82c13-632">Entry Type</span></span>|<span data-ttu-id="82c13-633">1</span><span class="sxs-lookup"><span data-stu-id="82c13-633">1</span></span>|
    |<span data-ttu-id="82c13-634">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-634">0x01</span></span>|<span data-ttu-id="82c13-635">セカンダリ エントリ</span><span class="sxs-lookup"><span data-stu-id="82c13-635">Secondary Entry</span></span>|<span data-ttu-id="82c13-636">1</span><span class="sxs-lookup"><span data-stu-id="82c13-636">1</span></span>|
    |<span data-ttu-id="82c13-637">0x02</span><span class="sxs-lookup"><span data-stu-id="82c13-637">0x02</span></span>|<span data-ttu-id="82c13-638">Checksum</span><span class="sxs-lookup"><span data-stu-id="82c13-638">Checksum</span></span>|<span data-ttu-id="82c13-639">2</span><span class="sxs-lookup"><span data-stu-id="82c13-639">2</span></span>|
    |<span data-ttu-id="82c13-640">0x04</span><span class="sxs-lookup"><span data-stu-id="82c13-640">0x04</span></span>|<span data-ttu-id="82c13-641">ファイル属性</span><span class="sxs-lookup"><span data-stu-id="82c13-641">File Attributes</span></span>|<span data-ttu-id="82c13-642">2</span><span class="sxs-lookup"><span data-stu-id="82c13-642">2</span></span>|
    |<span data-ttu-id="82c13-643">0x06</span><span class="sxs-lookup"><span data-stu-id="82c13-643">0x06</span></span>|<span data-ttu-id="82c13-644">予約済み 1</span><span class="sxs-lookup"><span data-stu-id="82c13-644">Reserved 1</span></span>|<span data-ttu-id="82c13-645">2</span><span class="sxs-lookup"><span data-stu-id="82c13-645">2</span></span>|
    |<span data-ttu-id="82c13-646">0x08</span><span class="sxs-lookup"><span data-stu-id="82c13-646">0x08</span></span>|<span data-ttu-id="82c13-647">[タイムスタンプの作成]</span><span class="sxs-lookup"><span data-stu-id="82c13-647">Create Timestamp</span></span>|<span data-ttu-id="82c13-648">4</span><span class="sxs-lookup"><span data-stu-id="82c13-648">4</span></span>|
    |<span data-ttu-id="82c13-649">0x0C</span><span class="sxs-lookup"><span data-stu-id="82c13-649">0x0C</span></span>|<span data-ttu-id="82c13-650">最終変更タイムスタンプ</span><span class="sxs-lookup"><span data-stu-id="82c13-650">Last Modified Timestamp</span></span>|<span data-ttu-id="82c13-651">4</span><span class="sxs-lookup"><span data-stu-id="82c13-651">4</span></span>|
    |<span data-ttu-id="82c13-652">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-652">0x10</span></span>|<span data-ttu-id="82c13-653">最終アクセス タイムスタンプ</span><span class="sxs-lookup"><span data-stu-id="82c13-653">Last Accessed Timestamp</span></span>|<span data-ttu-id="82c13-654">4</span><span class="sxs-lookup"><span data-stu-id="82c13-654">4</span></span>|
    |<span data-ttu-id="82c13-655">0x14</span><span class="sxs-lookup"><span data-stu-id="82c13-655">0x14</span></span>|<span data-ttu-id="82c13-656">作成 (10 ミリ秒増分)</span><span class="sxs-lookup"><span data-stu-id="82c13-656">Create 10ms Increment</span></span>|<span data-ttu-id="82c13-657">1</span><span class="sxs-lookup"><span data-stu-id="82c13-657">1</span></span>|
    |<span data-ttu-id="82c13-658">0x15</span><span class="sxs-lookup"><span data-stu-id="82c13-658">0x15</span></span>|<span data-ttu-id="82c13-659">最終変更 (10 ミリ秒増分)</span><span class="sxs-lookup"><span data-stu-id="82c13-659">Last Modified 10ms Increment</span></span>|<span data-ttu-id="82c13-660">1</span><span class="sxs-lookup"><span data-stu-id="82c13-660">1</span></span>|
    |<span data-ttu-id="82c13-661">0x16</span><span class="sxs-lookup"><span data-stu-id="82c13-661">0x16</span></span>|<span data-ttu-id="82c13-662">作成 (UTC オフセット)</span><span class="sxs-lookup"><span data-stu-id="82c13-662">Create UTC Offset</span></span>|<span data-ttu-id="82c13-663">1</span><span class="sxs-lookup"><span data-stu-id="82c13-663">1</span></span>|
    |<span data-ttu-id="82c13-664">0x17</span><span class="sxs-lookup"><span data-stu-id="82c13-664">0x17</span></span>|<span data-ttu-id="82c13-665">最終変更 (UTC オフセット)</span><span class="sxs-lookup"><span data-stu-id="82c13-665">Last Modified UTC Offset</span></span>|<span data-ttu-id="82c13-666">1</span><span class="sxs-lookup"><span data-stu-id="82c13-666">1</span></span>|
    |<span data-ttu-id="82c13-667">0x18</span><span class="sxs-lookup"><span data-stu-id="82c13-667">0x18</span></span>|<span data-ttu-id="82c13-668">最終アクセス (UTC オフセット)</span><span class="sxs-lookup"><span data-stu-id="82c13-668">Last Access UTC Offset</span></span>|<span data-ttu-id="82c13-669">1</span><span class="sxs-lookup"><span data-stu-id="82c13-669">1</span></span>|
    |<span data-ttu-id="82c13-670">0x19</span><span class="sxs-lookup"><span data-stu-id="82c13-670">0x19</span></span>|<span data-ttu-id="82c13-671">予約済み 2</span><span class="sxs-lookup"><span data-stu-id="82c13-671">Reserved 2</span></span>|<span data-ttu-id="82c13-672">7</span><span class="sxs-lookup"><span data-stu-id="82c13-672">7</span></span>|

- <span data-ttu-id="82c13-673">**チェックサム**</span><span class="sxs-lookup"><span data-stu-id="82c13-673">**Checksum**</span></span>

    <span data-ttu-id="82c13-674">"*チェックサム*" フィールドには、ディレクトリ エントリ セット内のすべてのエントリ (ファイル ディレクトリ エントリとそのセカンダリ エントリ) に対するチェックサムの値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-674">The *checksum* field contains the value of the checksum over all entries in the directory entry set (the file directory entry and its secondary entries).</span></span>

- <span data-ttu-id="82c13-675">**ファイル属性**</span><span class="sxs-lookup"><span data-stu-id="82c13-675">**File Attributes**</span></span>

    <span data-ttu-id="82c13-676">1 バイトの属性フィールド エントリには、ディレクトリ エントリのさまざまなプロパティを指定する一連のビットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-676">The one-byte attributes field entry contains a series of bits that specify various properties of the directory entry.</span></span> <span data-ttu-id="82c13-677">ほとんどの属性ビットの定義は、FAT 12、16、32 と同じです。</span><span class="sxs-lookup"><span data-stu-id="82c13-677">The definition of most attributes bits is identical to FAT 12/16/32.</span></span> <span data-ttu-id="82c13-678">ディレクトリ属性の定義は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="82c13-678">Directory attribute definitions are as follows:</span></span>

    |<span data-ttu-id="82c13-679">属性ビット</span><span class="sxs-lookup"><span data-stu-id="82c13-679">Attribute Bit</span></span>|<span data-ttu-id="82c13-680">説明</span><span class="sxs-lookup"><span data-stu-id="82c13-680">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="82c13-681">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-681">0x01</span></span>| <span data-ttu-id="82c13-682">エントリは読み取り専用です</span><span class="sxs-lookup"><span data-stu-id="82c13-682">Entry is read-only</span></span>|
    |<span data-ttu-id="82c13-683">0x02</span><span class="sxs-lookup"><span data-stu-id="82c13-683">0x02</span></span>|<span data-ttu-id="82c13-684">エントリは非表示です</span><span class="sxs-lookup"><span data-stu-id="82c13-684">Entry is hidden</span></span>|
    |<span data-ttu-id="82c13-685">0x04</span><span class="sxs-lookup"><span data-stu-id="82c13-685">0x04</span></span>|<span data-ttu-id="82c13-686">エントリはシステム エントリです</span><span class="sxs-lookup"><span data-stu-id="82c13-686">Entry is a system entry</span></span>|
    |<span data-ttu-id="82c13-687">0x08</span><span class="sxs-lookup"><span data-stu-id="82c13-687">0x08</span></span>|<span data-ttu-id="82c13-688">エントリは予約されています</span><span class="sxs-lookup"><span data-stu-id="82c13-688">Entry is reserved</span></span>|
    |<span data-ttu-id="82c13-689">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-689">0x10</span></span>|<span data-ttu-id="82c13-690">エントリはディレクトリです</span><span class="sxs-lookup"><span data-stu-id="82c13-690">Entry is a directory</span></span>|
    |<span data-ttu-id="82c13-691">0x20</span><span class="sxs-lookup"><span data-stu-id="82c13-691">0x20</span></span>|<span data-ttu-id="82c13-692">エントリが変更されました</span><span class="sxs-lookup"><span data-stu-id="82c13-692">Entry has been modified</span></span>|
    |<span data-ttu-id="82c13-693">他のすべてのビット</span><span class="sxs-lookup"><span data-stu-id="82c13-693">All other bits</span></span>|<span data-ttu-id="82c13-694">予約されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-694">Reserved</span></span>|

- <span data-ttu-id="82c13-695">**Reserved1**</span><span class="sxs-lookup"><span data-stu-id="82c13-695">**Reserved1**</span></span>

    <span data-ttu-id="82c13-696">このフィールドは 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-696">This field should be zero.</span></span>

- <span data-ttu-id="82c13-697">**[タイムスタンプの作成]**</span><span class="sxs-lookup"><span data-stu-id="82c13-697">**Create Timestamp**</span></span>

    <span data-ttu-id="82c13-698">"*作成タイムスタンプ*" フィールドと "*作成 (10 ミリ秒増分)* " フィールドの情報を組み合わせて、ファイルまたはディレクトリが作成された現地の日付と時刻を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-698">The *create timestamp* field, combining information from the *create 10ms Increment* field, describes the local date and time the file or the directory was created.</span></span>

- <span data-ttu-id="82c13-699">**最終変更タイムスタンプ**</span><span class="sxs-lookup"><span data-stu-id="82c13-699">**Last Modified Timestamp**</span></span>

    <span data-ttu-id="82c13-700">"*最終変更タイムスタンプ*" フィールドと "*最終変更 (10 ミリ秒増分)* " フィールドの情報を組み合わせて、ファイルまたはディレクトリが最後に変更された現地の日付と時刻を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-700">The *last modified timestamp* field, combining information from the *last modified 10ms increment* field, describe the local date and time the file or the directory was last modified.</span></span> <span data-ttu-id="82c13-701">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-701">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-702">**最終アクセス タイムスタンプ**</span><span class="sxs-lookup"><span data-stu-id="82c13-702">**Last Accessed Timestamp**</span></span>

    <span data-ttu-id="82c13-703">"*最終アクセス タイムスタンプ*" フィールドは、ファイルまたはディレクトリが最後にアクセスされた現地の日付と時刻を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-703">The *last accessed timestamp* field describes the local date and time the file or the directory was last accessed.</span></span> <span data-ttu-id="82c13-704">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-704">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-705">**作成 (10 ミリ秒増分)**</span><span class="sxs-lookup"><span data-stu-id="82c13-705">**Create 10ms Increment**</span></span>

    <span data-ttu-id="82c13-706">"*作成 (10 ミリ秒増分)* " フィールドと "*作成タイムスタンプ*" フィールドの情報を組み合わせて、ファイルまたはディレクトリが作成された現地の日付と時刻を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-706">The *create 10ms increment* field, combining information from the *create timestamp* field, describes the local date and time the file or the directory was created.</span></span> <span data-ttu-id="82c13-707">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-707">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-708">**最終変更 (10 ミリ秒増分)**</span><span class="sxs-lookup"><span data-stu-id="82c13-708">**Last Modified 10ms Increment**</span></span>

    <span data-ttu-id="82c13-709">"*最終変更 (10 ミリ秒増分)* " フィールドと "*最終変更タイムスタンプ*" フィールドの情報を組み合わせて、ファイルまたはディレクトリが最後に変更された現地の日付と時刻を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-709">The *last modified 10ms increment* field, combining information from the *last modified timestamp* field, describe the local date and time the file or the directory was last modified.</span></span> <span data-ttu-id="82c13-710">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-710">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-711">**作成 (UTC オフセット)**</span><span class="sxs-lookup"><span data-stu-id="82c13-711">**Create UTC Offset**</span></span>

    <span data-ttu-id="82c13-712">"*作成 (UTC オフセット)* " フィールドは、ファイルまたはディレクトリが作成されたときの現地時刻と UTC 時刻の差を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-712">The *create UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was created.</span></span> <span data-ttu-id="82c13-713">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-713">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-714">**最終変更 (UTC オフセット)**</span><span class="sxs-lookup"><span data-stu-id="82c13-714">**Last Modified UTC Offset**</span></span>

    <span data-ttu-id="82c13-715">"*最終変更 (UTC オフセット)* " フィールドは、ファイルまたはディレクトリが最後に変更されたときの現地時刻と UTC 時刻の差を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-715">The *last modified UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was last modified.</span></span> <span data-ttu-id="82c13-716">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-716">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-717">**最終アクセス (UTC オフセット)**</span><span class="sxs-lookup"><span data-stu-id="82c13-717">**Last Accessed UTC Offset**</span></span>

    <span data-ttu-id="82c13-718">"*最終アクセス (UTC オフセット)* " フィールドは、ファイルまたはディレクトリが最後にアクセスされたときの現地時刻と UTC 時刻の差を記述します。</span><span class="sxs-lookup"><span data-stu-id="82c13-718">The *last accessed UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was last accessed.</span></span> <span data-ttu-id="82c13-719">タイムスタンプについては、以下のメモを参照してください。</span><span class="sxs-lookup"><span data-stu-id="82c13-719">See notes below on timestamps.</span></span>

- <span data-ttu-id="82c13-720">**Reserved2**</span><span class="sxs-lookup"><span data-stu-id="82c13-720">**Reserved2**</span></span>

    <span data-ttu-id="82c13-721">このフィールドは 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-721">This field should be zero.</span></span>

### <a name="notes-on-timestamps"></a><span data-ttu-id="82c13-722">タイムスタンプに関するメモ</span><span class="sxs-lookup"><span data-stu-id="82c13-722">Notes on Timestamps</span></span>

- <span data-ttu-id="82c13-723">**タイムスタンプ エントリ**: タイムスタンプ フィールドは次のように解釈されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-723">**Timestamp Entry** The timestamp fields are interpreted as follows:</span></span>

- <span data-ttu-id="82c13-724">**10 ミリ秒増分フィールド**: 10 ミリ秒増分フィールドの値により、タイムスタンプ値により細かな細分性が提供されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-724">**10ms Increment Fields** The value in the 10ms increment field provides finer granularity to the timestamp value.</span></span> <span data-ttu-id="82c13-725">有効な値は、0 (0 ミリ秒) から 199 (1,990 ミリ秒) です。</span><span class="sxs-lookup"><span data-stu-id="82c13-725">The valid values are between 0 (0ms) and 199 (1990ms).</span></span>

     ![10 ミリ秒増分フィールド](./media/user-guide/10ms-increment-fields.png)

- <span data-ttu-id="82c13-727">**UTC オフセット フィールド**</span><span class="sxs-lookup"><span data-stu-id="82c13-727">**UTC Offset Field**</span></span>

     ![UTC オフセット フィールド](./media/user-guide/utc-offset-field.png)

- <span data-ttu-id="82c13-729">**オフセット値**</span><span class="sxs-lookup"><span data-stu-id="82c13-729">**Offset Value**</span></span>

    <span data-ttu-id="82c13-730">7 ビット符号付き整数は、UTC 時刻からのオフセットを 15 分単位で表します。</span><span class="sxs-lookup"><span data-stu-id="82c13-730">7-bit signed integer represents offset from UTC time, in 15 minutes increments.</span></span>

- <span data-ttu-id="82c13-731">**有効**</span><span class="sxs-lookup"><span data-stu-id="82c13-731">**Valid**</span></span>

    <span data-ttu-id="82c13-732">オフセット フィールドの値が有効かどうか。</span><span class="sxs-lookup"><span data-stu-id="82c13-732">Whether or not the value in the offset field is valid.</span></span> <span data-ttu-id="82c13-733">0 は、オフセット値フィールドの値が無効であることを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-733">0 indicates the value in the offset value field is invalid.</span></span> <span data-ttu-id="82c13-734">1 は、値が有効であることを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-734">1 indicates the value is valid.</span></span>

### <a name="stream-extension-directory-entry"></a><span data-ttu-id="82c13-735">ストリーム拡張ディレクトリ エントリ</span><span class="sxs-lookup"><span data-stu-id="82c13-735">Stream Extension Directory Entry</span></span>

<span data-ttu-id="82c13-736">ストリーム拡張ディレクトリ エントリとその内容について、次の表で説明します。</span><span class="sxs-lookup"><span data-stu-id="82c13-736">A description of Stream Extension Directory Entry and its contents is included in the following table.</span></span>

<span data-ttu-id="82c13-737">**表 7. ストリーム拡張ディレクトリ エントリ**</span><span class="sxs-lookup"><span data-stu-id="82c13-737">**TABLE 7. Stream Extension Directory Entry**</span></span>

|<span data-ttu-id="82c13-738">Offset</span><span class="sxs-lookup"><span data-stu-id="82c13-738">Offset</span></span>|<span data-ttu-id="82c13-739">フィールド</span><span class="sxs-lookup"><span data-stu-id="82c13-739">Field</span></span>| <span data-ttu-id="82c13-740">バイト数</span><span class="sxs-lookup"><span data-stu-id="82c13-740">Number of Bytes</span></span>|
|------------|-----------|-------|
|<span data-ttu-id="82c13-741">0x00</span><span class="sxs-lookup"><span data-stu-id="82c13-741">0x00</span></span>|<span data-ttu-id="82c13-742">[エントリの種類]</span><span class="sxs-lookup"><span data-stu-id="82c13-742">Entry Type</span></span>|<span data-ttu-id="82c13-743">1</span><span class="sxs-lookup"><span data-stu-id="82c13-743">1</span></span>|
|<span data-ttu-id="82c13-744">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-744">0x01</span></span>|<span data-ttu-id="82c13-745">フラグ</span><span class="sxs-lookup"><span data-stu-id="82c13-745">Flags</span></span>|<span data-ttu-id="82c13-746">1</span><span class="sxs-lookup"><span data-stu-id="82c13-746">1</span></span>|
|<span data-ttu-id="82c13-747">0x02</span><span class="sxs-lookup"><span data-stu-id="82c13-747">0x02</span></span>|<span data-ttu-id="82c13-748">予約済み 1</span><span class="sxs-lookup"><span data-stu-id="82c13-748">Reserved 1</span></span>|<span data-ttu-id="82c13-749">1</span><span class="sxs-lookup"><span data-stu-id="82c13-749">1</span></span>|
|<span data-ttu-id="82c13-750">0x03</span><span class="sxs-lookup"><span data-stu-id="82c13-750">0x03</span></span>|<span data-ttu-id="82c13-751">名前の長さ</span><span class="sxs-lookup"><span data-stu-id="82c13-751">Name Length</span></span>|<span data-ttu-id="82c13-752">1</span><span class="sxs-lookup"><span data-stu-id="82c13-752">1</span></span>|
|<span data-ttu-id="82c13-753">0x04</span><span class="sxs-lookup"><span data-stu-id="82c13-753">0x04</span></span>|<span data-ttu-id="82c13-754">名前ハッシュ</span><span class="sxs-lookup"><span data-stu-id="82c13-754">Name Hash</span></span>|<span data-ttu-id="82c13-755">2</span><span class="sxs-lookup"><span data-stu-id="82c13-755">2</span></span>|
|<span data-ttu-id="82c13-756">0x06</span><span class="sxs-lookup"><span data-stu-id="82c13-756">0x06</span></span>|<span data-ttu-id="82c13-757">予約済み 2</span><span class="sxs-lookup"><span data-stu-id="82c13-757">Reserved 2</span></span>|<span data-ttu-id="82c13-758">2</span><span class="sxs-lookup"><span data-stu-id="82c13-758">2</span></span>|
|<span data-ttu-id="82c13-759">0x08</span><span class="sxs-lookup"><span data-stu-id="82c13-759">0x08</span></span>|<span data-ttu-id="82c13-760">有効なデータの長さ</span><span class="sxs-lookup"><span data-stu-id="82c13-760">Valid Data Length</span></span>|<span data-ttu-id="82c13-761">8</span><span class="sxs-lookup"><span data-stu-id="82c13-761">8</span></span>|
|<span data-ttu-id="82c13-762">0x10</span><span class="sxs-lookup"><span data-stu-id="82c13-762">0x10</span></span>|<span data-ttu-id="82c13-763">予約済み 3</span><span class="sxs-lookup"><span data-stu-id="82c13-763">Reserved 3</span></span>|<span data-ttu-id="82c13-764">4</span><span class="sxs-lookup"><span data-stu-id="82c13-764">4</span></span>|
|<span data-ttu-id="82c13-765">0x14</span><span class="sxs-lookup"><span data-stu-id="82c13-765">0x14</span></span>|<span data-ttu-id="82c13-766">最初のクラスター</span><span class="sxs-lookup"><span data-stu-id="82c13-766">First Cluster</span></span>|<span data-ttu-id="82c13-767">4</span><span class="sxs-lookup"><span data-stu-id="82c13-767">4</span></span>|
|<span data-ttu-id="82c13-768">0x18</span><span class="sxs-lookup"><span data-stu-id="82c13-768">0x18</span></span>|<span data-ttu-id="82c13-769">データの長さ</span><span class="sxs-lookup"><span data-stu-id="82c13-769">Data Length</span></span>|<span data-ttu-id="82c13-770">8</span><span class="sxs-lookup"><span data-stu-id="82c13-770">8</span></span>|

- <span data-ttu-id="82c13-771">**[エントリの種類]**</span><span class="sxs-lookup"><span data-stu-id="82c13-771">**Entry Type**</span></span>

    <span data-ttu-id="82c13-772">"*エントリの種類*" フィールドは、このエントリの種類を示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-772">The *entry type* field indicates the type of this entry.</span></span> <span data-ttu-id="82c13-773">ストリーミング拡張ディレクトリ エントリの場合、このフィールドは 0xC0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-773">For streaming extension Directory Entry, this field must be 0xC0.</span></span>

- <span data-ttu-id="82c13-774">**フラグ**</span><span class="sxs-lookup"><span data-stu-id="82c13-774">**Flags**</span></span>

    <span data-ttu-id="82c13-775">このフィールドには、さまざまなプロパティを指定する一連のビットが含まれています。</span><span class="sxs-lookup"><span data-stu-id="82c13-775">This field contains a series of bits that specify various properties:</span></span>
    
    |<span data-ttu-id="82c13-776">フラグ ビット</span><span class="sxs-lookup"><span data-stu-id="82c13-776">Flag Bit</span></span>|<span data-ttu-id="82c13-777">説明</span><span class="sxs-lookup"><span data-stu-id="82c13-777">Meaning</span></span>    |
    |-----------------|-----------|
    |<span data-ttu-id="82c13-778">0x01</span><span class="sxs-lookup"><span data-stu-id="82c13-778">0x01</span></span>            |<span data-ttu-id="82c13-779">このフィールドは、クラスターの割り当てが可能かどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-779">This field indicates whether or not allocation of clusters is possible.</span></span> <span data-ttu-id="82c13-780">このフィールドは 1 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-780">This field should be 1.</span></span>|
    |<span data-ttu-id="82c13-781">0x02</span><span class="sxs-lookup"><span data-stu-id="82c13-781">0x02</span></span>            |<span data-ttu-id="82c13-782">このフィールドは、関連付けられているクラスターが連続しているかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-782">This field indicates whether or not the associated clusters are contiguous.</span></span> <span data-ttu-id="82c13-783">値 0 は、FAT エントリが有効であり、FileX が FAT チェーンに従うことを意味します。</span><span class="sxs-lookup"><span data-stu-id="82c13-783">A value 0 means the FAT entry is valid and FileX shall follow the FAT chain.</span></span> <span data-ttu-id="82c13-784">値 1 は、FAT エントリが無効であり、クラスターが連続していることを意味します。</span><span class="sxs-lookup"><span data-stu-id="82c13-784">A value 1 means the FAT entry is invalid and the clusters are contiguous.</span></span>|
    |<span data-ttu-id="82c13-785">他のすべてのビット</span><span class="sxs-lookup"><span data-stu-id="82c13-785">All other bits</span></span>    |<span data-ttu-id="82c13-786">予約済み。</span><span class="sxs-lookup"><span data-stu-id="82c13-786">Reserved.</span></span>|

- <span data-ttu-id="82c13-787">**予約済み 1**</span><span class="sxs-lookup"><span data-stu-id="82c13-787">**Reserved 1**</span></span>

    <span data-ttu-id="82c13-788">このフィールドは 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-788">This field should be 0.</span></span>

- <span data-ttu-id="82c13-789">**名前の長さ**</span><span class="sxs-lookup"><span data-stu-id="82c13-789">**Name Length**</span></span>

    <span data-ttu-id="82c13-790">"*名前の長さ*" フィールドには、ファイル名ディレクトリ エントリに集合的に含まれる Unicode 文字列の長さが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-790">The *name length* field contains the length of the unicode string in the file name directory entries collectively contain.</span></span> <span data-ttu-id="82c13-791">ファイル名ディレクトリ エントリは、このストリーム拡張ディレクトリ エントリの直後に続く必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-791">The file name directory entries shall immediately follow this stream extension directory entry.</span></span>

- <span data-ttu-id="82c13-792">**名前ハッシュ**</span><span class="sxs-lookup"><span data-stu-id="82c13-792">**Name Hash**</span></span>

    <span data-ttu-id="82c13-793">"*名前ハッシュ*" フィールドは、大文字のファイル名のハッシュ値が含まれる 2 バイトのエントリです。</span><span class="sxs-lookup"><span data-stu-id="82c13-793">The *name hash* field is a 2-byte entry, containing the hash value of the up-cased file name.</span></span> <span data-ttu-id="82c13-794">ハッシュ値により、ファイルまたはディレクトリ名の検索が高速になります。ハッシュ値が一致しない場合、このエントリに関連付けられているファイル名は一致しません。</span><span class="sxs-lookup"><span data-stu-id="82c13-794">The hash value allows faster file/directory name lookup: if the hash values don't match, the file name associated with this entry is not a match.</span></span>

- <span data-ttu-id="82c13-795">**予約済み 2**</span><span class="sxs-lookup"><span data-stu-id="82c13-795">**Reserved 2**</span></span>

    <span data-ttu-id="82c13-796">このフィールドは 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-796">This field should be 0.</span></span>

- <span data-ttu-id="82c13-797">**有効なデータの長さ**</span><span class="sxs-lookup"><span data-stu-id="82c13-797">**Valid Data Length**</span></span>

    <span data-ttu-id="82c13-798">"*有効なデータの長さ*" フィールドは、ファイル内の有効なデータの量を示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-798">The *valid data length* field indicates the amount of valid data in the file.</span></span>

- <span data-ttu-id="82c13-799">**予約済み 3**</span><span class="sxs-lookup"><span data-stu-id="82c13-799">**Reserved 3**</span></span>

    <span data-ttu-id="82c13-800">このフィールドは 0 である必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-800">This filed should be 0.</span></span>

- <span data-ttu-id="82c13-801">**最初のクラスター**</span><span class="sxs-lookup"><span data-stu-id="82c13-801">**First Cluster**</span></span>

    <span data-ttu-id="82c13-802">"*最初のクラスター*" フィールドには、データ ストリームの最初のクラスターのインデックスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-802">The *first cluster* field contains index of the first cluster of the data stream.</span></span>

- <span data-ttu-id="82c13-803">**データの長さ**</span><span class="sxs-lookup"><span data-stu-id="82c13-803">**Data Length**</span></span>

    <span data-ttu-id="82c13-804">"*データの長さ*" フィールドには、割り当てられたクラスターの合計バイト数が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-804">The *data length* field contains the total number of bytes in the allocated clusters.</span></span> <span data-ttu-id="82c13-805">exFAT ではデータ クラスターの事前割り当てが可能であるため、この値は "*有効なデータの長さ*" よりも大きくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-805">This value may be larger than *Valid Data Length*, since exFAT allows pre-allocation of data clusters.</span></span>

### <a name="root-directory"></a><span data-ttu-id="82c13-806">[ルート ディレクトリ]</span><span class="sxs-lookup"><span data-stu-id="82c13-806">Root Directory</span></span>

<span data-ttu-id="82c13-807">FAT 12 ビットおよび 16 ビット形式では、"*ルート ディレクトリ*" は、メディア内のすべての FAT セクターの直後に配置され、開いている _ *FX_MEDIA*\* 制御ブロックの \***fx_media_root_sector_start** _ を調べることによって見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-807">In FAT 12- and 16-bit formats, the *root directory* is located immediately after all the FAT sectors in the media and can be located by examining the ***fx_media_root_sector_start** _ in an opened _ *FX_MEDIA** control block.</span></span> <span data-ttu-id="82c13-808">ディレクトリ エントリの数 (それぞれ 32 バイトのサイズ) の観点からのルート ディレクトリのサイズは、メディアのブート レコードの対応するエントリによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-808">The size of the root directory, in terms of number of directory entries (each 32 bytes in size), is determined by the corresponding entry in the media's boot record.</span></span>

<span data-ttu-id="82c13-809">FAT-32 および exFAT のルート ディレクトリは、使用可能なクラスター内の任意の場所に配置できます。</span><span class="sxs-lookup"><span data-stu-id="82c13-809">The root directory in FAT-32 and exFAT can be located anywhere in the available clusters.</span></span> <span data-ttu-id="82c13-810">その場所とサイズは、メディアが開かれたときにブート レコードから決定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-810">Its location and size are determined from the boot record when the media is opened.</span></span> <span data-ttu-id="82c13-811">メディアが開かれた後、***fx_media_root_sector_start*** フィールドを使用して、FAT-32 または exFAT ルート ディレクトリの開始クラスターを見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-811">After the media is opened, the ***fx_media_root_sector_start*** field can be used to find the starting cluster of the FAT-32 or exFAT root directory.</span></span>

### <a name="subdirectories"></a><span data-ttu-id="82c13-812">［サブディレクトリ］</span><span class="sxs-lookup"><span data-stu-id="82c13-812">Subdirectories</span></span>

<span data-ttu-id="82c13-813">FAT システムには、任意の数のサブディレクトリがあります。</span><span class="sxs-lookup"><span data-stu-id="82c13-813">There is any number of subdirectories in an FAT system.</span></span> <span data-ttu-id="82c13-814">サブディレクトリの名前は、ファイル名と同じようにディレクトリ エントリに格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-814">The name of the subdirectory resides in a directory entry just like a file name.</span></span> <span data-ttu-id="82c13-815">ただし、ディレクトリ属性仕様 (0x10) は、エントリがサブディレクトリであり、ファイル サイズが常に 0 であることを示すように設定されています。</span><span class="sxs-lookup"><span data-stu-id="82c13-815">However, the directory attribute specification (0x10) is set to indicate the entry is a subdirectory and the file size is always zero.</span></span>
<span data-ttu-id="82c13-816">図 3 は、_*_FILE.TXT_*\* という名前のファイルが 1 つ含まれている \***SAMPLE.DIR** _ という名前の新しい単一クラスター サブディレクトリの典型的なサブディレクトリ構造を示しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-816">Figure 3 shows what a typical subdirectory structure looks like for a new singlecluster subdirectory named ***SAMPLE.DIR** _ with one file called _*_FILE.TXT_\*\*.</span></span>
<span data-ttu-id="82c13-817">ほとんどの点で、サブディレクトリはファイル エントリとよく似ています。</span><span class="sxs-lookup"><span data-stu-id="82c13-817">In most ways, subdirectories are very similar to file entries.</span></span> <span data-ttu-id="82c13-818">最初のクラスター フィールドは、クラスターのリンク リストの最初のクラスターを指します。</span><span class="sxs-lookup"><span data-stu-id="82c13-818">The first cluster field points to the first cluster of a linked list of clusters.</span></span> <span data-ttu-id="82c13-819">サブディレクトリが作成されると、最初の 2 つのディレクトリ エントリに、既定のディレクトリ (つまり、"." ディレクトリと ".." ディレクトリ) が格納されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-819">When a subdirectory is created, the first two directory entries contain default directories, namely the "." directory and the ".." directory.</span></span> <span data-ttu-id="82c13-820">"." ディレクトリはサブディレクトリ自体を指し、".." ディレクトリは前のディレクトリまたは親ディレクトリを指します。</span><span class="sxs-lookup"><span data-stu-id="82c13-820">The "." directory points to the subdirectory itself, while the ".." directory points to the previous or parent directory.</span></span>

### <a name="global-default-path"></a><span data-ttu-id="82c13-821">グローバルな既定のパス</span><span class="sxs-lookup"><span data-stu-id="82c13-821">Global Default Path</span></span>

<span data-ttu-id="82c13-822">FileX は、メディアのグローバルな既定のパスを提供します。</span><span class="sxs-lookup"><span data-stu-id="82c13-822">FileX provides a global default path for the media.</span></span> <span data-ttu-id="82c13-823">既定のパスは、完全なパスが明示的に指定されていないファイルまたはディレクトリ サービスで使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-823">The default path is used in any file or directory service that does not explicitly specify a full path.</span></span>

<span data-ttu-id="82c13-824">最初に、グローバルな既定のディレクトリは、メディアのルート ディレクトリに設定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-824">Initially, the global default directory is set to the media's root directory.</span></span> <span data-ttu-id="82c13-825">これは、アプリケーションで ***fx_directory_default_set*** を呼び出すことによって変更することができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-825">This may be changed by the application by calling ***fx_directory_default_set***.</span></span>

<span data-ttu-id="82c13-826">メディアの現在の既定のパスは、\***fx_directory_default_get** _ を呼び出すことによって調べることができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-826">The current default path for the media may be examined by calling \***fx_directory_default_get** _.</span></span> <span data-ttu-id="82c13-827">このルーチンは、_ *FX_MEDIA*\* 制御ブロック内に保持されている既定のパス文字列を指す文字列ポインターを提供します。</span><span class="sxs-lookup"><span data-stu-id="82c13-827">This routine provides a string pointer to the default path string maintained inside of the _ *FX_MEDIA*\* control block.</span></span>

### <a name="local-default-path"></a><span data-ttu-id="82c13-828">ローカルの既定のパス</span><span class="sxs-lookup"><span data-stu-id="82c13-828">Local Default Path</span></span>

<span data-ttu-id="82c13-829">FileX では、スレッドに固有の既定のパスも提供されます。これにより、競合が発生することなく、さまざまなスレッドには一意のパスを設定できます。</span><span class="sxs-lookup"><span data-stu-id="82c13-829">FileX also provides a thread-specific default path that allows different threads to have unique paths without conflict.</span></span> <span data-ttu-id="82c13-830">**FX_LOCAL_PATH** 構造体は、**_fx_directory_local_path_set_ *_ および _* _fx_directory_local_path_restore_** の呼び出し中に呼び出し元のスレッドのローカル パスを変更するために、アプリケーションによって提供されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-830">The **FX_LOCAL_PATH** structure is supplied  by the application during calls to **_fx_directory_local_path_set_*_ and _*_fx_directory_local_path_restore_** to modify the local path for the calling thread.</span></span>

<span data-ttu-id="82c13-831">ローカル パスが存在する場合、ローカル パスはグローバルな既定のメディア パスよりも優先されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-831">If a local path is present, the local path takes precedence over the global default media path.</span></span> <span data-ttu-id="82c13-832">ローカル パスが設定されていない場合、または ***fx_directory_local_path_clear*** サービスでクリアされている場合は、メディアのグローバルな既定のパスが再び使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-832">If the local path is not setup or if it is cleared with the ***fx_directory_local_path_clear*** service, the media's global default path is used once again.</span></span>

## <a name="file-description"></a><span data-ttu-id="82c13-833">ファイルの説明</span><span class="sxs-lookup"><span data-stu-id="82c13-833">File Description</span></span>

<span data-ttu-id="82c13-834">FileX では、3 文字の拡張子を含む標準の 8.3 文字と長いファイル名がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="82c13-834">FileX supports standard 8.3 character and long file names with three-character extensions.</span></span> <span data-ttu-id="82c13-835">ASCII 名に加えて、各ファイル エントリには、エントリの属性、最終変更時刻と日付、開始クラスター インデックス、およびエントリのサイズ (バイト単位) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-835">In addition to the ASCII name, each file entry contains the entry's attributes, the last modified time and date, the starting cluster index, and the size in bytes of the entry.</span></span>

### <a name="file-allocation"></a><span data-ttu-id="82c13-836">ファイルの割り当て</span><span class="sxs-lookup"><span data-stu-id="82c13-836">File Allocation</span></span>

<span data-ttu-id="82c13-837">FileX では、FAT 形式の標準のクラスター割り当てスキームがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="82c13-837">FileX supports the standard cluster allocation scheme of the FAT format.</span></span> <span data-ttu-id="82c13-838">さらに、FileX では、連続するクラスターの事前クラスター割り当てがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="82c13-838">In addition, FileX supports pre-cluster allocation of contiguous clusters.</span></span> <span data-ttu-id="82c13-839">これに対応するために、各 FileX ファイルは、クラスターが割り当てられていない状態で作成されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-839">To accommodate this, each FileX file is created with no allocated clusters.</span></span> <span data-ttu-id="82c13-840">クラスターは、後続の書き込み要求か、連続するクラスターを事前に割り当てるための ***fx_file_allocate*** 要求で割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="82c13-840">Clusters are allocated on subsequent write requests or on ***fx_file_allocate*** requests to pre-allocate contiguous clusters.</span></span>

<span data-ttu-id="82c13-841">図 4 の「FileX FAT-16 ファイルの例」は、クラスター 101 で始まりサイズが 26 の 2 つの順次クラスターが割り当てられている ***FILE.TXT*** という名前のファイルと、ファイルの最初のデータ クラスター番号 101 内のデータとしてのアルファベットを示しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-841">Figure 4, "FileX FAT-16 File Example," shows a file named ***FILE.TXT*** with two sequential clusters allocated starting at cluster 101, a size of 26, and the alphabet as the data in the file's first data cluster number 101.</span></span>

### <a name="file-access"></a><span data-ttu-id="82c13-842">ファイル アクセス</span><span class="sxs-lookup"><span data-stu-id="82c13-842">File Access</span></span>

<span data-ttu-id="82c13-843">FileX ファイルは、読み取りアクセスのために同時に複数回開くことができます。</span><span class="sxs-lookup"><span data-stu-id="82c13-843">A FileX file may be opened multiple times simultaneously for read access.</span></span> <span data-ttu-id="82c13-844">ただし、書き込み用にファイルを開くことができるのは 1 回だけです。</span><span class="sxs-lookup"><span data-stu-id="82c13-844">However, a file can only be opened once for writing.</span></span> <span data-ttu-id="82c13-845">ファイル アクセスをサポートするために使用される情報は、***FX_FILE*** ファイル制御ブロックに含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-845">The information used to support the file access is contained in the ***FX_FILE*** file control block.</span></span>

> [!NOTE]
> <span data-ttu-id="82c13-846">"*メディア ドライバーでは書き込み保護を動的に設定できることに注意してください。その場合、書き込み用にファイルを開く試みだけでなく、すべての書き込み要求が拒否されます。* "</span><span class="sxs-lookup"><span data-stu-id="82c13-846">*Note that the media driver can dynamically set write protection. If this happens all write requests are rejected as well as attempts to open a file for writing.*</span></span>

### <a name="file-layout-in-exfat"></a><span data-ttu-id="82c13-847">exFAT のファイル レイアウト</span><span class="sxs-lookup"><span data-stu-id="82c13-847">File Layout in exFAT</span></span>

<span data-ttu-id="82c13-848">exFAT の設計では、データが連続するクラスターに格納されている場合はファイルの FAT チェーンを保持する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="82c13-848">The design of exFAT does not require FAT chain to be maintained for a file if data is stored in contagious clusters.</span></span> <span data-ttu-id="82c13-849">ストリーム拡張ディレクトリ エントリの *NoFATChain* ビットは、ファイルからデータを読み取るときに FAT チェーンを使用する必要があるかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="82c13-849">The *NoFATChain* bit in the Stream Extension Directory Entry indicates whether or not the FAT chain should be used when reading data from the file.</span></span> <span data-ttu-id="82c13-850">*NoFATChain* が設定されている場合、FileX は、ストリーム拡張ディレクトリ エントリの "*最初のクラスター*" フィールドに示されているクラスターから順番に読み取ります。</span><span class="sxs-lookup"><span data-stu-id="82c13-850">If the *NoFATChain* is set, FileX reads sequentially from the cluster indicated in the *First Cluster* field in the Stream Extension Directory Entry.</span></span>

<span data-ttu-id="82c13-851">一方、*NoFATChain* がクリアされている場合、FileX は、FAT12、16、32 の FAT チェーンと同様に、ファイル全体を走査するために FAT チェーンに従います。</span><span class="sxs-lookup"><span data-stu-id="82c13-851">On the other hand, if the *NoFATChain* is clear, FileX will follow the FAT chain in order to traverse the entire file, similar to the FAT chain in FAT12/16/32.</span></span>

<span data-ttu-id="82c13-852">図 3 は、FAT チェーンを必要とするファイルと FAT チェーンを必要としないファイルの 2 つのサンプル ファイルを示しています。</span><span class="sxs-lookup"><span data-stu-id="82c13-852">Figure 3 shows two sample files, one does not require FAT chain, and the other one requires a FAT chain.</span></span>

## <a name="system-information"></a><span data-ttu-id="82c13-853">システム情報</span><span class="sxs-lookup"><span data-stu-id="82c13-853">System Information</span></span>

<span data-ttu-id="82c13-854">FileX システム情報は、開いているメディア インスタンスを追跡し、グローバルなシステムの時刻と日付を保持することで構成されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-854">FileX system information consists of keeping track of the open media instances and maintaining the global system time and date.</span></span>

![連続するクラスターを含むファイルと、FAT リンクを必要とするファイル](./media/user-guide/system-information.png)

<span data-ttu-id="82c13-856">**図 3. 連続するクラスターを含むファイルと、FAT リンクを必要とするファイル**</span><span class="sxs-lookup"><span data-stu-id="82c13-856">**FIGURE 3. File with Contiguous Clusters vs. File Requiring FAT Link**</span></span>

<span data-ttu-id="82c13-857">システムの日付と時刻は、既定で FileX の最終リリース日に設定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-857">By default, the system date and time are set to the last release date of FileX.</span></span> <span data-ttu-id="82c13-858">システムの正確な日付と時刻を取得するには、アプリケーションは、初期化中に ***fx_system_time_set** _ と _ *_fx_system_date_set_** を呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-858">To have accurate system date and time, the application must call ***fx_system_time_set** _ and _ *_fx_system_date_set_** during initialization.</span></span>

### <a name="system-date"></a><span data-ttu-id="82c13-859">システム日付</span><span class="sxs-lookup"><span data-stu-id="82c13-859">System Date</span></span>

<span data-ttu-id="82c13-860">FileX システム日付は、グローバル ***_fx_system_date*** 変数に保持されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-860">The FileX system date is maintained in the global ***_fx_system_date*** variable.</span></span> <span data-ttu-id="82c13-861">ビット 15 から 9 には 1980 年からの年のオフセットが含まれます。ビット 8 から 5 には月のオフセットが含まれます。ビット 4 から 0 には日が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-861">Bits 15 through 9 contain the year offset from 1980, bits 8 through 5 contain the month offset, and bits 4 through 0 contain the day.</span></span> |

### <a name="system-time"></a><span data-ttu-id="82c13-862">システム時刻</span><span class="sxs-lookup"><span data-stu-id="82c13-862">System Time</span></span>

<span data-ttu-id="82c13-863">FileX システム時刻は、グローバル ***_fx_system_time*** 変数に保持されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-863">The FileX system time is maintained in the global ***_fx_system_time*** variable.</span></span> <span data-ttu-id="82c13-864">ビット 15 から 11 には時間が含まれます。ビット 10 から 5 には分が含まれます。ビット 4 から 0 には 0.5 秒が含まれます。</span><span class="sxs-lookup"><span data-stu-id="82c13-864">Bits 15 through 11 contain the hours, bits 10 though 5 contain the minutes, and bits 4 though 0 contain the half seconds.</span></span>

### <a name="periodic-time-update"></a><span data-ttu-id="82c13-865">定期的な時間の更新</span><span class="sxs-lookup"><span data-stu-id="82c13-865">Periodic Time Update</span></span>

<span data-ttu-id="82c13-866">システムの初期化中、FileX により、システムの日付と時刻を定期的に更新する ThreadX アプリケーション タイマーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-866">During system initialization, FileX creates a ThreadX application timer to periodically update the system date and time.</span></span> <span data-ttu-id="82c13-867">システムの日付と時刻を更新する頻度は、***_fx_system_initialize*** 関数で使用される 2 つの定数によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-867">The rate at which the system date and time update is determined by two constants used by the ***_fx_system_initialize*** function.</span></span>

<span data-ttu-id="82c13-868">定数 **FX_UPDATE_RATE_IN_SECONDS** と **FX_UPDATE_RATE_IN_TICKS** は、同じ期間を表します。</span><span class="sxs-lookup"><span data-stu-id="82c13-868">The constants **FX_UPDATE_RATE_IN_SECONDS** and **FX_UPDATE_RATE_IN_TICKS** represent the same period of time.</span></span> <span data-ttu-id="82c13-869">定数 **FX_UPDATE_RATE_IN_TICKS** は、定数 **FX_UPDATE_RATE_IN_SECONDS** で指定された秒数を表す ThreadX タイマー ティックの数です。</span><span class="sxs-lookup"><span data-stu-id="82c13-869">The constant **FX_UPDATE_RATE_IN_TICKS** is the number of ThreadX timer ticks that represents the number of seconds specified by the constant **FX_UPDATE_RATE_IN_SECONDS**.</span></span> <span data-ttu-id="82c13-870">定数 **FX_UPDATE_RATE_IN_SECONDS** は、FileX 時刻の各更新間の秒数を指定します。</span><span class="sxs-lookup"><span data-stu-id="82c13-870">The **FX_UPDATE_RATE_IN_SECONDS** constant specifies how many seconds between each FileX time update.</span></span> <span data-ttu-id="82c13-871">したがって、内部 FileX 時刻は、**FX_UPDATE_RATE_IN_SECONDS** の間隔で増分されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-871">Therefore, the internal FileX time increments in intervals of **FX_UPDATE_RATE_IN_SECONDS**.</span></span> <span data-ttu-id="82c13-872">これらの定数は **_fx_system_initialize_ *_ のコンパイル中に提供される場合があります。または、開発者が FileX リリースの _* _fx_port.h_** ファイルにある既定値を変更する場合があります。</span><span class="sxs-lookup"><span data-stu-id="82c13-872">These constants may be supplied during compilation of **_fx_system_initialize_*_, or the developer may modify the defaults found in the _*_fx_port.h_** file of the FileX release.</span></span>

<span data-ttu-id="82c13-873">定期的な FileX タイマーは、ファイルのタイムスタンプにのみ使用されるグローバルなシステムの日付と時刻を更新するためにのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="82c13-873">The periodic FileX timer is used only for updating the global system date and time, which is used solely for file time-stamping.</span></span> <span data-ttu-id="82c13-874">タイムスタンプが不要な場合は、**_fx_system_initialize.c_** をコンパイルするときに **FX_NO_TIMER** を定義するだけで、FileX 定期タイマーが作成されなくなります。</span><span class="sxs-lookup"><span data-stu-id="82c13-874">If time-stamping is not necessary, simply define **FX_NO_TIMER** when compiling **_fx_system_initialize.c_** to eliminate the creation of the FileX periodic timer.</span></span>

![FileX FAT-16 ファイルの例](./media/user-guide/fat-16-file-example.png)

<span data-ttu-id="82c13-876">**図 4. FileX FAT-16 ファイルの例**</span><span class="sxs-lookup"><span data-stu-id="82c13-876">**FIGURE 4. FileX FAT-16 File Example**</span></span>
