---
title: 第 2 章 - Azure RTOS FileX のインストールと使用
description: この章では、Azure RTOS FileX の概要のほか、次のようなインストール条件、手順、および使用法について説明します
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6703b10d8e0895984bb92d74d5dff809dca1a7f8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104810325"
---
# <a name="chapter-2---installation-and-use-of-azure-rtos-filex"></a><span data-ttu-id="385d7-103">第 2 章 - Azure RTOS FileX のインストールと使用</span><span class="sxs-lookup"><span data-stu-id="385d7-103">Chapter 2 - Installation and use of Azure RTOS FileX</span></span>

<span data-ttu-id="385d7-104">この章では、Azure RTOS FileX の概要のほか、インストール条件、手順、および使用法について説明します。</span><span class="sxs-lookup"><span data-stu-id="385d7-104">This chapter contains an introduction to Azure RTOS FileX and a description of installation conditions, procedures, and use.</span></span> 

## <a name="host-considerations"></a><span data-ttu-id="385d7-105">ホストに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="385d7-105">Host Considerations</span></span>

### <a name="computer-type"></a><span data-ttu-id="385d7-106">コンピューターの種類</span><span class="sxs-lookup"><span data-stu-id="385d7-106">Computer Type</span></span>

<span data-ttu-id="385d7-107">組み込み開発は、通常、Windows または Linux (Unix) ホスト コンピューター上で行われます。</span><span class="sxs-lookup"><span data-stu-id="385d7-107">Embedded development is usually performed on Windows or Linux (Unix) host computers.</span></span> <span data-ttu-id="385d7-108">アプリケーションは、コンパイルされ、リンクされ、ホスト上に配置された後、実行のためにターゲット ハードウェアにダウンロードされます。</span><span class="sxs-lookup"><span data-stu-id="385d7-108">After the application is compiled, linked, and located on the host, it is downloaded to the target hardware for execution.</span></span>

### <a name="download-interfaces"></a><span data-ttu-id="385d7-109">ダウンロードのインターフェイス</span><span class="sxs-lookup"><span data-stu-id="385d7-109">Download Interfaces</span></span>

<span data-ttu-id="385d7-110">通常、ターゲットのダウンロードは、開発ツールのデバッガー内から実行されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-110">Usually the target download is done from within the development tool's debugger.</span></span> <span data-ttu-id="385d7-111">ダウンロード後、デバッガーは、メモリおよびプロセッサ レジスタへのアクセスだけでなく、ターゲットの実行制御 (移動、停止、ブレークポイントなど) を提供します。</span><span class="sxs-lookup"><span data-stu-id="385d7-111">After download, the debugger is responsible for providing target execution control (go, halt, breakpoint, etc.) as well as access to memory and processor registers.</span></span>

### <a name="debugging-tools"></a><span data-ttu-id="385d7-112">デバッグ ツール</span><span class="sxs-lookup"><span data-stu-id="385d7-112">Debugging Tools</span></span>

<span data-ttu-id="385d7-113">開発ツールのデバッガーのほとんどは、JTAG (IEEE 1149.1) やバックグラウンド デバッグ モード (BDM) などのオンチップ デバッグ (OCD) 接続によってターゲット ハードウェアと通信します。</span><span class="sxs-lookup"><span data-stu-id="385d7-113">Most development tool debuggers communicate with the target hardware via on-chip debug (OCD) connections such as JTAG (IEEE 1149.1) and Background Debug Mode (BDM).</span></span> <span data-ttu-id="385d7-114">また、デバッガーは、インサーキット エミュレーション (ICE) 接続を使用してターゲット ハードウェアと通信します。</span><span class="sxs-lookup"><span data-stu-id="385d7-114">Debuggers also communicate with target hardware through In-Circuit Emulation (ICE) connections.</span></span> <span data-ttu-id="385d7-115">OCD 接続と ICE 接続はどちらも、ターゲットの常駐ソフトウェアへの侵入を最小限に抑える堅牢なソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="385d7-115">Both OCD and ICE connections provide robust solutions with minimal intrusion on the target resident software.</span></span>

### <a name="required-hard-disk-space"></a><span data-ttu-id="385d7-116">必要なハード ディスク容量</span><span class="sxs-lookup"><span data-stu-id="385d7-116">Required Hard Disk Space</span></span>

<span data-ttu-id="385d7-117">FileX のソース コードは、ASCII 形式で提供され、ホスト コンピューターのハード ディスク上に約 500 KB の領域を必要とします。</span><span class="sxs-lookup"><span data-stu-id="385d7-117">The source code for FileX is delivered in ASCII format and requires approximately 500 KBytes of space on the host computer's hard disk</span></span>

## <a name="target-considerations"></a><span data-ttu-id="385d7-118">ターゲットに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="385d7-118">Target Considerations</span></span>

<span data-ttu-id="385d7-119">FileX は、ターゲット上に 6 KB から 30 KB の読み取り専用メモリ (ROM) を必要とします。</span><span class="sxs-lookup"><span data-stu-id="385d7-119">FileX requires between 6 KBytes and 30 KBytes of  Read-Only Memory (ROM) on the target.</span></span> <span data-ttu-id="385d7-120">FileX グローバル データ構造体には、ターゲットのランダム アクセス メモリ (RAM) がさらに 100 バイトに必要になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-120">Another  100 bytes of the target's Random Access Memory (RAM) are required for FileX global data structures.</span></span> <span data-ttu-id="385d7-121">さらに、開いているメディアごとに、1 つのセクター (通常は 512 バイト) のデータを格納するための RAM に加えて、制御ブロック用に 1.5 KB の RAM が必要になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-121">Each opened media also requires 1.5 KBytes of RAM for the control block in addition to RAM for storing data for one sector (typically 512 bytes).</span></span>

<span data-ttu-id="385d7-122">日付または時刻のスタンプを正常に機能させるために、FileX は ThreadX のタイマー機能を利用しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-122">For date/time stamping to function properly, FileX relies on ThreadX timer facilities.</span></span> <span data-ttu-id="385d7-123">これを実行するために、FileX の初期化時に FileX 固有のタイマーを作成しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-123">This is implemented by creating a FileX-specific timer during FileX initialization.</span></span> <span data-ttu-id="385d7-124">また、FileX は、複数のスレッド保護と I/O の中断に ThreadX セマフォを利用しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-124">FileX also relies on ThreadX semaphores for multiple thread protection and I/O suspension.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="385d7-125">製品ディストリビューション</span><span class="sxs-lookup"><span data-stu-id="385d7-125">Product Distribution</span></span>

<span data-ttu-id="385d7-126">Azure RTOS FileX は、<https://github.com/azure-rtos/filex/> のパブリック ソース コード リポジトリから入手できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-126">Azure RTOS FileX can be obtained from our public source code repository at <https://github.com/azure-rtos/filex/>.</span></span>

<span data-ttu-id="385d7-127">以下は、リポジトリ内のいくつかの重要なファイルの一覧です。</span><span class="sxs-lookup"><span data-stu-id="385d7-127">The following is a list of several important files in the repository:</span></span>

- <span data-ttu-id="385d7-128">***fx_api.h***: この C ヘッダー ファイルには、システム等価物、データ構造体、およびサービス プロトタイプがすべて含まれています。</span><span class="sxs-lookup"><span data-stu-id="385d7-128">***fx_api.h*** : This C header file contains all system equates, data structures, and service prototypes.</span></span>
- <span data-ttu-id="385d7-129">***fx_port.h***: この C ヘッダー ファイルには、開発ツール固有のデータ定義とデータ構造体がすべて含まれています。</span><span class="sxs-lookup"><span data-stu-id="385d7-129">***fx_port.h*** : This C header file contains all development-tool-specific data definitions and structures.</span></span>
- <span data-ttu-id="385d7-130">***demo_filex.c***: この C ファイルには、小さなデモ アプリケーションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="385d7-130">***demo_filex.c*** : This C file contains a small demo application.</span></span>
- <span data-ttu-id="385d7-131">"***fx.a (または fx.lib)***": これは、FileX C ライブラリのバイナリ バージョンです。</span><span class="sxs-lookup"><span data-stu-id="385d7-131">***fx.a (or fx.lib)*** : This is the binary version of the FileX C library.</span></span> <span data-ttu-id="385d7-132">標準パッケージと共に配布されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-132">It is distributed with the standard package.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="385d7-133">"*ファイル名はすべて小文字で表記します。この名前付け規則を使用することで、コマンドを Linux (Unix) 開発プラットフォームに簡単に変換できます。* "</span><span class="sxs-lookup"><span data-stu-id="385d7-133">*All file names are in lower-case. This naming convention makes it easier to convert the commands to Linux (Unix) development platforms.*</span></span>

## <a name="filex-installation"></a><span data-ttu-id="385d7-134">FileX のインストール</span><span class="sxs-lookup"><span data-stu-id="385d7-134">FileX Installation</span></span>

<span data-ttu-id="385d7-135">FileX をインストールするには、GitHub リポジトリをローカル コンピューターにクローンします。</span><span class="sxs-lookup"><span data-stu-id="385d7-135">FileX is installed by cloning the GitHub repository to your local machine.</span></span> <span data-ttu-id="385d7-136">自分の PC 上に FileX リポジトリのクローンを作成するための一般的な構文を次に示します。</span><span class="sxs-lookup"><span data-stu-id="385d7-136">The following is typical syntax for creating a clone of the FileX repository on your PC:</span></span>

```c
    git clone https://github.com/azure-rtos/filex
```

<span data-ttu-id="385d7-137">GitHub メイン ページ上のダウンロード ボタンを使用して、リポジトリのコピーをダウンロードすることもできます。</span><span class="sxs-lookup"><span data-stu-id="385d7-137">Alternatively you can download a copy of the repository using the download button on the GitHub main page.</span></span>

<span data-ttu-id="385d7-138">また、オンライン リポジトリのフロント ページには、FileX ライブラリを構築する手順も紹介されています。</span><span class="sxs-lookup"><span data-stu-id="385d7-138">You will also find instructions for building the FileX library on the front page of the online repository.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="385d7-139">アプリケーション ソフトウェアは、FileX ライブラリ ファイル (通常、***fx.a** _ または _*_fx.lib_\*_) _と、C インクルード ファイル **fx_api.h** および **fx_port.h** にアクセスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-139">Application software needs access to the FileX library file (usually called\* usually ***fx.a** _ or _*_fx.lib_\*_) _and the C include files **fx_api.h** and **fx_port.h**.</span></span> <span data-ttu-id="385d7-140">これを行うには、開発ツールの適切なパスを設定するか、これらのファイルをアプリケーション開発領域にコピーします。</span><span class="sxs-lookup"><span data-stu-id="385d7-140">This is accomplished either by setting the appropriate path for the development tools or by copying these files into the application development area.</span></span>

## <a name="using-filex"></a><span data-ttu-id="385d7-141">FileX の使用</span><span class="sxs-lookup"><span data-stu-id="385d7-141">Using FileX</span></span>

<span data-ttu-id="385d7-142">FileX は簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-142">Using FileX is easy.</span></span> <span data-ttu-id="385d7-143">基本的には、コンパイル中にアプリケーション コードに ***fx_api.h** _ をインクルードし、FileX ランタイム ライブラリ _*_fx.a_*_ (または _*_fx.lib_\*_) とリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-143">Basically, the application code must include ***fx_api.h** _ during compilation and link with the FileX run-time library _*_fx.a_*_ (or _*_fx.lib_\*_).</span></span> <span data-ttu-id="385d7-144">当然ながら、ThreadX ファイル、つまり _*_tx_api.h_*_ と _*_tx.a_*_ (または _*_tx.lib_*_)_\* も必要になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-144">Of course, the ThreadX files, namely _*_tx_api.h_*_ and _*_tx.a_*_ (or _*_tx.lib_*_)_,\* are also required.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="385d7-145">FileX をスタンドアロン モードで使用する場合 (**FX_STANDALONE_ENABLE** を定義する必要があります)、ThreadX ファイルまたはライブラリは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="385d7-145">When using FileX in Standalone mode (**FX_STANDALONE_ENABLE** must be defined), ThreadX files/libraries are not required.</span></span>

<span data-ttu-id="385d7-146">ThreadX を既に使用していると仮定した場合、FileX アプリケーションを構築するために必要な手順は 4 つあります。</span><span class="sxs-lookup"><span data-stu-id="385d7-146">Assuming you are already using ThreadX, there are four steps required to build a FileX application:</span></span>

1. <span data-ttu-id="385d7-147">***fx_api.h*** ファイルを、FileX サービスまたはデータ構造体を使用するすべてのアプリケーション ファイルにインクルードします。</span><span class="sxs-lookup"><span data-stu-id="385d7-147">Include the ***fx_api.h*** file in all application files that use FileX services or data structures.</span></span>
1. <span data-ttu-id="385d7-148">_ *_tx_application_define_*\* 関数またはアプリケーション スレッドから \***fx_system_initialize** _ を呼び出して、FileX システムを初期化します。</span><span class="sxs-lookup"><span data-stu-id="385d7-148">Initialize the FileX system by calling ***fx_system_initialize** _ from the _ *_tx_application_define_** function or an application thread.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="385d7-149">FileX をスタンドアロン モードで使用している場合は、***fx_system_initialize*** をアプリケーション コードから直接呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-149">When using FileX in Standalone mode, ***fx_system_initialize*** should be directly called from application code.</span></span>

1. <span data-ttu-id="385d7-150">FileX メディアを設定するために、***fx_media_open*** の呼び出しを 1 つ以上追加します。</span><span class="sxs-lookup"><span data-stu-id="385d7-150">Add one or more calls to ***fx_media_open*** to set up the FileX media.</span></span> <span data-ttu-id="385d7-151">この呼び出しは、アプリケーション スレッドのコンテキストから行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-151">This call must be made from the context of an application thread.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="385d7-152">"***fx_media_open** 呼び出しを行うには、1 つのセクターのデータを格納するのに十分な RAM が必要であることに注意してください。* "</span><span class="sxs-lookup"><span data-stu-id="385d7-152">*Remember that the **fx_media_open** call requires enough RAM to store data for one sector.*</span></span>

1. <span data-ttu-id="385d7-153">アプリケーション ソースをコンパイルし、FileX および ThreadX のランタイム ライブラリ ***fx.a** _ (または _*_fx.lib_*_) および _*_tx.a_*_ (または _*_tx.lib_\*\*) とリンクします。</span><span class="sxs-lookup"><span data-stu-id="385d7-153">Compile application source and link with the FileX and ThreadX run-time libraries, ***fx.a** _ (or _*_fx.lib_*_) and _*_tx.a_*_ (or _*_tx.lib_\*\*).</span></span> <span data-ttu-id="385d7-154">結果のイメージはターゲットにダウンロードして、実行できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-154">The resulting image can be downloaded to the target and executed!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="385d7-155">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="385d7-155">Troubleshooting</span></span>

<span data-ttu-id="385d7-156">各 FileX ポートには、デモンストレーション アプリケーションが付属しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-156">Each FileX port is delivered with a demonstration application.</span></span> <span data-ttu-id="385d7-157">ターゲット ハードウェアまたは特定のデモンストレーション環境のいずれかで最初にデモンストレーション システムを稼働させることを常にお勧めします。</span><span class="sxs-lookup"><span data-stu-id="385d7-157">It is always a good idea to get the demonstration system running first—either on the target hardware or a specific demonstration environment.</span></span>

<span data-ttu-id="385d7-158">デモンストレーション システムが動作しない場合は、次のことを試して問題を絞り込んでください。</span><span class="sxs-lookup"><span data-stu-id="385d7-158">If the demonstration system does not work, try the following things to narrow the problem:</span></span>

1. <span data-ttu-id="385d7-159">デモンストレーションがどの程度を実行されているかを調べます。</span><span class="sxs-lookup"><span data-stu-id="385d7-159">Determine how much of the demonstration is running.</span></span>
1. <span data-ttu-id="385d7-160">スタック サイズを増やします (これは、デモンストレーションよりも実際のアプリケーション コードでより重要です)。</span><span class="sxs-lookup"><span data-stu-id="385d7-160">Increase stack sizes (this is more important in actual application code than it is for the demonstration).</span></span>
1. <span data-ttu-id="385d7-161">32 KB の既定の RAM ディスク サイズ用に十分な RAM があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="385d7-161">Ensure there is enough RAM for the 32KBytes default RAM disk size.</span></span> <span data-ttu-id="385d7-162">基本的なシステムは、もっと少ない RAM でも動作しますが、十分なメモリがない場合は、RAM ディスクの使用量が増えるにつれて、問題が表面化します。</span><span class="sxs-lookup"><span data-stu-id="385d7-162">The basic system will operate on much less RAM; however, as more of the RAM disk is used, problems will surface if there is not enough memory.</span></span>
1. <span data-ttu-id="385d7-163">最近の変更を一時的にバイパスして、問題が解消または変化するかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="385d7-163">Temporarily bypass any recent changes to see if the problem disappears or changes.</span></span> <span data-ttu-id="385d7-164">このような情報は、Microsoft サポート エンジニアにとって有益です。</span><span class="sxs-lookup"><span data-stu-id="385d7-164">Such information should prove useful to Microsoft support engineers.</span></span> <span data-ttu-id="385d7-165">「カスタマー サポート センター」に記載されている手順に従って、トラブルシューティング手順で収集した情報を送信します。</span><span class="sxs-lookup"><span data-stu-id="385d7-165">Follow the procedures outlined in "Customer Support Center" to send the information gathered from the troubleshooting steps.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="385d7-166">構成オプション</span><span class="sxs-lookup"><span data-stu-id="385d7-166">Configuration Options</span></span>

<span data-ttu-id="385d7-167">FileX を使用して FileX ライブラリとアプリケーションを構築する場合、構成オプションがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="385d7-167">There are several configuration options when building the FileX library and the application using FileX.</span></span> <span data-ttu-id="385d7-168">以下のオプションは、アプリケーション ソース内、コマンド ライン上、または ***fx_user.h*** インクルード ファイル内で定義できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-168">The options below can be defined in the application source, on the command line, or within the ***fx_user.h*** include file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="385d7-169">"***fx_user.h** 内で定義されているオプションが適用されるのは、アプリケーションと ThreadX ライブラリを構築する際に **_FX_INCLUDE_USER_DEFINE_FILE_\*_ が定義されている場合のみです。_"FileX をスタンドアロン モードで使用する場合 (** FX_STANDALONE_ENABLE*\* を定義する必要があります)、ThreadX ファイルまたはライブラリは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="385d7-169">*Options defined in **fx_user.h** are applied only if the application and ThreadX library are built with **_FX_INCLUDE_USER_DEFINE_FILE_\*_ defined._ When using FileX in Standalone mode (** FX_STANDALONE_ENABLE*\* must be defined), ThreadX files/libraries are not required.</span></span>

<span data-ttu-id="385d7-170">次の一覧では、各構成オプションについて詳しく説明しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-170">The following list describes each configuration option in detail:</span></span>

|<span data-ttu-id="385d7-171">定義</span><span class="sxs-lookup"><span data-stu-id="385d7-171">Define</span></span>|<span data-ttu-id="385d7-172">意味</span><span class="sxs-lookup"><span data-stu-id="385d7-172">Meaning</span></span>|
|----------    |-----------|
|<span data-ttu-id="385d7-173">FX_MAX_LAST_NAME_LEN</span><span class="sxs-lookup"><span data-stu-id="385d7-173">FX_MAX_LAST_NAME_LEN</span></span>        |<span data-ttu-id="385d7-174">この値は、完全なパス名を含むファイル名の最大長を定義します。</span><span class="sxs-lookup"><span data-stu-id="385d7-174">This value defines the maximum file name length, which includes full path name.</span></span> <span data-ttu-id="385d7-175">既定では、この値は 256 です。</span><span class="sxs-lookup"><span data-stu-id="385d7-175">By default, this value is 256.</span></span>|
|<span data-ttu-id="385d7-176">FX_DONT_UPDATE_OPEN_FILES</span><span class="sxs-lookup"><span data-stu-id="385d7-176">FX_DONT_UPDATE_OPEN_FILES</span></span>    |<span data-ttu-id="385d7-177">定義済み。既に開いているファイルは FileX によって更新されません。</span><span class="sxs-lookup"><span data-stu-id="385d7-177">Defined, FileX does not update already opened files.</span></span>|
|<span data-ttu-id="385d7-178">FX_MEDIA_DISABLE_SEARCH_CACHE</span><span class="sxs-lookup"><span data-stu-id="385d7-178">FX_MEDIA_DISABLE_SEARCH_CACHE</span></span>    |<span data-ttu-id="385d7-179">定義済み。ファイル検索キャッシュの最適化は無効になっています。</span><span class="sxs-lookup"><span data-stu-id="385d7-179">Defined, the file search cache optimization is disabled.</span></span>|
|<span data-ttu-id="385d7-180">FX_MEDIA_DISABLE_SEARCH_CACHE</span><span class="sxs-lookup"><span data-stu-id="385d7-180">FX_MEDIA_DISABLE_SEARCH_CACHE</span></span>    |<span data-ttu-id="385d7-181">定義済み。ファイル検索キャッシュの最適化は無効になっています。</span><span class="sxs-lookup"><span data-stu-id="385d7-181">Defined, the file search cache optimization is disabled.</span></span>|
|<span data-ttu-id="385d7-182">FX_DISABLE_DIRECT_DATA_READ_CACHE_FILL</span><span class="sxs-lookup"><span data-stu-id="385d7-182">FX_DISABLE_DIRECT_DATA_READ_CACHE_FILL</span></span> |<span data-ttu-id="385d7-183">定義済み。キャッシュの直接読み取りセクター更新は無効になっています。</span><span class="sxs-lookup"><span data-stu-id="385d7-183">Defined, the direct read sector update of cache is disabled.</span></span>|
|<span data-ttu-id="385d7-184">FX_MEDIA_STATISTICS_DISABLE</span><span class="sxs-lookup"><span data-stu-id="385d7-184">FX_MEDIA_STATISTICS_DISABLE</span></span> |<span data-ttu-id="385d7-185">定義済み。メディア統計の収集は無効になっています。</span><span class="sxs-lookup"><span data-stu-id="385d7-185">Defined, gathering of media statistics is disabled.</span></span>|
|<span data-ttu-id="385d7-186">FX_SINGLE_OPEN_LEGACY</span><span class="sxs-lookup"><span data-stu-id="385d7-186">FX_SINGLE_OPEN_LEGACY</span></span> |<span data-ttu-id="385d7-187">定義済み。同じファイルに対する従来の単一オープン ロジックは有効になっています。</span><span class="sxs-lookup"><span data-stu-id="385d7-187">Defined, legacy single open logic for the same file is enabled.</span></span>|
|<span data-ttu-id="385d7-188">FX_RENAME_PATH_INHERIT</span><span class="sxs-lookup"><span data-stu-id="385d7-188">FX_RENAME_PATH_INHERIT</span></span>    |<span data-ttu-id="385d7-189">定義済み。名前の変更時にパス情報が継承されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-189">Defined, renaming inherits path information.</span></span>|
|<span data-ttu-id="385d7-190">FX_DISABLE_ERROR_CHECKING</span><span class="sxs-lookup"><span data-stu-id="385d7-190">FX_DISABLE_ERROR_CHECKING</span></span>    |<span data-ttu-id="385d7-191">基本的な FileX エラー チェック API を削除します。これにより、パフォーマンスが向上し (最大 30%)、コード サイズが小さくなります。</span><span class="sxs-lookup"><span data-stu-id="385d7-191">Removes the basic FileX error checking API and results in improved performance (as much as 30%) and smaller code size.</span></span>|
|<span data-ttu-id="385d7-192">FX_MAX_LONG_NAME_LEN</span><span class="sxs-lookup"><span data-stu-id="385d7-192">FX_MAX_LONG_NAME_LEN</span></span>    |<span data-ttu-id="385d7-193">FileX のファイル名の最大サイズを指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-193">Specifies the maximum file name size for FileX.</span></span> <span data-ttu-id="385d7-194">既定値は 256 ですが、これはコマンドライン定義でオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="385d7-194">The default value is 256, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="385d7-195">有効な値の範囲は 13 から 256 です。</span><span class="sxs-lookup"><span data-stu-id="385d7-195">Legal values range between 13 and 256.</span></span>|
|<span data-ttu-id="385d7-196">FX_MAX_SECTOR_CACHE</span><span class="sxs-lookup"><span data-stu-id="385d7-196">FX_MAX_SECTOR_CACHE</span></span>|<span data-ttu-id="385d7-197">FileX でキャッシュできる論理セクターの最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-197">Specifies the maximum number of logical sectors that can be cached by FileX.</span></span> <span data-ttu-id="385d7-198">キャッシュできる実際のセクター数は、この定数と、fx_media_open で指定されたメモリ容量に収まるセクター数のうち、より小さい方になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-198">The actual number of sectors that can be cached is lesser of this constant and how many sectors can fit in the amount of memory supplied at fx_media_open.</span></span> <span data-ttu-id="385d7-199">既定値は 256 です。</span><span class="sxs-lookup"><span data-stu-id="385d7-199">The default value is 256.</span></span> <span data-ttu-id="385d7-200">すべての値は 2 の累乗である必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-200">All values must be a power of 2.</span></span>|
|<span data-ttu-id="385d7-201">FX_FAT_MAP_SIZE</span><span class="sxs-lookup"><span data-stu-id="385d7-201">FX_FAT_MAP_SIZE</span></span>    |<span data-ttu-id="385d7-202">FAT 更新マップで表現できるセクターの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-202">Specifies the number of sectors that can be represented in the FAT update map.</span></span> <span data-ttu-id="385d7-203">既定値は 256 ですが、これはコマンドライン定義でオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="385d7-203">The default value is 256, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="385d7-204">値を大きくすると、セカンダリ FAT セクターの不要な更新を低減するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="385d7-204">Larger values help reduce unneeded updates of secondary FAT sectors.</span></span>|
|<span data-ttu-id="385d7-205">FX_MAX_FAT_CACHE</span><span class="sxs-lookup"><span data-stu-id="385d7-205">FX_MAX_FAT_CACHE</span></span>    |<span data-ttu-id="385d7-206">内部 FAT キャッシュ内のエントリの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-206">Specifies the number of entries in the internal FAT cache.</span></span> <span data-ttu-id="385d7-207">既定値は 16 ですが、これはコマンドライン定義でオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="385d7-207">The default value is 16, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="385d7-208">すべての値は 2 の累乗である必要があります。</span><span class="sxs-lookup"><span data-stu-id="385d7-208">All values must be a power of 2.</span></span>|
|<span data-ttu-id="385d7-209">FX_FAULT_TOLERANT</span><span class="sxs-lookup"><span data-stu-id="385d7-209">FX_FAULT_TOLERANT</span></span>    |<span data-ttu-id="385d7-210">定義した場合、FileX は、すべてのシステム セクター (ブート、FAT、およびディレクトリ セクター) の書き込み要求を即座にメディアのドライバーに渡します。</span><span class="sxs-lookup"><span data-stu-id="385d7-210">When defined, FileX immediately passes write requests of all system sectors (boot, FAT, and directory sectors) to the media's driver.</span></span> <span data-ttu-id="385d7-211">これにより、パフォーマンスが低下する可能性がありますが、影響はクラスターの紛失に制限されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-211">This potentially decreases performance, but helps limit corruption to lost clusters.</span></span> <span data-ttu-id="385d7-212">この機能を有効にしても FileX フォールト トレラント モジュールが自動的に有効にならないことに注意してください。これを有効にするには、次の項目を定義します。</span><span class="sxs-lookup"><span data-stu-id="385d7-212">Note that enabling this feature does not automatically enable FileX Fault Tolerant Module, which is enabled by defining</span></span>|
|<span data-ttu-id="385d7-213">FX_FAULT_TOLERANT_DATA</span><span class="sxs-lookup"><span data-stu-id="385d7-213">FX_FAULT_TOLERANT_DATA</span></span>    |<span data-ttu-id="385d7-214">定義した場合、FileX は、すべてのファイル データ書き込み要求を即座にメディアのドライバーに渡します。</span><span class="sxs-lookup"><span data-stu-id="385d7-214">When defined, FileX immediately passes all file data write requests to the media's driver.</span></span> <span data-ttu-id="385d7-215">これにより、パフォーマンスが低下する可能性がありますが、ファイル データの紛失に制限されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-215">This potentially decreases performance, but helps limit lost file data.</span></span> <span data-ttu-id="385d7-216">この機能を有効にしても FileX フォールト トレラント モジュールが自動的に有効にならないことに注意してください。これを有効にするには、***FX_ENABLE_FAULT_TOLERANT*** を定義します。</span><span class="sxs-lookup"><span data-stu-id="385d7-216">Note that enabling this feature does not automatically enable FileX Fault Tolerant Module, which is enabled by defining ***FX_ENABLE_FAULT_TOLERANT***</span></span>|
|<span data-ttu-id="385d7-217">FX_NO_LOCAL_PATH</span><span class="sxs-lookup"><span data-stu-id="385d7-217">FX_NO_LOCAL_PATH</span></span>|<span data-ttu-id="385d7-218">FileX からローカル パス ロジックを削除します。これにより、コード サイズが小さくなります。</span><span class="sxs-lookup"><span data-stu-id="385d7-218">Removes local path logic from FileX, resulting in smaller code size.</span></span>|
|<span data-ttu-id="385d7-219">FX_NO_TIMER</span><span class="sxs-lookup"><span data-stu-id="385d7-219">FX_NO_TIMER</span></span>|<span data-ttu-id="385d7-220">FileX システムの時刻と日付を更新するための ThreadX タイマーの設定をなくします。</span><span class="sxs-lookup"><span data-stu-id="385d7-220">Eliminates the ThreadX timer setup to update the FileX system time and date.</span></span> <span data-ttu-id="385d7-221">これにより、既定の時刻と日付がすべてのファイル操作に適用されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-221">Doing so causes default time and date to be placed on all file operations.</span></span>|
|<span data-ttu-id="385d7-222">FX_UPDATE_RATE_IN_SECONDS</span><span class="sxs-lookup"><span data-stu-id="385d7-222">FX_UPDATE_RATE_IN_SECONDS</span></span>    |<span data-ttu-id="385d7-223">FileX のシステム時刻を調整するレートを指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-223">Specifies rate at which system time in FileX is adjusted.</span></span> <span data-ttu-id="385d7-224">既定値は 10 で、FileX のシステム時刻が 10 秒ごとに更新されることを指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-224">By default, value is 10, specifying that the FileX system time is updated every 10 seconds.</span></span>|
|<span data-ttu-id="385d7-225">FX_ENABLE_EXFAT</span><span class="sxs-lookup"><span data-stu-id="385d7-225">FX_ENABLE_EXFAT</span></span>| <span data-ttu-id="385d7-226">定義した場合、exFAT ファイル システムを処理するためのロジックが FileX で有効になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-226">When defined, the logic for handling exFAT file system is enabled in FileX.</span></span> <span data-ttu-id="385d7-227">既定では、このシンボルは定義されません。</span><span class="sxs-lookup"><span data-stu-id="385d7-227">By default this symbol is not defined.</span></span>| 
|<span data-ttu-id="385d7-228">FX_UPDATE_RATE_IN_TICKS</span><span class="sxs-lookup"><span data-stu-id="385d7-228">FX_UPDATE_RATE_IN_TICKS</span></span>| <span data-ttu-id="385d7-229">基になる ThreadX タイマーの頻度を除いて、***FX_UPDATE_RATE_IN_SECONDS*** (上記を参照) と同じレートを指定します。</span><span class="sxs-lookup"><span data-stu-id="385d7-229">Specifies the same rate as ***FX_UPDATE_RATE_IN_SECONDS*** (see above), except in terms of the underlying ThreadX timer frequency.</span></span> <span data-ttu-id="385d7-230">既定値は 1,000 で、ThreadX タイマー レートが 10 ミリ秒、間隔が 10 秒と想定しています。</span><span class="sxs-lookup"><span data-stu-id="385d7-230">The default is 1000, which assumes a 10ms ThreadX timer rate and a 10 second interval.</span></span>|
|<span data-ttu-id="385d7-231">FX_SINGLE_THREAD</span><span class="sxs-lookup"><span data-stu-id="385d7-231">FX_SINGLE_THREAD</span></span>|<span data-ttu-id="385d7-232">FileX ソースから ThreadX 保護ロジックを削除します。</span><span class="sxs-lookup"><span data-stu-id="385d7-232">Eliminates ThreadX protection logic from the FileX source.</span></span> <span data-ttu-id="385d7-233">これは、FileX を 1 つのスレッドからのみ使用している場合、または ThreadX なしで FileX を使用している場合に使用してください。</span><span class="sxs-lookup"><span data-stu-id="385d7-233">It should be used if FileX is being used only from one thread or if FileX is being used without ThreadX.</span></span>|
|<span data-ttu-id="385d7-234">FX_DRIVER_USE_64BIT_LBA</span><span class="sxs-lookup"><span data-stu-id="385d7-234">FX_DRIVER_USE_64BIT_LBA</span></span>|<span data-ttu-id="385d7-235">定義した場合、I/O ドライバーで使用される 64 ビット セクター アドレスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="385d7-235">When defined, enables 64-bit sector addresses used in I/O driver.</span></span> <span data-ttu-id="385d7-236">既定では、このオプションは定義されません。</span><span class="sxs-lookup"><span data-stu-id="385d7-236">By default this option is not defined.</span></span>|
|<span data-ttu-id="385d7-237">FX_ENABLE_FAULT_TOLERANT</span><span class="sxs-lookup"><span data-stu-id="385d7-237">FX_ENABLE_FAULT_TOLERANT</span></span>| <span data-ttu-id="385d7-238">定義した場合、FileX フォールト トレラント モジュールを有効にします。</span><span class="sxs-lookup"><span data-stu-id="385d7-238">When defined, enables FileX Fault Tolerant Module.</span></span> <span data-ttu-id="385d7-239">フォールト トレラントを有効にすると、シンボル ***FX_FAULT_TOLERANT** _ および _*_FX_FAULT_TOLERANT_DATA_\*\* が自動的に定義されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-239">Enabling Fault Tolerant automatically defines the symbol ***FX_FAULT_TOLERANT** _ and _*_FX_FAULT_TOLERANT_DATA_\*\*.</span></span> <span data-ttu-id="385d7-240">既定では、このオプションは定義されません。</span><span class="sxs-lookup"><span data-stu-id="385d7-240">By default this option is not defined.</span></span>|
|<span data-ttu-id="385d7-241">FX_FAULT_TOLERANT_BOOT_INDEX</span><span class="sxs-lookup"><span data-stu-id="385d7-241">FX_FAULT_TOLERANT_BOOT_INDEX</span></span>|<span data-ttu-id="385d7-242">フォールト トレラント ログのクラスターが存在するブート セクターのバイト オフセットを定義します。</span><span class="sxs-lookup"><span data-stu-id="385d7-242">Defines byte offset in the boot sector where the cluster for the fault tolerant log is.</span></span> <span data-ttu-id="385d7-243">既定では、この値は 116 です。</span><span class="sxs-lookup"><span data-stu-id="385d7-243">By default this value is 116.</span></span> <span data-ttu-id="385d7-244">このフィールドでは 4 バイトが使用されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-244">This field takes 4 bytes.</span></span> <span data-ttu-id="385d7-245">FAT 12、16、32、または exFAT 仕様で予約済みとしてマークされているため、バイト 116 から 119 が選択されます。</span><span class="sxs-lookup"><span data-stu-id="385d7-245">Bytes 116 through 119 are chosen because they are marked as reserved by FAT 12/16/32/exFAT specification.</span></span>|
|<span data-ttu-id="385d7-246">FX_FAULT_TOLERANT_MINIMAL_CLUSTER</span><span class="sxs-lookup"><span data-stu-id="385d7-246">FX_FAULT_TOLERANT_MINIMAL_CLUSTER</span></span>|<span data-ttu-id="385d7-247">このシンボルは非推奨です。</span><span class="sxs-lookup"><span data-stu-id="385d7-247">This symbol is deprecated.</span></span> <span data-ttu-id="385d7-248">これは、FileX フォールト トレラントで使用されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="385d7-248">It is no longer being used by FileX Fault Tolerant.</span></span>|
|<span data-ttu-id="385d7-249">FX_STANDALONE_ENABLE</span><span class="sxs-lookup"><span data-stu-id="385d7-249">FX_STANDALONE_ENABLE</span></span>|<span data-ttu-id="385d7-250">定義済み。FileX をスタンドアロン モード (Azure RTOS なし) で使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="385d7-250">Defined, enables FileX to be used in standalone mode (without Azure RTOS).</span></span> <span data-ttu-id="385d7-251">既定では、このシンボルは定義されません。</span><span class="sxs-lookup"><span data-stu-id="385d7-251">By default this symbol is not defined.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="385d7-252">**FX_STANDALONE_ENABLE** を定義すると、ローカル パス ロジックと ThreadX タイマーの設定が無効になります。</span><span class="sxs-lookup"><span data-stu-id="385d7-252">When **FX_STANDALONE_ENABLE** is defined, Local path logic and ThreadX timer setup are disabled.</span></span>

## <a name="filex-version-id"></a><span data-ttu-id="385d7-253">FileX バージョン ID</span><span class="sxs-lookup"><span data-stu-id="385d7-253">FileX Version ID</span></span>

<span data-ttu-id="385d7-254">FileX の現在のバージョンは、実行時にユーザーとアプリケーション ソフトウェアの両方で取得できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-254">The current version of FileX is available both to the user and the application software during run-time.</span></span> <span data-ttu-id="385d7-255">プログラマーは、**fx_port.h** ファイルを調べることで FileX のバージョンを確認できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-255">The programmer can obtain the FileX version from examination of the **fx_port.h** file.</span></span> <span data-ttu-id="385d7-256">さらに、このファイルには、対応するポートのバージョン履歴も含まれています。</span><span class="sxs-lookup"><span data-stu-id="385d7-256">In addition, this file also contains a version history of the corresponding port.</span></span> <span data-ttu-id="385d7-257">アプリケーション ソフトウェアは、グローバル文字列 **_ _fx_version_id_** を調べることで FileX バージョンを取得できます。</span><span class="sxs-lookup"><span data-stu-id="385d7-257">Application software can obtain the FileX version by examining the global string **_ _fx_version_id_**.</span></span>
