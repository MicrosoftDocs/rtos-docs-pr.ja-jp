---
title: GUIX Studio で生成されるコード
description: 画面とリソースの編集が完了すると、GUIX Studio によって、埋め込みアプリケーションに組み込むことができる出力ファイルのセットが生成されます。
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 78b1ec1eea3ec2fcae48c64ad15931f44f34538c876dc8a267c2b1a84234320a
ms.sourcegitcommit: 93d716cf7e3d735b18246d659ec9ec7f82c336de
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2021
ms.locfileid: "116785704"
---
# <a name="chapter-6-guix-studio-generated-code"></a>第 6 章 - GUIX Studio で生成されるコード

画面とリソースの編集が完了すると、GUIX Studio によって、埋め込みアプリケーションに組み込むことができる出力ファイルのセットが生成されます。 出力ファイルを生成するには、[プロジェクト] メニュー項目の * **[Generate Resource Files]\(リソース ファイルの生成\)** _ および _ *_[_Generate Specifications]\(仕様の生成\)_** を選択します。 GUIX Studio によって生成される 'c' 言語ソース コード ファイルは、コンパイルして埋め込みアプリケーションのソース コードとリンクすることを目的としています。 バイナリ形式のリソース ファイルが生成される場合は、このファイルをターゲット上の不揮発性ストレージ領域にプログラミングする必要があり、実行時にバイナリ リソースをインストールするために GUIX API 関数 gx_binres_theme_install を使用する必要があります。

ユーザーの埋め込みアプリケーション コードにより、GUIX Studio によって生成されたコードが参照されます。 さらに、GUIX Studio で生成されたコードでは、プロジェクト内で指定されたすべてのカスタム ウィジェット描画、イベント処理、およびメモリ割り当ての関数がユーザーの埋め込みアプリケーション コード内で定義されることが想定されます。 そうでない場合は、アプリケーションをビルドするときにリンク エラーが表示されます。

> [!NOTE]
> ユーザーは、GUIX Studio によって生成されたコードを変更する必要はなく、そうしないようにする必要があります。 すべての UI 変更は、関連付けられている GUIX Studio プロジェクト内で行う必要があります。 これにより、埋め込みアプリケーションとプロジェクトの同期が維持されます。

## <a name="generating-resource-files"></a>リソース ファイルの作成

GUIX Studio によって生成されるリソース ファイルには、すべての GUIX Studio リソース (色、フォント、ピクセルマップ、および文字列) を定義する事前設定されたデータ構造が含まれています。これは、実質的にはプロジェクトの "***リソース ビュー***" 内で定義されたすべてのリソースです。 これらのリソース ファイルは、ソース コードまたはバイナリ形式で生成できます。

既定では、2 つのファイルが生成されます。一方のファイルは標準 C ソース コード ファイルで、もう一方は、プロジェクト内で定義されている GUIX リソースにアクセスするためにアプリケーション コードが必要とする外部参照と定数を提供する C ヘッダー ファイルです。 ファイル名の形式は次のとおりです。

**{*project-name*}_resources.h**

**{*project-name*}_resources.c**

たとえば、"***シンプルな***" GUIX Studio プロジェクト用に作成されたリソース ファイルは、次のようになります。

**simple_resources.h**

**simple_resources.c**

リソース ファイルを生成するには、_*_[プロジェクト]_*_ メニュー オプションの * **[Generate Resource Files]\(リソース ファイルの生成\)** _ オプションを選択します。 リソース ファイルの保存先は、_*_[Configure Project]\(プロジェクトの構成\)_*_ ダイアログで指定します。これには、_ *_[_構成]_** メニュー項目の _*_[Configure Project/Displays]\(プロジェクト/表示の構成\)_*_ オプションを使用してアクセスできます。

ピクセルマップとフォント リソースについては、関連付けられているリソース編集ダイアログ内で、ピクセルマップとフォントごとにカスタム出力ファイル名を指定できます。 この機能を使用すると、1 つの共通出力ファイルにすべてのリソースを配置するのではなく、非常に大きなリソースを別々のファイルに配置することができます。 フォントまたはピクセルマップ リソースにオーバーライドされたファイル名を指定しない場合、これらのリソースは共通のリソース ファイルに書き込まれます。

バイナリ リソースを使用する場合は、未加工または標準の s-record 出力形式を指定できます。 バイナリ リソースは、アプリケーション コードでコンパイルまたはリンクされず、代わりに gx_binres_them_load() API を使用して実行時に読み込まれます。 この API サービスにより、不揮発性メモリに格納されているリソースを指すリソース テーブルが構築されます。 次に、gx_display_theme_install(); を使用して、特定の表示でこれらのリソースをインストールできます

## <a name="generating-specification-code"></a>仕様コードの生成

GUIX Studio によって生成される仕様ファイルには、GUIX Studio 内でデザインされた UI を作成するための C コードがすべて含まれています。 このコードでは、このプロジェクトに対して生成されたリソース ファイルも参照されます。 ユーザーのアプリケーション コードにより、このコードが呼び出され、プロジェクト内で定義されている UI オブジェクトが実際に作成されます。 さらに、ユーザーのアプリケーション コードには、プロジェクト内で指定されているすべてのカスタム ウィジェット描画、イベント処理、およびメモリ割り当て関数が含まれています。 既定では、2 つのファイルが生成されます。一方のファイルは標準 C ソース コード ファイルで、もう一方は、GUIX Studio 仕様にアクセスするためにアプリケーション コードが必要とする外部参照と定数を提供する C ヘッダー ファイルです。 ファイル名の形式は次のとおりです。

**{*project-name*}_specifications.h**

**{*project-name*}_specifications.c**

たとえば、"***シンプルな***" Guix Studio プロジェクト用に作成された仕様ファイルは、次のようになります。

**simple_specifications.h**

**simple_specifications.c**

仕様ファイルの生成は、_*_[プロジェクト]_*_ メニュー オプションの * **[Generate Specification Files]\(仕様ファイルの生成\)** _ オプションを選択することで実現されます。 仕様ファイルの保存先は、_*_[Configure Project]\(プロジェクトの構成\)_*_ ダイアログで指定します。これには、_ *_[_構成]_** メニュー項目の _*_[Configure Project/Displays]\(プロジェクト/表示の構成\)_*_ オプションを使用してアクセスできます。

## <a name="integrating-with-user-code"></a>ユーザー コードとの統合

GUIX Studio によって生成されるリソースおよび仕様ファイルの統合は簡単で、次の手順に従うだけです。

1. リソースおよび仕様ファイルを埋め込みビルド環境にコピーするか、パス設定を使用してアクセス可能にします
2. すべてのリソースおよび仕様ファイルを埋め込み IDE プロジェクトまたはメイクファイルに追加します
3. アプリケーションの埋め込みコードによって、リソースおよび仕様ファイルに含まれる UI を初期化および作成するために必要な関数が呼び出されることを確認します
4. アプリケーションの埋め込みコードに、必要なカスタム ウィジェットの描画、イベント処理、およびメモリ割り当ての関数がすべて含まれていることを確認します
5. アプリケーションをビルド (コンパイルおよびリンク) します
6. アプリケーションを実行します。