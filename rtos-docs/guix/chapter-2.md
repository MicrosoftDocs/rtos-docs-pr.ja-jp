---
title: 第 2 章 - GUIX のインストールと使用
description: この章では、高パフォーマンス ユーザー インターフェイス製品 GUIX のインストール、設定、および使用に関連するさまざまな問題について説明します。
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6527227062fc667b3f527a798d6621914c374c5c
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811207"
---
# <a name="chapter-2---installation-and-use-of-guix"></a>第 2 章 - GUIX のインストールと使用

この章では、高パフォーマンス ユーザー インターフェイス製品 GUIX のインストール、設定、および使用に関連するさまざまな問題について説明します。  

## <a name="host-considerations"></a>ホストに関する考慮事項

埋め込み開発は、通常、Windows または Linux (Unix) ホスト コンピューターで行われます。 アプリケーションはコンパイルおよびリンクされた後、ホスト上に実行可能ファイルが生成され、実行のためにターゲット ハードウェアにダウンロードされます。

通常、ターゲットのダウンロードは、開発ツールのデバッガー内から実行されます。 ダウンロード後、デバッガーは、メモリおよびプロセッサ レジスタへのアクセスだけでなく、ターゲットの実行制御 (移動、停止、ブレークポイントなど) を提供します。

開発ツール デバッガーのほとんどが、JTAG (IEEE 1149.1) やバックグラウンド デバッグ モード (BDM) などのオンチップ デバッグ (OCD) 接続を介してターゲット ハードウェアと通信します。 また、デバッガーは、インサーキット エミュレーション (ICE) 接続を使用してターゲット ハードウェアと通信することもあります。 OCD 接続と ICE 接続はどちらも、ターゲットの常駐ソフトウェアへの侵入を最小限に抑えた堅牢なソリューションを提供します。

ホスト上で使用されるリソースについては、GUIX のソースコードは ASCII 形式で提供され、ホスト コンピューターのハード ディスク上に約 30 MB の空き領域が必要です。

## <a name="target-considerations"></a>ターゲットに関する考慮事項

GUIX は、ターゲット上に 5 KB から 80 KB の読み取り専用メモリ (ROM) を必要とします。 また、GUIX スレッド スタックおよびその他のグローバル データ構造用に、ターゲットのランダム アクセス メモリ (RAM) がさらに 5 KB から 10 KB 必要です。

さらに、GUIX では、ThreadX タイマーと ThreadX ミューテックス オブジェクトを使用する必要があります。 これらの機能は、GUIX 内の定期的な処理のニーズとスレッド保護に使用されます。

## <a name="product-distribution"></a>製品の配布

Azure RTOS GUIX は、<https://github.com/azure-rtos/guix/> のパブリック ソース コード リポジトリから入手できます。

ほとんどの製品配布に共通する重要ファイルの一覧を次に示します。

| ファイル名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 説明   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| gx_api.h        | この C ヘッダー ファイルには、すべてのシステム等価物、データ構造、およびサービス プロトタイプが含まれています。 |
| gx_port.h       | この C ヘッダー ファイルには、ターゲット固有および開発ツール固有のすべてのデータ定義とデータ構造が含まれています。                                                                                                                                         |
| gx.a (または gx.lib) | これは、GUIX C ライブラリのバイナリ バージョンです。 これは、通常、提供されている GUIX ライブラリのソース ファイルをコンパイルおよびアーカイブすることで構築されます。ただし、お使いのハードウェア ターゲットおよびライセンスの種類によっては、このライブラリは、事前構築済みフォームで提供される場合もあります。 |
|

> [!IMPORTANT]
> *すべてのファイルが小文字であるため、コマンドは容易に Linux (Unix) 開発プラットフォームに簡単に変換できます。*

## <a name="guix-installation"></a>GUIX のインストール

GUIX は、GitHub リポジトリをローカル コンピューターに複製することによってインストールされます。 お使いの PC 上に GUIX リポジトリの複製を作成するための一般的な構文を次に示します。

```c
    git clone https://github.com/azure-rtos/guix
```

GitHub メイン ページ上のダウンロード ボタンを使用して、リポジトリのコピーをダウンロードすることもできます。

また、オンライン リポジトリのフロント ページ上で GUIX ライブラリを構築する手順も紹介します。

>[!NOTE]  
> *アプリケーション ソフトウェアは、通常 **gx.a** (または **gx.lib**) と呼ばれる GUIX ライブラリ ファイルと、C インクルード ファイル **gx_api.h** および **gx_port.h** にアクセスする必要があります。これを行うには、開発ツールの適切なパスを設定するか、これらのファイルをアプリケーション開発領域にコピーします。*

## <a name="using-guix"></a>GUIX の使用

GUIX の使い方は簡単です。 基本的に、コンパイル中にアプリケーション コードに ***gx_api.h** を追加し、GUIX ライブラリ _*_gx.a_*_ (または _ *_gx.lib_**) とリンクする必要があります。

GUIX アプリケーションをビルドするには、次の 4 つの簡単な手順が必要です。

| 手順   | 説明    |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 手順&nbsp;1: | ***gx_api.h*** ファイルを、GUIX サービスまたはデータ構造を使用するすべてのアプリケーション ファイル内に追加します。                                                               |
| 手順&nbsp;2: | _ *_tx_application_define_** 関数またはアプリケーション スレッドから ***gx_system_initialize** _ を呼び出して、GUIX システムを初期化します。                       |
| 手順&nbsp;3: | 表示インスタンスを作成し、ディスプレイのキャンバスを作成して、ルート ウィンドウおよびその他の必要なウィンドウまたはウィジェットを作成します。                                 |
| 手順&nbsp;4: | アプリケーション ソースをコンパイルし、GUIX ランタイム ライブラリ ***gx. a** _ (または _*_gx.lib_**) とリンクします。 結果のイメージはターゲットにダウンロードして、実行できます。 |

## <a name="troubleshooting"></a>トラブルシューティング

各 GUIX ポートには、特定のディスプレイ ハードウェア上で実行されるデモンストレーション アプリケーションが用意されています。 どのバージョンの GUIX でも、用意されている基本デモンストレーションは同じです。 最初にデモンストレーション システムを実行することをお勧めします。

デモンストレーション システムが正常に実行されない場合は、次の操作を行って、問題を絞り込んでください。

1. 実行中のデモンストレーションの量を確認します。

2. コンパイル時の定数 **GX_THREAD_STACK_SIZE** を変更し、GUIX ライブラリを再コンパイルして、GUIX スレッドのスタック サイズを増やします

3. [構成オプション] セクションに一覧表示されている適切なデバッグ オプションを使用して、GUIX ライブラリを再コンパイルします。

4. すべての API 呼び出しからリターン状態を確認します。

5. 関数 ***_gx_system_error_process*** にブレークポイントを設定して、内部システム エラーが発生していないかどうかを確認します。 エラー コードと呼び出し元に、問題の原因に関する手掛かりがあるはずです。

6. 最近の変更を一時的にバイパスして、問題が解消または変更するかどうかを確認します。 このような情報は、Microsoft サポート エンジニアにとって有益です。

トラブルシューティング手順で収集した情報を送信するには、「必要なもの」セクションに記載されている手順に従ってください。

## <a name="configuration-options"></a>構成オプション

GUIX を使用して GUIX ライブラリとアプリケーションを構築する場合、構成オプションがいくつかあります。 これらのオプションは、ご自身のアプリケーション要件に合わせてライブラリ サイズと機能セットを調整するために使用されます。 たとえば、ご自身のアプリケーションの 1 つのスレッドのみが GUIX API サービスを利用する場合、構成フラグ **GX_DISABLE_MULTITHREAD_SUPPORT** は、複数のスレッドによるプリエンプションからの重要なコード セクション保護に伴うオーバーヘッドを排除するよう定義する必要があります。 さまざまな構成フラグを、アプリケーション ソース内、コマンド ライン上、または **_gx_user.h_** インクルード ファイル内で定義できます。

GUIX ライブラリ構成フラグが変更された場合は必ず、GUIX ライブラリとお使いのアプリケーション モジュールの両方をリビルドして、構成の変更を有効にする必要があります。

構成フラグの完全な一覧については、「付録 H: GUIX のビルド時の構成フラグ」をご覧ください。

## <a name="guix-version-id"></a>GUIX バージョン ID

現在使用している GUIX のバージョンは、実行時にユーザーとアプリケーション ソフトウェアのどちらからでも確認できます。 プログラマーは ***gx_port.h** _ ファイルを調べることで GUIX のバージョンを確認できます。 さらに、このファイルには、対応するポートのバージョン履歴も含まれています。アプリケーション ソフトウェアで GUIX バージョンを取得するには、_*_gx_port.h_** 内のグローバル文字列 _ *_ _gx_version_id_* _ を確認します。

また、***gx_api.h*** 内で定義されている以下に示す定数から、アプリケーション ソフトウェアによってリリース情報を取得することもできます。これらの定数は、現在の製品リリースを、名前と製品のメジャー バージョンとマイナー バージョンによって特定します。

```C
#define __PRODUCT_GUIX__

#define __GUIX_MAJOR_VERSION__

#define __GUIX_MINOR_VERSION__
```
