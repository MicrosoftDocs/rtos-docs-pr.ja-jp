---
title: GUIX Studio 画面デザイナー
description: アプリケーションの画面のデザインは、GUIX Studio の主な目的です。
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: d7a4ffca7d49a82b75ed756fc360a2f543faa8a9fe9d31e5a5ace39087c96568
ms.sourcegitcommit: 93d716cf7e3d735b18246d659ec9ec7f82c336de
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2021
ms.locfileid: "116785783"
---
# <a name="chapter-5-guix-studio-screen-designer"></a>第 5 章: GUIX Studio 画面デザイナー

アプリケーションの画面のデザインは、GUIX Studio の主な目的です。 画面のデザインは、前の第 3 章で説明したさまざまなビューをすべて使用して行います。 ただし、GUIX Studio での画面デザインの主要な要素は、"***ターゲット ビュー***" です。ここには、すべての画面要素が、埋め込まれたターゲット ディスプレイに表示されるのとまったく同じ方法で、視覚的に表示されます。 マウスとボタンの簡単な操作で、これらの画面要素の選択、移動、サイズ変更などを行うことができます。 また、選択したオブジェクトに対する配置と Z オーダーのボタン操作を使用できます。 以下のサブセクションでは、GUIX Studio の画面デザインのさまざまな機能について説明します。 

## <a name="creatingconfiguring-projects"></a>プロジェクトの作成と構成

GUIX Studio ではプロジェクトを簡単に作成できます。* **[New Project]\(新しいプロジェクト\)** _ ボタンまたはメニュー選択の _*_[Project]\(プロジェクト\) > [New Project]\(新しいプロジェクト\)_*_ を選択するだけです。 次に、GUIX Studio に _ *_[Configure Project]\(プロジェクトの構成\)_** ダイアログが表示されます。 このダイアログでは、基本的な表示設定と、GUIX Studio によって生成されたコードを格納する場所のパス情報を指定します。

新しいプロジェクトを作成すると、[Configure Project]\(プロジェクトの構成\) ダイアログが表示されます。 ここで、開発者は、ターゲットで使用可能なハードウェア ディスプレイの数と、各ディスプレイのプロパティを指定します。 プロパティには、ディスプレイの論理名、x/y 解像度、色の深度と形式、その他のディスプレイ プロパティが含まれます。 GUIX Studio では、同じプロジェクト内で複数のディスプレイがサポートされています。 追加のディスプレイが必要な場合は、埋め込まれるデバイスのディスプレイの数と一致するように、* **[Number of Displays]\(ディスプレイの数\)** _ フィールドを変更する必要があります。 プロジェクトでのディスプレイの最大数は 4 です。 _ *_図 21_** は、[Configure Project]\(プロジェクトの構成\) ダイアログを示したものです。

プロジェクトやディスプレイの設定を変更するには、メニュー オプション * **[Configure]\(構成\) > [Project]\(プロジェクト\)/[Display]\(ディスプレイ\)** _ を使用するか、プロジェクトまたはディスプレイを選択して右クリックし、_*_[Configure]\(構成\) > [Project]\(プロジェクト\)/[Display]\(ディスプレイ\)_*_ を選択します。 どちらの場合も、_ *_[Configure Project]\(プロジェクトの構成\)_** ダイアログが表示され、プロジェクトの設定やディスプレイを容易に変更できます。

![[Configure Project]\(プロジェクトの構成\) ダイアログのスクリーンショット。](./media/guix-studio/config_project.png)

**図 21**

[Directories]\(ディレクトリ\) グループでは、Studio によって生成される C ソースとヘッダー ファイルの既定の出力ディレクトリを指定できます。 これらのディレクトリは、通常、コンピューター間またはファイル システム間でプロジェクトを簡単に移動できるよう、プロジェクトの場所を基準として保存されます。

[Additional Headers]\(追加ヘッダー\) フィールドでは、カスタム ヘッダー ファイルを指定できます。 複数のヘッダー ファイルが必要な場合は、セミコロンを使用してリストを区切ります。

Studio の [Generate Application]\(アプリケーションの生成\) または [Generate Resources]\(リソースの生成\) コマンドを呼び出すと、これらの既定のディレクトリにそれらのソース ファイルが書き込まれます。 もちろん、[Output Directory]\(出力ディレクトリ\) ダイアログで新しい場所を入力することにより、これらのディレクトリの場所をいつでもオーバーライドできます。

## <a name="selecting-widgets"></a>ウィジェットの選択

ウィジェットを選択するには、* **[Project View]\(プロジェクト ビュー\)** _ ウィジェット ツリーでウィジェットをクリックするか、_*_[Target View]\(ターゲット ビュー\)_*_ 領域に表示されているウィジェットをクリックします。 1 つのウィジェットを選択すると、そのプロパティが _*_[Property View]\(プロパティ ビュー\)_*_ 領域に表示されます。 _*_図 22_*_ には、選択されたウィジェット "_* _[button]\(ボタン\)_ **" が示されています。

![選択されたウィジェットのスクリーンショット。](./media/guix-studio/select_button.png)

**図 22**

## <a name="using-properties"></a>プロパティの使用

既に説明したように、選択したウィジェットのプロパティが、* **[Property View]\(プロパティ ビュー\)** _ に表示されます。 すべてのウィジェットには、共通のプロパティ セットと、特定のウィジェットの種類に固有のいくつかのプロパティがあります。 たとえば、ボタン ウィジェットには _ *_[Pushed]\(押されている\)_** プロパティがありますが、ウィンドウ ウィジェットにはありません。 ウィジェットの共通のプロパティ セットを次に示します。

| プロパティ         | 意味                                                                               |
| ---------------- | ------------------------------------------------------------------------------------- |
| Widget Type (ウィジェットの種類)    | ウィジェットの種類、参照用                                                                               |
| Widget Name (ウィジェット名)      | ウィジェットの名前。ウィジェット作成関数に渡され、生成されたソース ファイルでの変数の名前付けに使用されます。               |
| Widget ID (ウィジェット ID)        | ウィジェットの ID。 この ID 値は、子ウィジェットから親画面への信号を生成するために使用されます。                            |
| Left             | ウィジェットの左端の座標                                                                                                 |
| 上              | ウィジェットの上端の座標                                                                                                  |
| 幅            | ウィジェットの幅 (ピクセル単位)                                                                                                      |
| [高さ]           | ウィジェットの高さ (ピクセル単位)                                                                                                     |
| 境界線           | ウィジェットの枠線の種類                                                                                                          |
| 透明      | ウィジェットを部分的に透明にす場合は、オンにする必要があります                                                                       |
| Draw Selected (選択された状態で描画)    | 最初にウィジェットを選択された状態で描画する必要がある場合は、オンにする必要があります。                                            |
| 有効化           | エンド ユーザーがウィジェットを選択またはクリックできるようにする場合は、オンにする必要があります。                                                    |
| Accepts Focus (フォーカスを受け取る)    | ウィジェットがフォーカスを受け取る場合は、オンにする必要があります。                                                                                 |
| Runtime Allocate (実行時の割り当て) | ウィジェットの制御ブロックを動的に割り当てる必要がある場合は、オンにする必要があります。                                                 |
| Normal Fill (標準の塗りつぶし)      | 標準の塗りつぶしの色のリソース ID                                                                                                  |
| Selected Fill (選択時の塗りつぶし)    | 選択時の塗りつぶしの色のリソース ID                                                                                                |
| Draw Function (描画関数)    | ユーザー定義のカスタム描画関数の名前。 このフィールドが空白の場合は、そのウィジェットの種類の標準の描画関数が使用されます。 |
| Event Function (イベント関数)   | ユーザー定義のカスタム イベント処理関数の名前。 空白の場合は、このウィジェットの種類の標準イベント処理が使用されます。          |

***図 23*** は、簡単なウィンドウ ウィジェットのプロパティを示したものです。

![簡単なウィンドウ ウィジェットのプロパティのスクリーンショット。](./media/guix-studio/image57.jpg)

**図 23**

多くのウィジェットの種類に、各ウィジェットの種類に固有の追加のプロパティがあります。

たとえば、上の図 23 では、ウィンドウ ウィジェットの種類によって、壁紙のピクセルマップ ID と、壁紙の中央揃えまたは並べて表示を示すスタイル設定がサポートされています。

テキスト ウィジェットでは、文字列 ID フィールドと、テキスト配置スタイルおよびフォント指定がサポートされています。 追加のウィジェット プロパティは、通常、各ウィジェットの種類と使用可能なスタイル、およびそのウィジェットの種類の作成関数のパラメーターに関する説明を読めば、簡単にわかるようになります。

## <a name="manipulating-widgets"></a>ウィジェットの操作

ウィジェットを操作するには、まずを選択する必要があります。 これを行うには、* **[Target View]\(ターゲット ビュー\)** _ でウィジェットを直接クリックするか、_ *_[Project View]\(プロジェクト ビュー\)_** のウィジェット ツリーで選択します。 選択すると、ウィジェットに破線の枠線が表示されます。 この状態では、ウィジェットをクリックしてドラッグするだけで、親の目的の位置にそれを移動できます。 ウィジェットが最上位レベルのウィジェットの場合、ウィジェットをドラッグすると、ターゲット ディスプレイでのウィジェットの初期位置が設定されます。 もちろん、GUIX API を使用して、いつでも任意のウィジェットの移動またはサイズ変更を行うことができます。

ウィジェットの高さを変更するには、ウィジェットの上端にマウスを置き、マウス ポインターが上向きの矢印に変わるまで待ちます。 この時点で、右マウス ボタンを押したままマウスを移動するだけで、ウィジェットの高さを変更できます。 マウスの幅は、ウィジェットの左端にマウス ポインターを置くことにより、同様の方法で変更できます。 ***図 24** _ は、"_*_ボタン_*" ウィジェットのサイズを変更し、親ウィンドウの左上の領域に移動したところを示しています。

![ボタン ウィジェットのスクリーンショット。](./media/guix-studio/resize_button.png)

**図 24**

## <a name="manipulating-multiple-widgets"></a>複数のウィジェットの操作

複数のウィジェットを選択するには、***Ctrl*** キーを押しながらターゲット ビューで複数のウィジェットをクリックします。 この操作を行うと、選択した各ウィジェットが破線で囲まれて示されます。 複数のウィジェットを選択する場合、選択グループ内の各ウィジェットは、同じ親の子である必要があることに注意してください。

複数のウィジェットを選択したら、選択したウィジェットの 1 つの内側をクリックし、マウスの右ボタンを押したままマウスを移動することで、まとめて移動できます。 さらに、"***ツール バー** _" の配置ボタンを使用して、選択したウィジェットのグループの位置を揃えることができます。 _*_図 25_*_ は、"_*_ボタン_*_" と "_*_新しいボタン_*_" ウィジェットを選択したところを示したものです。_*_図 26_*_ は、これらのウィジェットを選択した状態で _ *_[Align-Left]\(左揃え\)_* * ボタンを選択した結果を示したものです。

![ボタンと新しいボタン ウィジェットが選択されたスクリーンショット](./media/guix-studio/multiple_select.png)

**図 25**

![[Align-Left]\(左揃え\) ボタンを選択した結果のスクリーンショット。](./media/guix-studio/align_left.png)

**図 26**

## <a name="cutcopypaste-operations"></a>切り取り、コピー、貼り付け操作

* **[Target View]\(ターゲット ビュー\)** _ で選択したウィジェットは、標準の方法で切り取ったり、コピーしたり、貼り付けたりすることができます。 ウィジェットと画面は、1 つのプロジェクト内でコピーすることも、1 つのプロジェクトからコピーして別のプロジェクトに貼り付けることもできます。"_*_ツール バー_*_" には、切り取り、コピー、貼り付けを行うためのボタンがあります。 [Edit]\(編集\) メニュー オプションにも同じオプションがあります。 ウィジェットを貼り付けるときは、新しいウィジェットを貼り付ける前に、親ウィジェットを選択する必要があることに注意してください。 _*_図 27_*_ には、"_*_ボタン_**" ウィジェットを選択し、コピーして、同じウィンドウにコピーを貼り付けた結果が示されています。

![切り取り、コピー、貼り付け操作のスクリーンショット。](./media/guix-studio/copy_paste_button.png)

**図 27**

1 つのプロジェクト内でのコピーと貼り付けは、一般に、1 つのプロジェクト内で作業するときは、コピーしたウィジェットに必要なリソースが常に存在するため簡単です。 一方、プロジェクト A のウィジェットをコピーし、そのウィジェットをプロジェクト B に貼り付けるときは、リソースの依存関係に関するいくつかの問題が発生する可能性があります。

Studio 内でウィジェットをコピーすると、Studio アプリケーションによって、コピーされたウィジェットに必要なリソースの一覧が作成され、移植可能なリソース依存関係テーブルが XML 形式で生成されて、実際にコピーされたウィジェットの情報と共に Windows のクリップボードにコピーされます。 ウィジェットを別のプロジェクトに貼り付けると、Studio によってまずリソースの依存関係の一覧が調べられ、開いているプロジェクトに必要なリソースがまだ存在しない場合は追加されます。 Studio により、リソース ID 名で一致するリソースが識別され、文字列リソースの場合は、文字列の内容も比較されます。 一致するリソースが見つかると、Studio によって、新しいプロジェクトのリソースが適切に使用されるように、貼り付けられたウィジェットのリソース ID が更新されます。 リソースが見つからない場合は、追加されます。

Studio によって、ウィジェット貼り付け操作の一部としてプロジェクトにリソースが追加されるとき、リソースがフォントとピクセルマップの場合は、実際にはリソースへのリンクが追加されます。 このリンクはソース プロジェクトから生成されます。それらのリソースが、貼り付け先プロジェクトのプロジェクトの場所を基準として見つからない場合は、警告メッセージが表示されます。 それに関係なくプロジェクトにはリソースのリンクが追加されますが、リソース読み込みエラーを回避するには、新しいプロジェクト ツリーの下の適切な場所に、フォント ファイルと画像ファイルを手動でコピーすることが必要な場合があります。 .ttf、.png、または .jpg ファイルは、Studio によって 1 つの場所から別の場所にコピーされません。

これに関する問題を回避する簡単な方法は、共有するプロジェクト間で一貫性のあるディレクトリ構造を維持することです。 プロジェクト A からプロジェクト B に何かを簡単に移動するには、両方のプロジェクトで使用されるグラフィックス画像とフォントを、各プロジェクト フォルダーの同じサブディレクトリに保持します。

## <a name="changing-z-order"></a>z オーダーの変更

ウィジェットは、他のウィジェットの前側または後側に簡単に移動できます。 これを行うには、ウィジェットを選択し、"_*_ツール バー_*_" の * **[Move to Front]\(前面へ移動\)** _ または _*_[Move to Back]\(背面へ移動\)_*_ ボタンを選択します。 _ *_図 28_** は、2 番目のボタンを背面へ移動する方法です。

![ボタンの z オーダーのスクリーンショット。](./media/guix-studio/change_z_order.png)

**図 28**

## <a name="assigning-colors-fonts-and-pixelmaps"></a>色、フォント、ピクセルマップの割り当て

選択したウィジェットの [Properties View]\(プロパティ ビュー\) での色、フォント、ピクセルマップの選択だけでなく、簡単なドラッグ アンド ドロップによるウィジェットへのリソースの割り当てもサポートされています。 この機能を使用するには、リソース ビューでフォントの色などのリソースを単に左クリックし、ターゲット ビューの目的のウィジェットにリソースをドラッグします。 ウィジェットの上で左マウス ボタンを放すことで、リソースをドロップします。

ドラッグ アンド ドロップの方法を使用した場合、色リソースは常にウィジェットの通常の背景色に割り当てられます。 選択された色や選択されたテキストの色など、その他の色は、[Properties View]\(プロパティ ビュー\) を使用して割り当てる必要があります。

同様に、ピクセルマップ リソースは、ピクセルマップの表示がサポートされているウィジェットの "標準" または "塗りつぶし" のピクセルマップ フィールドに割り当てられます。 複数のピクセルマップをサポートするウィジェットに他のフィールドを割り当てるには、[Properties View]\(プロパティ ビュー\) を使用する必要があります。

## <a name="using-templates"></a>テンプレートの使用

Studio でデザインしたすべての画面または子ウィジェットのコレクションは、新しい画面や新しい子コントロールのためのテンプレートとして使用できます。 テンプレートは、ウィンドウ タイプのウィジェット (通常の使用例)、またはその他のタイプのウィジェットに基づくことができます。 テンプレートの使用は、ウィジェットのコピーと貼り付けに似ていますが、テンプレートから派生したものは、基になるテンプレートが変更されると自動的に変更される点が異なります。 テンプレートの派生画面や継承されたインスタンスを操作するときは、テンプレート ウィジェットのプロパティを変更することはできません。 ただし、何らかの方法でテンプレートのプロパティを変更すると、そのテンプレートを参照しているすべてのインスタンスが自動的に更新されます。これは、それらがそのテンプレートから派生しているためです。

繰り返されている項目にテンプレートを使用するもう 1 つの利点は、通常、Studio によって生成される仕様ファイルのサイズが、使用するたびに繰り返し項目を再作成する場合より、小さくなることです。

画面または子ウィジェットのコレクションをテンプレートとして使用することを指定するには、ウィジェットのプロパティ ビューで [Template]\(テンプレート\) チェック ボックスをオンにします。 [Template]\(テンプレート\) チェック ボックスをオンにすると、***[Insert]\(挿入\) > [Template]\(テンプレート\)*** プルダウン メニューにテンプレート ウィジェットが表示されます。

テンプレートを使用する例としては、ボタン バーとして使用されるウィンドウを定義することができます。 このウィンドウ自体に複数の子ボタンを含めることができ、このボタン バーはさまざまな画面で頻繁に使用されます。 Studio プロジェクト内で、必要な子ボタンを保持する小さなスタンドアロン ウィンドウを定義し、このウィンドウに "button_bar" という名前を付けます。 次に、このウィンドウを選択し、[Template]\(テンプレート\) プロパティを有効にします。 次に、このボタン バーを追加する画面を選択します。 [Insert]\(挿入\) > [Template]\(テンプレート\) > button_bar メニュー コマンドを使用して、button_bar ウィンドウのインスタンスを画面に挿入します。 ボタン バーの位置を変更することはできますが、ほとんどのプロパティは変更できないことに注意してください。 ただし、button_bar ウィジェット (およびすべての子) は、他の定義済みの GUIX ウィジェットの種類と同じように使用できます。 button_bar を変更するには、button_bar テンプレートを選択して変更する必要があります。

テンプレートのもう 1 つの一般的な使用例は、多くの似た画面が含まれるアプリケーションです。 たとえば、アプリケーションに、共通のタイトル バー、塗りつぶしの色、サイズなどを共有する 10 個の異なる画面が含まれるような場合があります。この場合は、タイトル バーの子ウィジェットが含まれ、画面サイズ、塗りつぶしの色、その他のプロパティが構成されているテンプレート画面を定義します。 このテンプレート画面を定義すると、このテンプレートから 10 個の異なる画面を派生できます。 [Insert]\(挿入\) > [Template]\(テンプレート\) > \<base_screen> メニュー コマンドを使用すると、テンプレート画面のすべての子ウィジェットと設定で画面が開始されます。 テンプレート画面から派生した各画面は、テンプレートのコピーではなく、テンプレート画面の実際の派生インスタンスであることに注意してください。 各派生画面をカスタマイズして、必要な追加コンテンツをすべて保持できます。

生成される仕様ファイルのサイズが減るだけでなく、テンプレートを使用すると、アプリケーションの外観の変更を簡単に管理できるようになることに注意してください。 上の例では、10 個の似た画面の背景色を変更する必要がある場合を想像してみてください。 画面を 1 つずつ選択して塗りつぶしの色の設定を変更する必要はなく、基本テンプレートを選択して塗りつぶしの色を変更するだけで済みます。この変更は、すべての派生画面に直ちに反映されます。

テンプレートに関するその他の注意: イベント処理フローが維持されることを確認する必要があります。つまり、基本画面 (共通ウィジェットのイベントを処理するため) と派生画面の両方に対してイベント ハンドラーを指定する場合、派生画面のイベント ハンドラーでは、既定のケースで base_screen のイベント ハンドラーを呼び出す必要があります。 これにより、このテンプレート ベースから派生したすべての画面に共通するウィジェットによって生成されたイベントは、基本画面のイベント ハンドラーで処理できます。

## <a name="record-and-playback-macro"></a>記録と再生マクロ

マクロの記録と再生機能を使用すると、キー ストロークやマウス イベントを記録して再生することができます。

マクロ ファイルに記録するには、* **[Record Macro]\(マクロの記録\)** _ ツール バー ボタンを選択するか、_*_[Edit]\(編集\) > [Record Macro]\(マクロの記録\)_*_ メニューを選択します。 GUIX Studio によって表示される _*_[Record Macro]\(マクロの記録\)_*_ ダイアログで、マクロ ファイルのパス名を指定できます。 この選択を行った後、_*_[Record]\(記録\)_*_ ボタンをクリックして記録を開始します。 記録が終了したら、_*_[Record Macro]\(マクロの記録\)_*_ ツール バー ボタンを再び選択するか、プルダウン メニューを使用して _ *_[Edit]\(編集\) > [Record Macro]\(マクロの記録\)_** を選択し、マクロの記録を終了します。

マクロ ファイルに再生するには、* **[Playback Macro]\(マクロの再生\)** _ ツール バー ボタンを選択するか、メイン プルダウン メニューを使用して _*_[Edit]\(編集\) > [Playback Macro]\(マクロの再生\)_*_ コマンドを選択します。 GUIX Studio で _ *_[Playback Macro]\(マクロの再生\)_** ダイアログが表示され、前に記録したマクロ ファイルから実行するものを指定できます。

フォントや画像の追加など、入力または出力ファイルを選択するマクロを記録する場合は、マウスを使用してファイル ブラウザーから選択するのではなく、キーボードを使用してファイル名を入力することが重要です。 マクロ レコーダーではマウスとキーボードのイベントが記録され、ファイル ブラウザーは時間が経つと変更される可能性があるため、ファイルをグラフィカルに選択するより、ファイル名を入力する方が確実です。

## <a name="zooming-target-view"></a>ターゲット ビューのズーム

ズームイン機能を使用すると、ターゲット画面のクローズアップ ビューを取得できます。

* **[Configure]\(構成\) > [Target View]\(ターゲット ビュー\) > [Zoom]\(ズーム\)** _ メニュー オプションで、使用するズーム設定の倍率を選択できます。 "_ *_ツール バー_**" には、拡大/縮小のボタンもあります。

## <a name="gridsnap-settings"></a>グリッドとスナップの設定

* **[Grid and Snap Settings]\(グリッドとスナップの設定\)** _ ダイアログには、グリッドとスナップに関するいくつかの設定とオプションが含まれます。 _*_図 29_*_ は、メニュー _ *_[Configure]\(構成\) > [Target View]\(ターゲット ビュー\) > [Grid/Snap]\(グリッド/スナップ\)_** を選択すると表示される _*_[Grid and Snap Setting]\(グリッドとスナップの設定\)_*_ ダイアログです。

![[Grid and Snap Settings]\(グリッドとスナップの設定\) のスクリーンショット。](./media/guix-studio/image63.jpg)

**図 29**

* **[Show Grid]\(グリッドの表示\)** _ オプションをオンにすると、ターゲット画面にグリッドが表示され、_*_[Grid Spacing]\(グリッドの間隔\)_*_ フィールドでグリッドの増分値 (ピクセル単位) を指定できます。 _ *_[Snap to Grid]\(グリッドにスナップ\)_** オプションを使用すると、ウィジェットを適切な位置に配置できます。このオプションをオンにすると、スナップがアクティブになります。

***[Grid and Snap]\(グリッドとスナップ\)*** オプションが有効になっている場合:

- マウスを使用してターゲット ビュー内でオブジェクトをドラッグすると、オブジェクトはグリッドの増分ごとに移動します。
- オブジェクトの端をドラッグしてサイズを変更すると、ドラッグしている端はグリッド位置にスナップされます。
- オブジェクトを選択し、上、左、下、右の方向キーを使用すると、選択したウィジェットはスナップの増分単位に移動します。スナップの増分値 (ピクセル単位) は、***[Snap Spacing]\(スナップの間隔\)*** フィールドで指定できます。
