---
title: GUIX Studio リソース
description: GUIX Studio で、色、フォント、ピクセルマップ、および文字列にアプリケーションが使用するすべての UI リソースを管理できます。 以降のセクションでは、UI 画面デザイン内でリソースを追加、変更、および削除する方法を説明します。
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 7dd3485f112bce379ab7d6b11a808605bca191a0
ms.sourcegitcommit: 1d90854d1da01f4b65e54d732ee9190b57a531e1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/26/2021
ms.locfileid: "105568999"
---
# <a name="chapter-4-guix-studio-resources"></a>第 4 章: GUIX Studio リソース

GUIX Studio で、色、フォント、ピクセルマップ、および文字列にアプリケーションが使用するすべての UI リソースを管理できます。 以降のセクションでは、UI 画面デザイン内でリソースを追加、変更、および削除する方法を説明します。 

すべてのリソース管理は、次の _図 8_** に示すように、GUIX Studio UI の ***リソース ビュー** _ 内で実行されます。

![GUIX Studio リソース ビューのスクリーンショット。](./media/guix-studio/image38.jpg)

**図 8**

## <a name="color-resources"></a>色リソース

_*_リソース ビュー_*_ の * **[色]** _ セクションで色リソースを管理できます。 このビューは、ビュー ヘッダーの _ *+* * フィールドをクリックして展開できます。これにより、**_図 9_** に示すビューが表示されます。

![リソース ビューの [色] セクションのスクリーンショット](./media/guix-studio/image_39.png)

**図 9**

色リソースは 1 つ以上の色で構成されており、各色には、一意の論理名があります。 たとえば、**図 9** では、画面背景の塗りつぶし色のシステム カラー ID である論理名、**CANVAS** が、黒の物理色に関連付けられています。 この色リソースは、アプリケーションがオブジェクトのプロパティで色として **GX_COLOR_ID_CANVAS** を指定すると必ず使用されます。

色の RGB 値を示す色 "swatch" が左側に表示され、その後に色 ID 名が表示されます。 RGB 値は、どの ID 名に関連付けられている場合でも、いつでも変更できます。 事前定義されたシステム カラー ID 名は、GUIX ライブラリによって内部的に使用されるため、変更できません。 ただし、色の値は変更できます。 システム カラー値の変更は、**グローバルな変更** です。 つまり、特定の色が割り当てられていないウィジェットにはいずれも、新しいシステム カラー値が使用されます。

テーマに追加したカスタム色の色名と色値はいずれも変更できます。

色リソースを変更するには、色リソースをダブルクリック (または、右クリックしてメニューを選択) します。 この操作により、[色の定義] ダイアログが表示されます。 このダイアログで、アプリケーションの UI のニーズに合わせて色リソースを変更できます。 ***図 10** _ は、_ *CANVAS** をダブルクリックしたときの変更ダイアログを示しています。 このダイアログの外観は、ターゲットの表示の色形式設定によって変わります。

![[色の編集] ダイアログのスクリーンショット。](./media/guix-studio/edit_color.png)

**図 10**

[色の編集] ダイアログの外観は、現在の表示の色深度と色形式の構成によって変わります。

新しい色リソースを追加するには、_ *_リソースビュー_** の * **[色]** _ セクションで、次のボタンを選択します。

![[新しい色の追加] ボタン](./media/guix-studio/image41.jpg)

表示される色ダイアログを使用して、下の ***図 11*** に示すように、新しい色リソースを追加します。

![[色の編集] ダイアログの新しい色のスクリーンショット。](./media/guix-studio/new_color.png)

**図 11**

これらの手順を完了したら、 **[保存]** を選択すると、**NEW_COLOR** という名前の、緑の物理色の新しい色リソースが、使用するアプリケーションで使用可能になります。

**表示の色形式設定の変更時の特別な注意点:**

新しいプロジェクトを作成すると、自動的に、プロジェクトの表示と各表示の色形式を構成するように求められます。 多くの場合は、これらを 1 回だけ選択し、その構成設定を変更する必要はありません。

後で、表示の色形式設定の変更が必要であると判断する場合があります。 この場合、GUIX Studio は、現在のシステムとユーザーの色の RGB 値の最適な変換を行って、古い色形式から新しい色形式に変更します。 この変換は、いくつかの論理規則に従います。

ユーザー定義の色の場合、GUIX Studio は常に、前の色を、新しいカラー形式で最も近い色に変換しようとします。 16 bpp 5:6:5 色形式などの高い色深度から、グレースケールまたはモノクロの色形式に変換する場合は、この変更の結果が、好ましくない色変換となる可能性があります。 表示の色深度設定を大きく変更する場合は、新しいユーザー定義のカラー テーブルの手動更新が必要になることがあります。

事前に定義されたシステム カラーの場合、GUIX Studio は、3 つの一意の既定のカラーテーブルを内部的に定義します。 1 つの既定のカラー テーブルが、4 bpp グレースケールより大きいすべての色深度に使用されます。2 番目の既定のカラー テーブルがグレースケールの色形式 (1 bpp < display_color_format <= 4bpp) に使用され、最後に、3 番目の既定のシステム カラー テーブルがモノクロの色形式に使用されます。

[プロジェクトの構成] ダイアログを使用して表示の色形式を切り替えるときは、次の規則が適用されます。

1) 前述の定義のように、新旧の表示色形式で、異なる既定のシステム カラー テーブルを使用している場合、システム カラーはそれぞれ、事前に定義された既定の色にリセットされます。 つまり、色をグレースケールに、またはグレースケールからモノクロの色深度に切り替えた場合は、内部で定義された、新しい色深度の既定値にシステム カラーがリセットされます。 これにより、カスタマイズされた色の情報が失われる可能性がありますが、表示の色形式設定を大幅に変更した場合は、このソリューションにより、妥当な出発点が得られます。

2) 新旧の色形式で同じ既定カラー テーブルを使用している場合、つまり、色形式の変更があまり大きくない場合は、GUIX Studio によって各システム カラーがテストされ、システム カラーの RGB 値が既定値から変更されたかどうかが判断されます。 システム カラーの RGB 値が変更されている場合は、 GUIX Studio により、古い色形式から新しい色形式への最適な変換が実行されます。 システム カラーが変更されていない場合は、新しい色形式の既定の色にリセットされます。

**パレット モード操作に関する特別な考慮事項:**

256 カラー パレット モードの色形式向けにプロジェクトが構成されている場合、ユーザーは、インストールされ、使用されるパレットを定義する方法を構成できます。 [構成 | テーマ] ダイアログを使用して、パレット定義にアクセスし、編集できます。また、プロジェクトが 8 bpp 向けに設定されている場合は、[パレットの編集] ボタンが表示されます。 このボタンをクリックすると、[パレットの編集] ダイアログが表示されます。

![[パレットの編集] ダイアログのスクリーンショット。](./media/guix-studio/edit_palette.png)

GUIX Studio では、パレットが、"ユーザー定義" と "自動生成" の 2 つのセクションに分かれています。 GUIX Studio では、高度で最適なパレット生成アルゴリズムを実行して、各テーマに含まれるイメージを表示するための最適なパレットが作成されます。 [定義済みパレット エントリ] フィールドに数値を入力することによって、定義する必要のあるパレット エントリをいくつでも作成し、どのスロットにも、あらゆる RGB 値を入力することができます。 残りのスロットは、イメージを表示するための最適なカラー パレットを作成するために Studio に割り当てられます。

このモードでの実行中に、リソース ビューで定義された色を編集する場合は、カラー エディターにより、定義した定義済みパレット エントリからのみ選択できます。 これは、残りのパレット エントリは、GUIX Studio によって自動生成され、プロジェクトに追加されたイメージが変更されると、変わるためです。

8bpp パレット モードでの実行中にアンチエイリアス フォントの表示を必要とする場合は、アンチエイリアス テキストの表示に使用される各前景色と各背景色のグラデーションを作成する多くのパレット エントリを定義する必要があります。 色の組み合わせごとにグラデーションに 8 つのパレット エントリを使用するか、より滑らかなグラデーションにするために 16 のパレット エントリを使用することができます。 使用するパレット エントリの数は、[プロジェクトの構成] ダイアログの [パレット モードのアンチエイリアス テキストの色の数] チェックボックスで決定されます。 8 つのエントリのみによるグラデーションを使用すると、色の組み合わせごとに使用されるパレット エントリ数を最小限にすることができます。または、16 のエントリのグラデーションを使用して、アンチエイリアス テキストの外観をより滑らかにすることができます。

アンチエイリアス テキスト表示の色のグラデーションを簡単に定義したり、自分で使用する色のグラデーションを生成したりするために、[パレットの編集] ダイアログには [グラデーションの生成] ボタンが用意されています。 この機能を使用するには、最初に、グラデーションの開始色と終了色の r:g:b 値を割り当てる必要があります。

たとえば、インデックス 50 から始まる 8 つのパレット エントリを使用して、中程度のグレーの背景にアンチエイリアスの赤のテキストを表示する場合は、255:0:0 という r:g:b 値をパレット インデックス 50 に、128:128:128 という r:g:b 値をパレット インデックス 57 に割り当てます。 このダイアログの開始インデックスと終了インデックスのフィールドに、これらのパレット インデックス値を入力し、[グラデーションの生成] ボタンをクリックします。 パレット エントリ 51 ～ 56 が初期化されて、境界色の間の滑らかなグラデーションの切り替えが定義されます。

## <a name="font-resources"></a>フォント リソース

フォント リソースを管理するために、まず、_ *+* * フィールドをクリックして、_*_リソース ビュー_*_ の * **[フォント]** _ セクションを展開する必要があり ます。これにより、**_図 12_** のようなダイアログが表示されます。

![リソース ビューの [フォント] セクションのスクリーンショット。](./media/guix-studio/image44.jpg)

**図 12**

フォント リソースは 1 つ以上のフォントで構成されており、各フォントには、一意の論理名があります。 たとえば、**図 12** では、論理名 **SYSTEM** が、特定のフォントに関連付けられています。 このフォント リソースは、オブジェクトのプロパティのフォントとして **SYSTEM** がアプリケーションで指定されると、常に使用されます。 フォント グループには、フォント グリフの WYSIWYG プレビューが左側に表示され、フォントの高さ (ピクセル単位)、フォント ID 名、およびフォント サイズ (kb 単位) が表示されます。

上のビューで、最初の 4 つのフォントは、GUIX ライブラリに必要な定義済みの既定フォントです。 これらのフォントに関連付けられているフォント データは変更できますが、これらのフォント ID 名は変更できません。

上に示す、"Italic" という名前の最後のフォントは、ユーザーによってプロジェクトに追加されたカスタム フォントです。

フォント リソースを変更するには、フォント リソースをダブルクリック (または、右クリックしてメニューを選択) します。 このダイアログで、アプリケーションの UI のニーズに合わせてフォント リソースを変更できます。 ***図 13** _ は、_ *SYSTEM** をダブルクリックしたときの変更ダイアログを示しています。

![[SYSTEM をダブルクリックしたときの変更ダイアログのスクリーンショット。](./media/guix-studio/edit_system_font.png)

**図 13**

新しいフォント リソースを追加するには、_ *_リソース ビュー_** の * **[フォント]** _ セクションで、次のボタンを選択します。

![[新しいフォントの追加] ボタン](./media/guix-studio/image46.jpg)

これにより、次の ***図 14*** のような、新しいフォント リソースを追加するための `Font Edit` ダイアログが表示されます。

![新しいフォント リソースを追加するための変更ダイアログのスクリーンショット。](./media/guix-studio/add_new_font.png)

**図 14**

新しい GUIX フォントは、GUIX Studio によって、選択した TrueType フォントが特定のサイズでレンダリングされて作成されます。 そのため、上の最初のダイアログには TrueType フォント パスが必要です。 参照ボタンを使用して、フォント ファイルが格納されている、開発システム上のディレクトリを参照できます。 GUIX Studio がインストールされているすべての場所では、いくつかの TrueType フォントが [GUIX/fonts] サブフォルダーにも含まれています。

可能な場合は、TrueType フォント ファイルの場所が内部的に、プロジェクトの相対パスを使用して格納されます。 このため、すべてのフォント ファイルを共通の場所に保持し、プロジェクトとフォント ファイルに共通のディレクトリ ツリー構造を使用することが重要です。こうすると、1 つの開発ステーションから別の開発ステーションに GUIX Studio プロジェクトを移動できます。

[フォント名] フィールドを使用してフォント リソース ID 名を指定できます。 これは、GUIX Studio で生成されたコードで使用され、フォントを参照するときにアプリケーションでも使用されるリソース ID です。 この名前は、C 変数の名前付け構文の要件を満たす必要があります。

入力として使用する TrueType フォント ファイルを選択したら、フォントの論理名を入力します。

**[カーニング情報の生成]** チェックボックスをオンにすると、生成されたフォントにカーニング情報を含めることが GUIX Studio に指示されます。これにより、文字列内の連続するグリフの相対位置が調整されます。 文字列でカーニングを適用する場合は、カーニング情報が含まれているフォントを使用し、このチェックボックスをオンにする必要があります。 また、GUIX ライブラリのビルド オプション "GX_FONT_KERNING_SUPPORT" も定義して、カーニング情報を含むテキストのレンダリングをサポートする必要があります。

**[文字列テーブルで定義された文字セットを含める]** チェックボックスをオンにすると、生成されたフォント内で静的文字列テーブルによって参照されるグリフを含めることが Guix Studio に指示されます。 次に示す文字範囲を選択して編集すると、追加のグリフを含めることができます。また、このオプションを選択して、文字列テーブル内で定義されている文字列の表示に必要な最小文字セットをすばやく生成することができます。 もちろん、TrueType ソース フォントに存在しないグリフが文字列テーブルで使用されている場合は、それらの文字が GUIX フォントでは使用できず、ターゲット システムに表示されません。

より完全なフォント、または静的に定義された文字列テーブル内で使用できない文字を含むフォントを生成するためには、次の一覧から文字範囲を選択することもできます。 任意の数の文字範囲を選択できます。また、選択した各範囲内に含まれる実際の開始文字と終了文字のコードを編集できます。

定義済みの文字範囲とページ名は、現在使用されているアクティブな言語に必要な文字セットを簡単に選択できるようにするための例にすぎません。 表示される言語名は、生成される GUIX フォントには影響しません。有効な、または選択した文字範囲用に、任意の 16 進数の範囲を自由に入力できます。

たとえば、数字のみを含むフォントを生成する場合は、"Ascii" コード ページを選択できますが、開始値 0030 と終了値 0039 を入力すると、数字のみを含むフォントが生成されます。 文字範囲の値は 16 進数でエンコードされていることに注意してください。これは、Unicode 文字テーブルの通常の表記です。

既定では、GUIX Studio と GUIX ライブラリで、文字コード 0x0000 ～ 0xffff がサポートされています。これには、現在使用されているすべてのアクティブな言語、数式、およびその他の記号が含まれます。 特定の私用領域を含め、値 0xffff を超える文字コードを使用する必要がある場合は、[拡張文字範囲のサポート] チェックボックスをオンにする必要があります。 このチェックボックスをオンにすると、Unicode の私用文字範囲を含む、0x0000 ～ 0x10ffff の文字範囲をユーザーが指定できます。 この拡張文字範囲が必要な場合は、GUIX ライブラリのビルド オプション "GX_EXTENDED_UNICODE_SUPPORT" を定義することも必要になります。これにより、16 ビット文字コードをサポートする既定の構成ではなく、32 ビット文字コードが GUIX ライブラリで内部的にサポートされます。

[文字列テーブルで定義された文字セットを含める] チェックボックスと、次の一覧にある文字範囲の 1 つ以上を選択した場合は、これらの選択が GUIX Studio により結合されて、選択された範囲と、文字列テーブル内で使用される文字の両方のスーパーセットとなります。 もちろん、選択した TrueType ソース フォントには、要求された各文字値に対して意味のあるグリフを GUIX Studio が生成するために必要な文字も含まれている必要があります。

文字範囲を決定したら、フォントの高さ (ピクセル単位) とフォント形式を指定します。 アンチエイリアスとバイナリの両方のフォントがサポートされます。 バイナリ フォントは、必要な静的データ ストレージ領域が少ないのですが、アンチエイリアス フォントでは、4 bpp グレースケールまたはそれ以上の色深度で実行されているターゲットに最適な外観が生成されます。

>[!NOTE]  
> *"フォントの高さ" とは、フォントの em スクエアのことです。従来のメタル タイプでは、em スクエアが、各文字のベースであるメタル本体の行の高さと同じであり、各メタル本体は同じサイズでした。メタル タイプでは、文字の物理的なサイズが、通常は em スクエアを超えることはありませんでした。デジタル タイプでは、em スクエアは、デジタル フォントのデザイン スペースとして使用される任意の解像度のグリッドです。これらのデジタル フォントでは、アセントやディセントなど、一部のグリフ機能が em スクエアの範囲を超えて描かれることがよくあります。その結果、特定のフォントを完全に表示するために必要なウィジェットの高さが、多くの場合、要求されたフォント ピクセルの高さよりも少し大きいことが必要になります。*

すべてのフォント構成フィールドを設定したら、[OK] ボタンをクリックして、新しいフォント リソースを作成します。 GUIX Studio は、選択したプロパティを備えた GUIX 互換フォントを生成し、そのフォントをプロジェクト リソースに追加します。そして、そのフォントをアプリケーションで使用できるようにします。

## <a name="pixel-map-resources"></a>ピクセルマップ リソース

ピクセルマップ リソースを管理するために、まず、_ *+* * フィールドをクリックして、_*_リソース ビュー_*_ の * **[ピクセルマップ]** _ セクションを展開する必要があり ます。これにより、**_図 15_** のようなダイアログが表示されます。

`Pixelmap` グループが展開されると、次のようなプレビューが表示されます。

![リソース ビューの [ピクセルマップ] セクションのスクリーンショット。](./media/guix-studio/pixelmap_view.png)

**図 15**

ピクセルマップ リソースは、1 つ以上のピクセルマップで構成されます。各ピクセルマップには、ピクセルマップ イメージのプレビュー (左側)、ピクセルマップの寸法 (ピクセル単位)、一意の論理名、および出力リソース ファイルでのピクセルマップ ストレージ サイズ (kb 単位) が含まれます。

ピクセルマップの最初のグループは、オプション ボタンやチェックボックスなど、GUIX ウィジェットに必要な定義済みのシステム ピクセルマップで構成されています。 システム ピクセルマップに関連付けられているピクセルマップ データは変更できますが、これらのピクセルマップ ID 名は変更できません。 また、上の図には、"BACKGROUND" や "BUTTON_ACTIVE" のような名前の複数のカスタム ピクセルマップも含まれています。 これらは、ユーザーがプロジェクトに追加したピクセルマップの例で、GX_PIXELMAP_BUTTON ウィジェットのレンダリングに使用される場合があります。

多くのプロジェクトには多数のピクセルマップが含まれるため、ピクセルマップ ビューでは、任意の数のピクセルマップ フォルダーを定義してピクセルマップ イメージを整理することができます。 

新しいピクセルマップ フォルダーを追加するには、***リソース ビュー*** の `Pixelmaps` セクション ヘッダーを右クリックし、[フォルダーの追加] を選択します。

ピクセルマップ リソースを変更するには、ピクセルマップ リソースをダブルクリック (または、右クリックしてメニューを選択) します。 このダイアログで、アプリケーションの UI のニーズに合わせてピクセルマップ リソースを変更できます。 ***図 16** _ は、_ *RADIO_ON** をダブルクリックしたときの変更ダイアログを示しています。

![[ピクセルマップの編集] ダイアログのスクリーンショット。](./media/guix-studio/image49.jpg)

**図 16**

`Edit Pixelmap` ダイアログで、新しいピクセルマップを定義したり、既存のピクセルマップの内容を変更したりできます。 バックグラウンドでは、GUIX Studio によって入力イメージが読み取られ、GUIX ライブラリで使用できる `GUIX GX_PIXELMAP` 形式に変換されます。 GUIX Studio では、入力イメージの色空間から、このピクセルマップが使用される表示の色空間への変換も実行されます。

このダイアログの最初のフィールドは、ソース イメージへのパスです。 GUIX Studio は、PNG (.png) 形式または JPEG (.jpg) 形式のイメージ ファイルの入力をサポートしています。 [参照] ボタンを使用して、目的の入力ファイルをローカル ファイル システムで見つけることができます。

可能な場合は、入力イメージ ファイルの場所が内部的に、プロジェクトの相対パスを使用して格納されます。 このため、すべてのイメージ ファイルを共通の場所に保持し、プロジェクトとイメージ ファイルに共通のディレクトリ ツリー構造を使用することが重要です。こうすると、1 つの開発ステーションから別の開発ステーションに GUIX Studio プロジェクトを移動でき、入力イメージ データの追跡も可能です。

`Pixelmap ID` フィールドを使用すると、ピクセルマップ リソースの論理名を指定できます。 ここに入力する名前は、一意であると同時に、C 変数の名前付け構文規則に従う必要があります。

[出力ファイルの指定] チェックボックスを使用して、各ピクセルマップの一意の出力ファイルを指定できます。 このチェックボックスをオフにすると、ピクセルマップ データは、この表示の既定のリソース ファイルに書き込まれます。 チェックボックスをオンにすると、このピクセルマップ データが書き込まれる特定のファイル名を入力できます。 このオプションの目的は、非常に大規模な C 配列となる可能性のあるピクセルマップ データを、複数の出力ファイルに分割できるようにすることです。 一部のコンパイラにとって、数百から数千のソース行を含む C ファイルの処理は困難です。

[圧縮出力] チェックボックスを使用すると、ピクセルマップの出力で、独自の GUIX 圧縮アルゴリズムが使用されるかどうかを指定できます。 通常、圧縮された出力ファイルは小さくなりますが、ターゲットにレンダリングするためのプロセッサ時間が必要になります。 多くの場合、ピクセルマップのサイズが大きい場合は圧縮が選択され、小さい場合は、圧縮しない形式が使用されます。

`Include Alpha Channel` チェックボックスで、.png 形式の入力ファイルに含まれる場合のあるアルファ チャネル情報を GUIX Studio がどのように使用するかが決定されます。 このチェックボックスがオンで、16 bpp 以上の色深度で表示が実行されている場合は、出力ファイル内の完全な入力アルファ データが GUIX Studio によって保持されます。 このチェックボックスがオフの場合は、より小さいサイズの出力ファイルが作成されます。 この出力ファイルには透明性が含まれる場合がありますが、完全なアルファ ブレンド情報は含まれません。

`Dither` チェックボックスにより、より低い色深度の表示で使用するために入力イメージを変換するときに、高度なディザリング アルゴリズムを適用することが GUIX Studio に指示されます。 ディザリングは、通常は有効になっていますが、繰り返しピクセル数が少ないため、圧縮を使用した場合に出力ファイルのサイズが大きくなる可能性があります。

必要なオプションをすべて設定したら、[OK] ボタンをクリックして、新しいピクセルマップ リソースを生成します。 GUIX Studio は入力イメージ ファイルを読み取り、圧縮を解除し、色空間の変換とディザリングを実行します。そして、必要に応じてデータを再圧縮し、GUIX 互換の `GX_PIXELMAP` 形式で保存します。 新しいピクセルマップがプロジェクト リソースに追加され、アプリケーションで使用できるようになります。

新しいピクセルマップ リソースを追加するには、***リソース ビュー*** の `Pixelmaps` セクションで、次のボタンを選択します。

![[新しいピクセルマップの追加] ボタン。](./media/guix-studio/image50.jpg)

**ピクセルマップのバッチ編集**

多数のピクセルマップのプロパティを変更するには、ピクセルマップのグループまたはフォルダーを右クリックし、 **[ピクセルマップの編集]** を選択して **[ピクセルマップの編集]** ダイアログを開きます。

![[複数のピクセルマップの編集] ダイアログのスクリーンショット。](./media/guix-studio/batch_pixelmap_edit.jpg)

チェックボックスの状態の説明:

![オンのチェックボックス。](./media/guix-studio/checkbox_checked.jpg)
この状態は、すべてのピクセルマップのプロパティについてオンであることを意味します。このボックスをオフにすると、すべてのピクセルマップのプロパティを変更できます。

![オフのチェックボックス。](./media/guix-studio/checkbox_unchecked.jpg)
この状態は、すべてのピクセルマップのプロパティについてオフであることを意味します。このボックスをオンにすると、すべてのピクセルマップのプロパティを変更できます。

![不確定のボックス。](./media/guix-studio/checkbox_undetermined.jpg)
この状態は、各ピクセルマップのプロパティの状態が異なることを意味します。ボックスをオンまたはオフにすると、すべてのピクセルマップのプロパティを変更できます。そうしない場合は、プロパティが変更されません。


## <a name="string-resources"></a>文字列リソース

文字列グループが展開されると、次のように、プロジェクト文字列テーブルのプレビューが表示されます。

![展開された文字列グループのスクリーンショット。](./media/guix-studio/string_res_view.png)

**図 17**

文字列リソースは 1 つ以上の文字列で構成されており、各フォントには、一意の論理名があります。 たとえば、**図 17** では、論理名 "PATIENT_LIST" が、右側に表示された文字列 "患者リスト" に関連付けられています。 この文字列リソースは、オブジェクトのプロパティの文字列として PATIENT_LIST がアプリケーションで指定されると、常に使用されます。

すべてのリソースの種類の ID 名は、C 構文と互換性のある変数名でなければならないことに注意してください。 これらの名前は、プロジェクトのリソース ファイルと仕様ファイルが Studio によって生成されるときに広く使用されます。

文字列リソースを変更するには、文字列リソースをダブルクリック (または、右クリックしてメニューを選択) して * **[文字列テーブル エディター]** _ ダイアログを開きます。 _*_[文字列テーブル エディター]_*_ ダイアログで、アプリケーションの UI のニーズに合わせて文字列リソースを変更できます。 _*_図 18_*_ は、_ *STRING_13** をダブルクリックしたときの変更ダイアログを示しています。

この場合は、文字列 ID 名が左側に、その最初の言語または参照言語の文字列の内容が右側に表示されています。 もちろん、正確な文字列の内容はアプリケーションに固有ですが、文字列グループ プレビューのレイアウトは一貫しています。

GUIX Studio は、文字列テーブルを定義して維持することで、静的テキストと多言語アプリケーションをサポートしています。 文字列テーブルでは、レコードごとに 1 つの文字列 ID、およびサポートされている各言語のレコードごとに 1 つの文字列定数が定義されます。

アプリケーションでサポートされる言語は、次に示す [言語構成] ダイアログを使用して定義されます。

![[言語構成] ダイアログのスクリーンショット。](./media/guix-studio/config_languages.png)

**図 18**

[言語構成] ダイアログは、アプリケーションのメニューの [構成] | [言語] コマンドを使用して開きます。 このダイアログでは、アプリケーションでサポートされる言語の数と、各言語に関連付けられる名前または言語 ID を定義できます。 サポートされている言語は、プロジェクトの作成後に変更することができます。ただし、言語を削除した場合は、その言語に関連付けられている文字列データも削除され、復元できないことに注意してください。

**[静的に定義]** チェックボックスは、選択した言語が、生成されるリソース ファイルのソース コード形式で静的に定義されることを示します。 静的に定義された言語がない場合は、生成された表示テーブルで言語テーブル ポインターが NULL に設定されます。また、このアプリケーションでは、GUIX ライブラリによって提供されるバイナリ リソース ローダー API を使用して言語を読み込み、インストールする必要があります。

**[双方向テキストのサポート]** チェックボックスにより、双方向テキスト レンダリングのサポートを有効にすることが GUIX Studio に指示されます。 この言語用に入力する文字列に双方向テキスト レンダリングが必要な場合は、このチェックボックスをオンにする必要があります。

**[表示順での双方向テキストの生成]** チェックボックスにより、双方向テキストを出力ファイルに表示順で生成することが GUIX Studio に指示されます。 このオプションがオンの場合は、双方向テキストを正しく表示するために GUIX ライブラリ内でランタイム処理を行う必要がなくなります。 このオプションをオンにした場合は、双方向テキスト レンダリングを GUIX ライブラリ内で有効にしないでください。 この構成では、最適な実行時パフォーマンスが実現されますが、動的に定義された双方向テキスト文字列のレンダリングはサポートされません。

最初の言語または "インデックス 1" の言語は、"参照言語" と呼ばれます。 これは、UI デザインの定義および編集時に GUIX Studio で使用される言語です。 文字列テーブル内の他のすべての言語は、翻訳言語と呼ばれます。 GUIX Studio では、業界標準の XLIFF または CSV 形式のデータ ファイル内の文字列テーブル データのエクスポートおよびインポートがサポートされます。これは、アプリケーション開発者が、参照言語以外のサポート対象言語の翻訳を追加する際に協力する翻訳者と文字列情報を交換する場合に便利です。 XLIFF ファイルまたは CSV ファイルに GUIX 文字列テーブルをエクスポートするときは、XLIFF または CSV 文字列データ交換ファイルに、参照言語と共に翻訳言語が 1 つ含まれます。 同様に、XLIFF ファイルまたは CSV ファイルをインポートするときは、インポートされたデータを使用して、GUIX 文字列テーブルに 1 つの翻訳言語が入力されます。

![文字列テーブル エディターのスクリーンショット。](./media/guix-studio/image53.jpg)

**図 19**

[文字列テーブル エディター] ダイアログには、最初に文字列 ID のリストが左側に表示され、その後に参照言語文字列データが表示されます。 複数の言語が定義されている場合は、3 番目の列に、サポートされる翻訳言語のいずれかが表示されます。 3 番目の列は、参照言語の列の右上にある小さい矢印をクリックして、開くか、閉じることができます。

翻訳言語の列が表示されているときは、文字列リストの翻訳言語の列の右上にある小さい矢印をクリックして、プロジェクトに含まれる他の翻訳言語に切り替えることができます。

文字列レコードを編集するには、テーブル内のレコードをクリックして選択します。 レコードを選択すると、テーブル ビューの下のフィールドに、レコードの文字列 ID と文字列の内容が表示されます。 これらのフィールドに新しい値を入力して、文字列 ID と文字列の内容を変更することができます。

テーブル ビューの右側にあるボックスには、選択した文字列を参照するウィジェットのプレビューが表示されます。 これは、編集された文字列が特定のウィジェット領域を超えるかどうかを判断する場合に役立ちます。

文字列コンテンツの右側にあるフィールドは、次のとおりです。

- [参照数]: このフィールドは、GUIX Studio プロジェクト内で特定の文字列 ID が使用される頻度を示します。 参照数が 0 の場合、この文字列は使われなくなっており、ユーザーが削除しても問題がない可能性があります。
- [文字列の幅 (ピクセル)] は、指定されたフォントを使用する文字列の表示幅を示します。
- [メモ] フィールドは、省略可能なコメント フィールドで、ここに、各文字列の目的や使用に関する情報を追加できます。 これらのメモは、エクスポートされる XLIFF 文字列データ ファイルに含まれ、翻訳者が、正確で意味のある文字列翻訳を行うために役立ちます。

***[文字列テーブル エディター]*** ダイアログが開いているときはいつでも、ダイアログの上部にある [文字列の追加] ボタンをクリックして、プロジェクトに文字列を追加することができます。 使用されなくなった、または使用されていない文字列をプロジェクトから削除するには、最初に文字列を選択してから、ダイアログの上部にある [文字列の削除] ボタンをクリックします。

[文字列テーブル エディター] ダイアログを使用してプロジェクトに新しい文字列を手動で追加するだけでなく、テキストをサポートする任意のウィジェットのプロパティ ビューの [テキスト] フィールドに文字列の内容を入力するだけで、新しい文字列を間接的に追加することもできます。 つまり、新しいウィジェットをターゲット ビューに追加したり、テキスト情報をプロパティ ビューに入力したりすると、これらのアクションによって、新しいエントリがプロジェクト文字列テーブルに自動的に作成されます。

## <a name="adding-language-translations"></a>言語翻訳の追加

GUIX Studio 文字列テーブル エディターは言語定義ワークフローをサポートしています。これにより、開発者は、主言語を使用してアプリケーションを作成した後、その文字列データを標準スキーマ XML または CSV ファイルにエクスポートして言語翻訳エキスパートに送信することができます。 その後、翻訳されたファイルが開発者に返され、開発者は、言語翻訳を Studio プロジェクトにインポートして、新しい言語のサポートをアプリケーションに追加することができます。

この機能を起動するには、文字列テーブル エディターの上部にある [エクスポート] (文字列データをファイルに書き込む) ボタンと [インポート] (翻訳された文字列を読み取る) ボタンを使用します。 [エクスポート] ボタンは、参照言語文字列を含む XLIFF スキーマ XML または CSV ファイルを作成するために使用します。 翻訳者は、標準 XLIFF または CSV ファイル形式をサポートするツールとエディターを使用して、このファイルを翻訳できます。

翻訳エキスパートから、新しい翻訳済み文字列を含む XLIFF ファイルが返されると、[インポート] ボタンを使用して、この XLIFF または CSV ファイルからデータを読み取ることができます。 XLIFF または CSV ファイルに新しい言語が含まれる場合は、その新しい言語がプロジェクトに追加されます。 既存の言語の新しい文字列データが XLIFF ファイルに含まれている場合は、この新しいデータがプロジェクトにインポートされます。 参照言語の文字列がインポート操作により変更されることはありません。

[エクスポート] ボタンをクリックすると、次に示す [XLIFF/CSV エクスポート コントロール] ダイアログが表示されます。

![[XLIFF/CSV エクスポート コントロール] ダイアログのスクリーンショット。](./media/guix-studio/image54.jpg)

**図 20**

[ソース言語] および [ターゲット言語] フィールドで、文字列テーブルのどの列が、参照言語および翻訳言語として XLIFF または CSV ファイルに書き込まれるかを指定します。 ソース言語は参照文字列であり、ターゲット言語は、翻訳者が翻訳済み文字列データを提供する言語です。

[XLIFF バージョン] フィールドでは、2 つの主要 XLIFF ファイル形式バージョンのいずれか (バージョン 1.2 またはバージョン 2.0 (以降)) を指定します。 これらの XLIFF ファイル形式の標準には互換性がありません。また、XLIFF のエクスポート/インポート コマンドを使用する前に、ツールが使用するバージョンを知っておく必要があります。 XLIFF スキーマと XLIFF 標準の詳細については、以下を参照してください。

- バージョン 1.2: [https://docs.oasis-open.org/xliff/xliff-core/xliff-core.html](https://docs.oasis-open.org/xliff/xliff-core/xliff-core.html)
- バージョン 2.0: [https://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0os.pdf](https://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.pdf)

出力ファイル名と出力パスのフィールドを使用して、出力ファイルの書き込み先のファイル名と場所を指定できます。 ファイル名は、ユーザーが自由に指定できますが、エクスポートされたファイルに含まれるソースとターゲットの言語を示す名前を使用することをお勧めします。
