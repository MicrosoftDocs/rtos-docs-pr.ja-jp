---
title: 単純なプロジェクト例
description: この章では、プロジェクト例を GUIX Studio で作成して、この例を GUIX で実行する方法について説明します。
author: jdeere5220
ms.author: kemaxwel
ms.date: 9/30/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 3661396f097e0ed7bd872fae01a7bec9212001b9
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811243"
---
# <a name="chapter-10-example-project"></a><span data-ttu-id="c0974-103">第 10 章: プロジェクト例</span><span class="sxs-lookup"><span data-stu-id="c0974-103">Chapter 10: Example Project</span></span>

<span data-ttu-id="c0974-104">この章では、プロジェクト例を GUIX Studio で作成して、この例を GUIX で実行する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="c0974-104">This chapter describes how to create an example project in GUIX Studio and execute the example on GUIX.</span></span>

## <a name="create-new-project"></a><span data-ttu-id="c0974-105">新しいプロジェクトの作成</span><span class="sxs-lookup"><span data-stu-id="c0974-105">Create New Project</span></span>

<span data-ttu-id="c0974-106">最初の手順では、新しいプロジェクトを作成して、プロジェクトでサポートされる表示と言語を構成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-106">The first step is creating a new project and configuring the displays and languages that the project will support.</span></span> <span data-ttu-id="c0974-107">GUIX Studio を最初に起動すると、***[最近使ったプロジェクト]*** 画面が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-107">When you first start GUIX Studio, you will see the ***Recent Projects*** screen:</span></span>

![GUIX Studio の [最近使ったプロジェクト] ダイアログのスクリーンショット。](./media/guix-studio/recent_projects.png)

<span data-ttu-id="c0974-109">**図 10.1**</span><span class="sxs-lookup"><span data-stu-id="c0974-109">**Figure 10.1**</span></span>

<span data-ttu-id="c0974-110">\* **[新しいプロジェクトの作成]** _</span><span class="sxs-lookup"><span data-stu-id="c0974-110">Click on the \***Create New Project** _…</span></span> <span data-ttu-id="c0974-111">ボタンをクリックして、新しいプロジェクトを開始します。</span><span class="sxs-lookup"><span data-stu-id="c0974-111">button to begin a new project.</span></span> <span data-ttu-id="c0974-112">こちらに示すような、_ *_[New GUIX Project]\(新しい GUIX プロジェクト\)_*\* ダイアログが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-112">You will be presented with the _ *_New GUIX Project_*\* dialog, shown here:</span></span>

![GUIX Studio の [新しいプロジェクトの作成] ダイアログのスクリーンショット。](./media/guix-studio/create_new_project.png)

<span data-ttu-id="c0974-114">**図 10.2**</span><span class="sxs-lookup"><span data-stu-id="c0974-114">**Figure 10.2**</span></span>

<span data-ttu-id="c0974-115">プロジェクト名として「***new_example***」という名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="c0974-115">Type the name "***new_example***" as the project name.</span></span> <span data-ttu-id="c0974-116">プロジェクト名には、標準の C 変数名前付けルールを使用する必要があります (特殊および予約文字は不可)。</span><span class="sxs-lookup"><span data-stu-id="c0974-116">Project names should use standard C variable naming rules, that is, no special or reserved characters.</span></span> <span data-ttu-id="c0974-117">プロジェクトを保存する場所へのパスを入力します。</span><span class="sxs-lookup"><span data-stu-id="c0974-117">Type the path to the location where the project should be saved.</span></span> <span data-ttu-id="c0974-118">パスは有効なファイル システム ディレクトリでなければなりません。存在しない場合、ディレクトリは作成されません。</span><span class="sxs-lookup"><span data-stu-id="c0974-118">The path must be a valid file system directory, that is, GUIX Studio will not create the directory if it does not exist.</span></span> <span data-ttu-id="c0974-119">[OK] をクリックしてプロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-119">Click "OK" to create the project.</span></span>

<span data-ttu-id="c0974-120">次に表示される画面は、こちらに示す [プロジェクト構成] 画面です。</span><span class="sxs-lookup"><span data-stu-id="c0974-120">The next screen shown is the Project Configuration screen, shown here:</span></span>

![GUIX Studio の [プロジェクト構成] ダイアログのスクリーンショット。](./media/guix-studio/config_new_project.png)

<span data-ttu-id="c0974-122">**図 10.3**</span><span class="sxs-lookup"><span data-stu-id="c0974-122">**Figure 10.3**</span></span>

<span data-ttu-id="c0974-123">このダイアログでは、プロジェクトでサポートするディスプレイ数を指定して、各ディスプレイに名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="c0974-123">This dialog allows you to specify how many displays your project will support, and give a name to each display.</span></span> <span data-ttu-id="c0974-124">各ディスプレイでサポートされるカラー フォーマットを指定し、必要に応じてStudio によって各ディスプレイ用に生成される出力ファイルのパス名を入力します。</span><span class="sxs-lookup"><span data-stu-id="c0974-124">You must specify the color format supported by each display, and optionally type a pathname for the output files generated by Studio for each display.</span></span> <span data-ttu-id="c0974-125">出力ファイルの既定のディレクトリは "***.\\***" です。これは、C 出力ファイルがプロジェクト自体と同じディレクトリに書き込まれることを意味します。</span><span class="sxs-lookup"><span data-stu-id="c0974-125">The default directory for the output files is "***.\\***", meaning the C output files are written to the same directory as the project itself.</span></span>

<span data-ttu-id="c0974-126">この例では、\* **[Number of Displays]\(ディスプレイ数\)** _ を "1" のままにして、表示名 フィールドに「_*_main_display_*_」という名前を入力し、_\*_[allocate canvas memory]\(キャンバス メモリの割り当て\)_\*_ オンにします。</span><span class="sxs-lookup"><span data-stu-id="c0974-126">For this example, leave the ***Number of Displays** _ set to "1", type the name "_*_main_display_*_" in the display name field, and check "_*_allocate canvas memory_\*_".</span></span> <span data-ttu-id="c0974-127">解像度、カラー フォーマット、ディレクトリの各フィールドを既定値のままにし、_\* _[OK]_ \*\* をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c0974-127">Leave the resolution, color format, and directory fields at their default values, and click _\*_OK_\*\*.</span></span>

<span data-ttu-id="c0974-128">これにより、図10.4 に示すように、プロジェクトが Studio IDE で開いて表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-128">You should now see your project open with the Studio IDE, as shown in figure 10.4:</span></span>

![Studio IDE で開いているプロジェクトのスクリーンショット。](./media/guix-studio/initial_screen.png)

<span data-ttu-id="c0974-130">**図 10.4**</span><span class="sxs-lookup"><span data-stu-id="c0974-130">**Figure 10.4**</span></span>

<span data-ttu-id="c0974-131">新しいプロジェクトを作成すると、プロジェクトの開始点として既定のウィンドウが自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-131">When you create a new project, GUIX Studio automatically creates a default window as the starting point for your project.</span></span> <span data-ttu-id="c0974-132">この灰色のボックスは自動的に作成された既定のウィンドウで、"*ターゲット ビュー*" の中央にあります。</span><span class="sxs-lookup"><span data-stu-id="c0974-132">This gray box is the default window created for you, centered within the *Target View*.</span></span>

<span data-ttu-id="c0974-133">このウィンドウが選択されていない場合は、ウィンドウをクリックすると、ウィンドウの周囲に破線の選択ボックスが描画されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-133">If this window is not selected, click on the window so that the dashed selection box is drawn around the window.</span></span> <span data-ttu-id="c0974-134">\* **[Properties View]\(プロパティ ビュー\)** _ で、_\*_[Widget Name]\(ウィジェット名\)_\*_、_\*_[Widget Id]\(ウィジェット ID\)_\*_、_\*_[左]_\*_、_\*_[上]_\*_ 、_\*_[幅]_\*_ 、_\*_[高さ]_\*_ 、および _ *_[Border]\(境界線\)_* \* を下に示す設定に合わせて変更します。</span><span class="sxs-lookup"><span data-stu-id="c0974-134">Now in the ***Properties View** _, change the _*_Widget Name_*_, _*_Widget Id_*_, _*_Left_*_, _*_Top_*_, _*_Width_*_, _*_Height_*_, and _ *_Border_** to match those settings shown below.</span></span> <span data-ttu-id="c0974-135">これらの変更を行うと、変更内容がすぐにターゲット ビュー内に反映されて表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-135">As you make these changes, you should see your changes immediately taking effect within the Target View.</span></span>

![[Properties View]\(プロパティ ビュー\) ダイアログのスクリーンショット。](./media/guix-studio/initial_window_properties.png)

<span data-ttu-id="c0974-137">**図 10.5**</span><span class="sxs-lookup"><span data-stu-id="c0974-137">**Figure 10.5**</span></span>

<span data-ttu-id="c0974-138">次に、\***GX_ICON** _ ウィジェット内で使用されるピクセルマップ リソースを追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-138">Next we will add a pixelmap resource to be used within a \***GX_ICON** _ widget.</span></span> <span data-ttu-id="c0974-139">GUIX Studio ディストリビューションには複数のアイコンが用意されており、それらをこの例で使用します。</span><span class="sxs-lookup"><span data-stu-id="c0974-139">Several icons are provided with your GUIX Studio distribution that will work fine for this example.</span></span> <span data-ttu-id="c0974-140">_\*_[Pixelmaps]\(ピクセルマップ\)_\*_ リソース ビューを展開して、_ *_[Add New Pixelmap]\(新しいピクセルマップの追加\)_*\* ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="c0974-140">Expand your _*_Pixelmaps_*_ Resource View and click the _ *_Add New Pixelmap_*\* button:</span></span>

![[Add New Pixelmap]\(新しいピクセルマップの追加\) ボタンのスクリーンショット。](./media/guix-studio/image74.jpg)

<span data-ttu-id="c0974-142">GUIX Studio のインストール フォルダーを参照し、\* **./graphics/icons** _ フォルダー内で _*_i_history_lg.png_*_ という名前のファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="c0974-142">Browse to your GUIX Studio installation folder, and within the ***./graphics/icons** _ folder select the file named _*_i_history_lg.png_\*_.</span></span> <span data-ttu-id="c0974-143">_\*_[開く]_\*_ をクリックしてこのリソースをプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-143">Click _*_Open_*_ to add this resource to your project.</span></span> <span data-ttu-id="c0974-144">これで、_ *_[Pixelmaps]\(ピクセルマップ\)_*\* リソース ビューに、新しく追加したアイコン イメージのプレビューが表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="c0974-144">Your _ *_Pixelmaps_*\* Resource View should now show a preview of the newly added icon image:</span></span>

![[Pixelmaps]\(ピクセルマップ\) リソース ビューのスクリーンショット。](./media/guix-studio/example_add_pixelmap.png)

<span data-ttu-id="c0974-146">**図 10.6**</span><span class="sxs-lookup"><span data-stu-id="c0974-146">**Figure 10.6**</span></span>

<span data-ttu-id="c0974-147">この新しいイメージ リソースは、後で UI デザインの一部として使用します。</span><span class="sxs-lookup"><span data-stu-id="c0974-147">We will use this new image resource later as part of our UI design.</span></span>

<span data-ttu-id="c0974-148">ピクセルマップ リソースを追加するのと同様に、新しいフォント リソースをツールボックスに追加して、このフォントを後でデザインで使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="c0974-148">Similar to adding a pixelmap resource, we will add a new font resource to our toolbox so that we can use this font later in our design.</span></span> <span data-ttu-id="c0974-149">\* **[フォント]** _ リソース ビューを展開して、_\*_[Add New Font]\(新しいフォントの追加\)_\*_ ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="c0974-149">Expand the ***Fonts** _ Resource View and click on the _*_Add New Font_\*_ button.</span></span> <span data-ttu-id="c0974-150">この操作により、_\*_[Add font]\(フォントの追加\) または [Edit font]\(フォントの編集\)_\*_ ダイアログが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-150">This action will invoke the _*_Add/Edit_*_ font dialog.</span></span> <span data-ttu-id="c0974-151">次に、GUIX Studio のインストール フォルダーで、指定されている GUIX フォント _\*_ .\\fonts\\verasans_ *_ を参照し、_* _VeraIt.ttf_ *_という名前の TrueType フォント ファイルを選択します。フォント名フィールドにフォント名「_*_MEDIUM_ITALIC_*_」を入力して、高さフィールドに「_*_30_\*\*」を入力します。</span><span class="sxs-lookup"><span data-stu-id="c0974-151">Next, browse to the supplied GUIX fonts in the GUIX Studio installation folder, _\*_.\\fonts\\verasans_ *_, and select the TrueType font file named _*_VeraIt.ttf_*_. Type font the font name "_*_MEDIUM_ITALIC_*_" in the font name field, and type "_*_30_\*\*" in the height field.</span></span> <span data-ttu-id="c0974-152">ダイアログはこちらのようになります。</span><span class="sxs-lookup"><span data-stu-id="c0974-152">Your dialog should now look like this:</span></span>

![[Edit Font]\(フォントの編集\)ダイアログのスクリーンショット。](./media/guix-studio/example_add_font.png)

<span data-ttu-id="c0974-154">**図 10.7**</span><span class="sxs-lookup"><span data-stu-id="c0974-154">**Figure 10.7**</span></span>

<span data-ttu-id="c0974-155">***[OK]*** をクリックして、このフォントをプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-155">Click ***OK*** to add this font to your project.</span></span> <span data-ttu-id="c0974-156">リソース ビューにフォントが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-156">You should now see the font in your Resource View:</span></span>

![リソース ビューのフォントのスクリーンショット。](./media/guix-studio/example_font_added.png)

<span data-ttu-id="c0974-158">**図 10.8**</span><span class="sxs-lookup"><span data-stu-id="c0974-158">**Figure 10.8**</span></span>

<span data-ttu-id="c0974-159">この新しいフォントは、後で UI デザインで使用します。</span><span class="sxs-lookup"><span data-stu-id="c0974-159">We will use this new font later in our UI design.</span></span>

<span data-ttu-id="c0974-160">いくつかの新しいリソースを利用できるようになったので、いくつかの子ウィジェットを画面に追加してこれらのリソースを利用できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0974-160">Now that we have some new resources available, we need to add some child widgets to our screen that can utilize these resources.</span></span> <span data-ttu-id="c0974-161">ターゲット ビューで右クリックして、前に作成した "\***hello_world** _" という名前のウィンドウを選択します。</span><span class="sxs-lookup"><span data-stu-id="c0974-161">Select the previously created window named "\***hello_world** _" by right-clicking on the window in the Target View.</span></span> <span data-ttu-id="c0974-162">表示されたポップアップ メニューで、メニュー コマンド _\*_[Insert]\(挿入\)、[Text]\(テキスト\)、[Prompt]\(プロンプト\)_\*_ を選択して、新しい _ *_GX_PROMPT_*\* ウィジェットを挿入し、このウィジェットを背景ウィンドウにアタッチします。</span><span class="sxs-lookup"><span data-stu-id="c0974-162">In the pop-up menu that is now displayed, select the menu command _*_Insert, Text, Prompt_*_ to insert a new _ *_GX_PROMPT_*\* widget and attach the widget to the background window.</span></span> <span data-ttu-id="c0974-163">ウィンドウはこちらのようになります。</span><span class="sxs-lookup"><span data-stu-id="c0974-163">Your window should now look like this:</span></span>

![[Prompt]\(プロンプト\) が選択されたポップアップ メニューのスクリーンショット](./media/guix-studio/image78.jpg)

<span data-ttu-id="c0974-165">**図 10.9**</span><span class="sxs-lookup"><span data-stu-id="c0974-165">**Figure 10.9**</span></span>

<span data-ttu-id="c0974-166">"***MEDIUM_ITALIC** _" という名前のフォントを _ \*_[フォント]_\** リソース ビューでクリックして、プロンプト ウィジェットにドラッグ アンド ドロップします。</span><span class="sxs-lookup"><span data-stu-id="c0974-166">Click on the font named "***MEDIUM_ITALIC** _" in the _ *_Fonts_** Resource View, and drag and drop the font on the prompt widget.</span></span> <span data-ttu-id="c0974-167">次に、プロンプトのプロパティを図 10.10 に示すように編集してプロンプトのサイズを変更し、プロンプトの透明度を設定し、プロンプトのテキストとスタイルを変更します。</span><span class="sxs-lookup"><span data-stu-id="c0974-167">Next, edit the prompt properties as shown in figure 10.10 to resize the prompt, set the prompt transparency, and change the prompt text and style:</span></span>

![プロンプトの [Properties View]\(プロパティ ビュー\) のスクリーンショット。](./media/guix-studio/image79.jpg)

<span data-ttu-id="c0974-169">**図 10.10**</span><span class="sxs-lookup"><span data-stu-id="c0974-169">**Figure 10.10**</span></span>

<span data-ttu-id="c0974-170">画面の解像度によっては、[Properties View]\(プロパティ ビュー\) を縦にスクロールしてこれらの設定をそれぞれ表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0974-170">You may need to scroll vertically in the Properties View to see each of these settings depending on your screen resolution.</span></span> <span data-ttu-id="c0974-171">これらの変更を行った後、ターゲット ビューはこちらのようになります。</span><span class="sxs-lookup"><span data-stu-id="c0974-171">After making these changes, your Target View should now look like this:</span></span>

![Hello World が選択されたポップアップ メニューのスクリーンショット。](./media/guix-studio/image80.jpg)

<span data-ttu-id="c0974-173">**図 10.11**</span><span class="sxs-lookup"><span data-stu-id="c0974-173">**Figure 10.11**</span></span>

<span data-ttu-id="c0974-174">次に、アイコン ボタンのスタイル ウィジェットを画面に置きます。</span><span class="sxs-lookup"><span data-stu-id="c0974-174">Next we will place an Icon Button style widget on the screen.</span></span> <span data-ttu-id="c0974-175">背景ウィンドウをクリックして選択し、最上位メニューまたは右クリック ポップアップ メニューを使用して、\* **[Insert]\(挿入\)、[Button]\(ボタン\)、[Icon Button]\(アイコン ボタン\)** _ を選択して新しい _*_GX_ICON_BUTTON_*_ をウィンドウに追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-175">Select the background window by clicking on it, and use either the top-level menu or the right-click pop-up menu to select ***Insert, Button, Icon Button** _ to add a new _*_GX_ICON_BUTTON_\*_ to the window.</span></span> <span data-ttu-id="c0974-176">先ほど追加した _ *_I_HISTORY_LG_*\* という名前のアイコンをクリックして、アイコン ボタンにドラッグします。</span><span class="sxs-lookup"><span data-stu-id="c0974-176">Click on the Icon named _ *_I_HISTORY_LG_*\* that we added earlier and drag it to the icon button.</span></span> <span data-ttu-id="c0974-177">[Properties View]\(プロパティ ビュー\) を使用して、アイコンの位置とサイズを下に示すように調整します。</span><span class="sxs-lookup"><span data-stu-id="c0974-177">Using the properties view, adjust the icon position and size as show below:</span></span>

![アイコン ボタン スタイル ウィジェットの [Properties View]\(プロパティ ビュー\) のスクリーンショット。](./media/guix-studio/image81.jpg)

<span data-ttu-id="c0974-179">**図 10.12**</span><span class="sxs-lookup"><span data-stu-id="c0974-179">**Figure 10.12**</span></span>

<span data-ttu-id="c0974-180">画面はこちらのようになるはずです。</span><span class="sxs-lookup"><span data-stu-id="c0974-180">Your screen should now look like this:</span></span>

![Hello World とクリップボード アイコンが表示されたポップアップ メニューのスクリーンショット。](./media/guix-studio/image82.jpg)

<span data-ttu-id="c0974-182">**図 10.13**</span><span class="sxs-lookup"><span data-stu-id="c0974-182">**Figure 10.13**</span></span>

<span data-ttu-id="c0974-183">これで、単純な画面デザインの例は完成です。</span><span class="sxs-lookup"><span data-stu-id="c0974-183">We will call this complete for the simple example screen design.</span></span> <span data-ttu-id="c0974-184">実際のアプリケーション画面はずっと高度なものになるでしょうが、GUIX Studio を使用して独自のアプリケーション画面を作成する方法を紹介するにはこれで十分です。</span><span class="sxs-lookup"><span data-stu-id="c0974-184">Your actual application screens will likely be much more sophisticated, but this is enough to show you how to use GUIX Studio to create your own application screens.</span></span>

## <a name="generate-resource-and-application-code"></a><span data-ttu-id="c0974-185">リソースとアプリケーション コードの生成</span><span class="sxs-lookup"><span data-stu-id="c0974-185">Generate Resource and Application Code</span></span>

<span data-ttu-id="c0974-186">次の手順では、埋め込み GUIX ランタイム UI を定義するリソース ファイルと仕様ファイルを生成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-186">The next step is to generate the resource file and specification file that define the embedded GUIX run-time UI.</span></span> <span data-ttu-id="c0974-187">出力ファイルを生成するには、プロジェクト ビューで ***main_display** _ ノードを右クリックして _ *_[Generate Resource Files]\(リソース ファイルの生成\)_** コマンドを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c0974-187">To generate your output files you will need right-click on the ***main_display** _ node in the Project View, and select the _ *_Generate Resource Files_** command.</span></span> <span data-ttu-id="c0974-188">表示される情報ウィンドウにリソース ファイルが生成されたことが示されます (図 10.14 を参照)。</span><span class="sxs-lookup"><span data-stu-id="c0974-188">You will observe an information window that indicates your resource files have been generated, as shown in figure 10.14:</span></span>

![通知ダイアログのスクリーンショット。](./media/guix-studio/image83.jpg)

<span data-ttu-id="c0974-190">**図 10.14**</span><span class="sxs-lookup"><span data-stu-id="c0974-190">**Figure 10.14**</span></span>

<span data-ttu-id="c0974-191">\* **[OK]** _ をクリックしてこの通知を無視して、同じ手順を使用して _*_main_display_*_ ノードを右クリックして _ *_[Generate Specification Files]\(仕様ファイルの生成\)_*\* コマンドを選択します。</span><span class="sxs-lookup"><span data-stu-id="c0974-191">Click ***OK** _ to dismiss this notification, and use the same procedure to right-click on the _*_main_display_*_ node and select the _ *_Generate Specification Files_** command.</span></span> <span data-ttu-id="c0974-192">同様の通知ウィンドウが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-192">You should observe a similar notification window.</span></span> <span data-ttu-id="c0974-193">これで、単純な UI アプリケーション ファイルが生成されました。</span><span class="sxs-lookup"><span data-stu-id="c0974-193">You have now generated your simple UI application files.</span></span>

## <a name="create-user-supplied-code"></a><span data-ttu-id="c0974-194">ユーザー指定コードの作成</span><span class="sxs-lookup"><span data-stu-id="c0974-194">Create User Supplied Code</span></span>

<span data-ttu-id="c0974-195">次の手順では、GUIX Studio で生成された画面デザインを呼び出す独自のアプリケーション ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-195">The next step is to create your own application file that will invoke the GUIX Studio-generated screen design.</span></span> <span data-ttu-id="c0974-196">好きなエディターを使用して、***new_example.c*** という名前のソース ファイルを作成して、このファイルに次のソース コードを入力します。</span><span class="sxs-lookup"><span data-stu-id="c0974-196">Using your preferred editor, create a source file named ***new_example.c***, and enter the following source code into this file:</span></span>

```C

/* This is an example of the GUIX graphics framework in Win32. */
/* Include system files. */

#include <stdio.h>
#include "tx_api.h"
#include "gx_api.h"

/* Include GUIX resource and specification files for example. */

#include "new_example_resources.h"
#include "new_example_specifications.h"

/* Define the new example thread control block and stack. */

TX_THREAD new_example_thread;
UCHAR new_example_thread_stack[4096];

/* Define the root window pointer. */

GX_WINDOW_ROOT *root_window;

/* Define function prototypes. */

VOID new_example_thread_entry(ULONG thread_input);
UINT win32_graphics_driver_setup_24bpp(GX_DISPLAY *display);

int main()
{
    /* Enter the ThreadX kernel. */
    tx_kernel_enter();
    return(0);
}

VOID tx_application_define(void *first_unused_memory)
{
    /* Create the new example thread. */
    tx_thread_create(&new_example_thread, "GUIX New Example Thread", 
                      new_example_thread_entry, 0, 
                      new_example_thread_stack, sizeof(new_example_thread_stack),
                      1, 1, TX_NO_TIME_SLICE, TX_AUTO_START);
}

VOID new_example_thread_entry(ULONG thread_input)
{

    /* Initialize the GUIX library */
    gx_system_initialize();

    /* Configure the main display. */
    gx_studio_display_configure(MAIN_DISPLAY,                      /* Display to configure*/
                                win32_graphics_driver_setup_24bpp, /* Driver to use */
                                LANGUAGE_ENGLISH,                  /* Language to install */
                                MAIN_DISPLAY_DEFAULT_THEME,        /* Theme to install */
                                &root_window);                     /* Root window pointer */

    /* Create the screen - attached to root window. */

    gx_studio_named_widget_create("hello_world", (GX_WIDGET *) root_window, GX_NULL);

    /* Show the root window to make it visible. */
    gx_widget_show(root_window);

    /* Let GUIX run. */
    gx_system_start();

}
```

<span data-ttu-id="c0974-197">上のソース コードによって `GUIX New Example Thread` という名前の典型的な ThreadX スレッドが、4K バイトのスタック サイズで作成されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-197">The source code above creates a typical ThreadX thread named `GUIX New Example Thread` with a stack size of 4K bytes.</span></span> <span data-ttu-id="c0974-198">***new_example_thread_entry*** という名前の関数で始まる動作に注目してください。</span><span class="sxs-lookup"><span data-stu-id="c0974-198">The interesting work begins in the function named ***new_example_thread_entry***.</span></span> <span data-ttu-id="c0974-199">この関数から、GUIX 特有スレッドの実行が開始します。</span><span class="sxs-lookup"><span data-stu-id="c0974-199">This function is where the GUIX specific thread begins to run.</span></span>

<span data-ttu-id="c0974-200">最初の呼び出しは、***gx_system_initialize*** という名前の関数に対して行なわれます。</span><span class="sxs-lookup"><span data-stu-id="c0974-200">The first call is to the function named ***gx_system_initialize***.</span></span> <span data-ttu-id="c0974-201">この呼び出しは、他の GUIX API を呼び出して GUIX ライブラリを初めて使用するための準備をする前に、かならず必要です。</span><span class="sxs-lookup"><span data-stu-id="c0974-201">This call is always required before any other GUIX APIs are invoked to prepare the GUIX library for first use.</span></span>

<span data-ttu-id="c0974-202">次に、この例では ***gx_studio_display_configure*** 関数を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="c0974-202">Next, the example calls the function ***gx_studio_display_configure***.</span></span> <span data-ttu-id="c0974-203">この関数は GUIX 表示インスタンスを作成し、要求された言語のアプリケーション文字列テーブルをインストールし、要求されたテーマを表示リソースからインストールし、この表示用に作成されたルート ウィンドウへのポインターを返します。</span><span class="sxs-lookup"><span data-stu-id="c0974-203">This function creates the GUIX display instance, installs the requested language of the application string table, installs the requested theme from the display resources, and returns a pointer to the root window that has been created for this display.</span></span> <span data-ttu-id="c0974-204">ルート ウィンドウは、このアプリケーションで表示されるすべての最上位の画面の親として使用されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-204">The root window is used as the parent of all top-level screens that our application will display.</span></span>

<span data-ttu-id="c0974-205">次に、この例では ***gx_studio_named_widget_create** _ を呼び出して _ *_hello_world_** 画面のインスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-205">Next the example calls ***gx_studio_named_widget_create** _ to create an instance of our _ *_hello_world_** screen.</span></span> <span data-ttu-id="c0974-206">この関数は、GUIX Studio によって作成されるデータ構造とリソースを使用して、画面のインスタンスをここで定義したとおりに作成します。</span><span class="sxs-lookup"><span data-stu-id="c0974-206">This function uses the data structures and resource produces by GUIX Studio to create an instance of the screen as we have defined it.</span></span> <span data-ttu-id="c0974-207">ルート ウィンドウのポインターを 2 番目のパラメーターとしてこの関数呼び出しに渡します。つまり、画面をすぐにルート ウィンドウにアタッチします。</span><span class="sxs-lookup"><span data-stu-id="c0974-207">We pass the root window pointer as the second parameter to this function call, meaning we want the screen to be immediately attached to the root window.</span></span> <span data-ttu-id="c0974-208">最後のパラメーターは、作成された画面へのポインターを保持する場合に使用できるオプションの戻りポインターです。</span><span class="sxs-lookup"><span data-stu-id="c0974-208">The last parameter is an optional return pointer that can be used if we want to keep a pointer to the created screen.</span></span>

<span data-ttu-id="c0974-209">次に ***gx_widget_show** _ を呼び出します。これにより、ルート ウィンドウとそのすべての子 (_ *_hello_world_** 画面を含む) が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c0974-209">Next ***gx_widget_show** _ is called, which makes the root window and all of its children, including the _ *_hello_world_** screen, visible.</span></span>

<span data-ttu-id="c0974-210">最後に、この例では ***gx_system_start*** を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="c0974-210">Finally, the example calls ***gx_system_start***.</span></span> <span data-ttu-id="c0974-211">この関数は、GUIX システム イベント処理ループの実行を開始します。</span><span class="sxs-lookup"><span data-stu-id="c0974-211">This function begins executing the GUIX system event processing loop.</span></span>

## <a name="build-and-run-the-example"></a><span data-ttu-id="c0974-212">例のビルドと実行</span><span class="sxs-lookup"><span data-stu-id="c0974-212">Build and Run the Example</span></span>

<span data-ttu-id="c0974-213">例のビルドと実行は、お使いのビルド ツールと環境に固有です。</span><span class="sxs-lookup"><span data-stu-id="c0974-213">Building and running the example is specific to your build tools and environment.</span></span> <span data-ttu-id="c0974-214">しかし、一般的なプロセスを次のように定義できます。</span><span class="sxs-lookup"><span data-stu-id="c0974-214">However we can define the general process:</span></span>

1. <span data-ttu-id="c0974-215">新しいディレクトリとアプリケーション プロジェクトを作成します</span><span class="sxs-lookup"><span data-stu-id="c0974-215">Create a new directory and application project</span></span>
1. <span data-ttu-id="c0974-216">プロジェクトにこちらのファイルを追加します</span><span class="sxs-lookup"><span data-stu-id="c0974-216">Add these files to the project:</span></span>

    <span data-ttu-id="c0974-217">**new_example_resources.c**</span><span class="sxs-lookup"><span data-stu-id="c0974-217">**new_example_resources.c**</span></span>

    <span data-ttu-id="c0974-218">**new_example_specification.c**</span><span class="sxs-lookup"><span data-stu-id="c0974-218">**new_example_specification.c**</span></span>

    <span data-ttu-id="c0974-219">**new_example.c**</span><span class="sxs-lookup"><span data-stu-id="c0974-219">**new_example.c**</span></span>

1. <span data-ttu-id="c0974-220">GUIX Studio インストール パス ***./win32_runtime*** の Win32 ランタイム サポート ファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-220">Add the Win32 run-time support files from the GUIX Studio installation path ***./win32_runtime***.</span></span> <span data-ttu-id="c0974-221">この中には、ThreadX および GUIX Win32 ヘッダーおよびランタイム ライブラリ ファイルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="c0974-221">This includes the ThreadX and GUIX Win32 header and run-time library files.</span></span>
1. <span data-ttu-id="c0974-222">GUIX Win32 ライブラリ (***gx.lib***) をプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-222">Add the GUIX Win32 library (***gx.lib***) to the project</span></span>
1. <span data-ttu-id="c0974-223">ThreadX Win32 ライブラリ (***tx.lib***) をプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="c0974-223">Add the ThreadX Win32 library (***tx.lib***) to the project</span></span>
1. <span data-ttu-id="c0974-224">アプリケーションのコンパイル、リンク、実行を行います。</span><span class="sxs-lookup"><span data-stu-id="c0974-224">Compile, Link, and Run the application!</span></span>
