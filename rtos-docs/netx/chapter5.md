---
title: 第 5 章 - Azure RTO NetX ネットワーク ドライバー
description: この章では、Azure RTO NetX 用のネットワーク ドライバーについて説明します。
author: philmea
ms.author: philmea
ms.date: 09/11/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: ccc55111d785d84cdb193c387830abbc03a15e7c
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811669"
---
# <a name="chapter-5---netx-network-drivers"></a><span data-ttu-id="74e1d-103">第 5 章 - NetX ネットワーク ドライバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-103">Chapter 5 - NetX Network Drivers</span></span>

<span data-ttu-id="74e1d-104">この章では、NetX 用のネットワーク ドライバーについて説明します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-104">This chapter contains a description of network drivers for NetX.</span></span> <span data-ttu-id="74e1d-105">記載されている情報は、開発者が Azure RTO NetX 用のアプリケーション固有のネットワーク ドライバーを作成するのを支援することを目的としています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-105">The information presented is designed to help developers write application-specific network drivers for Azure RTOS NetX.</span></span>

## <a name="driver-introduction"></a><span data-ttu-id="74e1d-106">ドライバーの概要</span><span class="sxs-lookup"><span data-stu-id="74e1d-106">Driver Introduction</span></span>

<span data-ttu-id="74e1d-107">NX_IP 構造体には、単一の IP インスタンスを管理するためのすべてが含まれています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-107">The NX_IP structure contains everything to manage a single IP instance.</span></span> <span data-ttu-id="74e1d-108">これには、一般的な TCP/IP プロトコル情報だけでなく、アプリケーション固有の物理ネットワーク ドライバーのエントリ ルーチンが含まれます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-108">This includes general TCP/IP protocol information as well as the application-specific physical network driver's entry routine.</span></span> <span data-ttu-id="74e1d-109">ドライバーのエントリ ルーチンは、***nx_ip_create*** サービス中に定義されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-109">The driver's entry routine is defined during the ***nx_ip_create*** service.</span></span> <span data-ttu-id="74e1d-110">追加のデバイスを IP インスタンスに追加するには、***Nx_ip_interface_attach*** サービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-110">Additional devices may be added to the IP instance via the ***nx_ip_interface_attach*** service.</span></span>

<span data-ttu-id="74e1d-111">NetX とアプリケーションのネットワーク ドライバーの間の通信は、**NX_IP_DRIVER** 要求構造体を通じて行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-111">Communication between NetX and the application's network driver is accomplished through the **NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="74e1d-112">この構造体は、ほとんどの場合、呼び出し元のスタック上にローカルで定義されるため、ドライバーと呼び出し元の関数が返された後に解放されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-112">This structure is most often defined locally on the caller's stack and is therefore released after the driver and calling function return.</span></span> <span data-ttu-id="74e1d-113">構造体は、次のように定義されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-113">The structure is defined as follows.</span></span>

```C
typedef struct NX_IP_DRIVER_STRUCT
{
    UINT nx_ip_driver_command;
    UINT nx_ip_driver_status;
    ULONG nx_ip_driver_physical_address_msw;
    ULONG nx_ip_driver_physical_address_lsw;
    NX_PACKET *nx_ip_driver_packet;
    ULONG *nx_ip_driver_return_ptr;
    NX_IP *nx_ip_driver_ptr;
    NX_INTERFACE *nx_ip_driver_interface;
} NX_IP_DRIVER;
```

## <a name="driver-entry"></a><span data-ttu-id="74e1d-114">ドライバー エントリ</span><span class="sxs-lookup"><span data-stu-id="74e1d-114">Driver Entry</span></span>

<span data-ttu-id="74e1d-115">NetX は、ドライバーの初期化、パケットの送信のほか、ネットワーク デバイスの初期化と有効化などのさまざまな制御および状態操作のために、ネットワーク ドライバーのエントリ関数を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-115">NetX invokes the network driver entry function for driver initialization and for sending packets and for various control and status operations, including initializing and enabling the network device.</span></span> <span data-ttu-id="74e1d-116">NetX は、_ *NX_IP_DRIVER*\* 要求構造体内で \***nx_ip_driver_command** _ フィールドを設定することによって、ネットワーク ドライバーにコマンドを発行します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-116">NetX issues commands to the network driver by setting the ***nx_ip_driver_command** _ field in the _ *NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="74e1d-117">ドライバー エントリ関数の形式は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-117">The driver entry function has the following format:</span></span>

```C
VOID my_driver_entry(NX_IP_DRIVER *request);
```

## <a name="driver-requests"></a><span data-ttu-id="74e1d-118">ドライバー要求</span><span class="sxs-lookup"><span data-stu-id="74e1d-118">Driver Requests</span></span>

<span data-ttu-id="74e1d-119">NetX は、特定のコマンドを使用してドライバー要求を作成し、ドライバー エントリ関数を呼び出して、コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-119">NetX creates the driver request with a specific command and invokes the driver entry function to execute the command.</span></span> <span data-ttu-id="74e1d-120">ネットワーク ドライバーごとに単一のエントリ関数があるため、NetX はドライバー要求のデータ構造体を通じてすべての要求を行います。</span><span class="sxs-lookup"><span data-stu-id="74e1d-120">Because each network driver has a single entry function, NetX makes all requests through the driver request data structure.</span></span> <span data-ttu-id="74e1d-121">要求は、ドライバー要求のデータ構造体 (**NX_IP_DRIVER**) の ***nx_ip_driver_command*** メンバーによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-121">The ***nx_ip_driver_command*** member of the driver request data structure (**NX_IP_DRIVER**) defines the request.</span></span> <span data-ttu-id="74e1d-122">メンバー ***nx_ip_driver_status*** 内の呼び出し元には状態情報が報告されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-122">Status information is reported back to the caller in the member ***nx_ip_driver_status***.</span></span> <span data-ttu-id="74e1d-123">このフィールドが **NX_SUCCESS** の場合、ドライバー要求は正常に完了しています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-123">If this field is **NX_SUCCESS**, the driver request was completed successfully.</span></span>

<span data-ttu-id="74e1d-124">NetX は、ドライバーへのすべてのアクセスをシリアル化します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-124">NetX serializes all access to the driver.</span></span> <span data-ttu-id="74e1d-125">このため、ドライバーは、エントリ関数を呼び出している複数のスレッドを非同期に処理する必要がありません。</span><span class="sxs-lookup"><span data-stu-id="74e1d-125">Therefore, the driver does not need to handle multiple threads asynchronously calling the entry function.</span></span> <span data-ttu-id="74e1d-126">デバイス ドライバー関数は、IP ミューテックスがロックされた状態で実行されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="74e1d-126">Note that the device driver function executes with the IP mutex locked.</span></span> <span data-ttu-id="74e1d-127">このため、デバイス ドライバーの内部関数が自身をブロックすることはできません。</span><span class="sxs-lookup"><span data-stu-id="74e1d-127">Therefore the device driver internal function shall not block itself.</span></span>

<span data-ttu-id="74e1d-128">通常、デバイス ドライバーは割り込みも処理します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-128">Typically the device driver also handles interrupts.</span></span> <span data-ttu-id="74e1d-129">したがって、すべてのドライバー関数が、割り込みセーフである必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-129">Therefore, all driver functions need to be interrupt-safe.</span></span>

### <a name="driver-initialization"></a><span data-ttu-id="74e1d-130">ドライバーの初期化</span><span class="sxs-lookup"><span data-stu-id="74e1d-130">Driver Initialization</span></span>

<span data-ttu-id="74e1d-131">実際のドライバー初期化処理はアプリケーション固有ですが、通常、データ構造体と物理ハードウェアの初期化で構成されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-131">Although the actual driver initialization processing is application specific, it usually consists of data structure and physical hardware initialization.</span></span> <span data-ttu-id="74e1d-132">ドライバー初期化のために NetX から求められる情報は、IP 最大転送単位 (MTU)、つまり IP レイヤー ペイロードで使用可能なバイト数 (IP ヘッダーを含む) と、物理インターフェイスが論理から物理へのマッピングが必要かどうかです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-132">The information required from NetX for driver initialization is the IP Maximum Transmission Unit (MTU), which is the number of bytes available to the IP-layer payload, including IP header) and if the physical interface needs logical-to-physical mapping.</span></span> <span data-ttu-id="74e1d-133">ドライバーは、</span><span class="sxs-lookup"><span data-stu-id="74e1d-133">The driver needs</span></span>

<span data-ttu-id="74e1d-134">_ *NX_INTERFACE*\* 構造体内の \***nx_interface_ip_mtu_size** _ の値を設定することで、インターフェイスの MTU を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-134">to configure the interface MTU by setting the value in ***nx_interface_ip_mtu_size** _ in the _ *NX_INTERFACE** structure.</span></span>

<span data-ttu-id="74e1d-135">また、デバイス ドライバーは、***nx_ip_interface_address_mapping_needed***</span><span class="sxs-lookup"><span data-stu-id="74e1d-135">The device driver also needs to set up the value in ***nx_ip_interface_address_mapping_needed*** in</span></span>

<span data-ttu-id="74e1d-136">(**NX_INTERFACE** 内) の値を設定して、インターフェイス アドレスのマッピングが必要かどうかを NetX に通知する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-136">**NX_INTERFACE** to inform NetX whether or not interface address mapping is required.</span></span> <span data-ttu-id="74e1d-137">アドレス マッピングが必要な場合、ドライバーは、有効な MAC アドレスを使用してインターフェイスを構成し、NetX に MAC アドレスを提供します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-137">If address mapping is needed, the driver is responsible for configuring the interface with valid MAC address, and supply the MAC address to NetX.</span></span>

<span data-ttu-id="74e1d-138">ネットワーク ドライバーは、NetX から NX_LINK INITIALIZE 要求を受信するときに、上に示した NX_IP_DRIVER 要求制御ブロックの一部として IP 制御ブロックへのポインターを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-138">When the network driver receives the NX_LINK INITIALIZE request from NetX, it receives a pointer to the IP control block as part of the NX_IP_DRIVER request control block shown above.</span></span>

<span data-ttu-id="74e1d-139">アプリケーションが ***nx_ip_create*** を呼び出した後、IP ヘルパー スレッドは、NX_LINK_INITIALIZE に設定されたコマンドを使用して、ドライバー要求をドライバーに送信し、その物理ネットワーク インターフェイスを初期化します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-139">After the application calls ***nx_ip_create***, the IP helper thread sends a driver request with the command set to NX_LINK_INITIALIZE to the driver to initialize its physical network interface.</span></span> <span data-ttu-id="74e1d-140">次の NX_IP_DRIVER メンバーは、初期化要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-140">The following NX_IP_DRIVER members are used for the initialize request.</span></span>

| <span data-ttu-id="74e1d-141">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-141">NX_IP_DRIVER member</span></span>    | <span data-ttu-id="74e1d-142">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-142">Meaning</span></span> |
|------------------------|-----------------------------------------------|
| <span data-ttu-id="74e1d-143">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-143">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-144">NX_LINK_INITIALIZE</span><span class="sxs-lookup"><span data-stu-id="74e1d-144">NX_LINK_INITIALIZE</span></span> |
| <span data-ttu-id="74e1d-145">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-145">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-146">IP インスタンスへのポインター。</span><span class="sxs-lookup"><span data-stu-id="74e1d-146">Pointer to the IP instance.</span></span> <span data-ttu-id="74e1d-147">この値は、ドライバー関数が操作対象の IP インスタンスを検出できるように、ドライバーが保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-147">This value should be saved by the driver so that the driver function can find the IP instance to operate on.</span></span> |
| <span data-ttu-id="74e1d-148">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-148">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-149">IP インスタンス内のネットワーク インターフェイス構造へのポインター。</span><span class="sxs-lookup"><span data-stu-id="74e1d-149">Pointer to the network interface structure within the IP instance.</span></span> <span data-ttu-id="74e1d-150">この情報は、ドライバーが保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-150">This information should be saved by the driver.</span></span> <span data-ttu-id="74e1d-151">パケットを受信するとき、ドライバーは、スタックへのパケット送信時のインターフェイス構造情報を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-151">On receiving packets, the driver shall use the interface structure information when sending the packet up the stack.</span></span> |
| <span data-ttu-id="74e1d-152">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-152">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-153">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-153">Completion status.</span></span> <span data-ttu-id="74e1d-154">IP インスタンスの指定されたインターフェイスをドライバーが初期化できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-154">If the driver is not able to initialize the specified interface to the IP instance, it will return a nonzero error status.</span></span>                                                                                           |


> [!IMPORTANT]
> <span data-ttu-id="74e1d-155">*ドライバー コマンドのほとんどが、IP インスタンス用に作成された IP ヘルパー スレッドから呼び出されます。そのため、ドライバー ルーチンは、ブロック操作が実行されないようにする必要があります。これを行わないと、IP ヘルパー スレッドが停止し、IP スレッドに依存するアプリケーションに無制限の遅延が生じる可能性があります。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-155">*Most of the driver commands are called from the IP helper thread that was created for the IP instance. Therefore the driver routine should avoid performing blocking operations, or the IP helper thread could stall, causing unbounded delays to applications that rely on the IP thread.*</span></span>

### <a name="enable-link"></a><span data-ttu-id="74e1d-156">リンクを有効にする</span><span class="sxs-lookup"><span data-stu-id="74e1d-156">Enable Link</span></span>  

<span data-ttu-id="74e1d-157">次に、IP ヘルパー スレッドは、ドライバー要求内でドライバー コマンドを NX_LINK_ENABLE に設定し、その要求をネットワーク ドライバーに要求を送信することで、物理ネットワークを有効にします。</span><span class="sxs-lookup"><span data-stu-id="74e1d-157">Next, the IP helper thread enables the physical network by setting the driver command to NX_LINK_ENABLE in the driver request and sending the request to the network driver.</span></span> <span data-ttu-id="74e1d-158">これは、IP ヘルパー スレッドが初期化要求を完了した直後に行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-158">This happens shortly after the IP helper thread completes the initialization request.</span></span> <span data-ttu-id="74e1d-159">リンクを有効にする処理は、インターフェイス インスタンス内の nx_interface_link_up フィールドを設定するのと同じくらい簡単ですが、</span><span class="sxs-lookup"><span data-stu-id="74e1d-159">Enabling the link may be as simple as setting the nx_interface_link_up field in the interface instance.</span></span> <span data-ttu-id="74e1d-160">物理ハードウェアの操作が必要になる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-160">But it may also involve manipulation of the physical hardware.</span></span> <span data-ttu-id="74e1d-161">次の NX_IP_DRIVER メンバーは、リンクの有効化要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-161">The following NX_IP_DRIVER members are used for the enable link request.</span></span>

| <span data-ttu-id="74e1d-162">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-162">NX_IP_DRIVER member</span></span>    | <span data-ttu-id="74e1d-163">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-163">Meaning</span></span> |
|------------------------|------------------------------------------|
| <span data-ttu-id="74e1d-164">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-164">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-165">NX_LINK_ENABLE</span><span class="sxs-lookup"><span data-stu-id="74e1d-165">NX_LINK_ENABLE</span></span>                                                                                                          |
| <span data-ttu-id="74e1d-166">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-166">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-167">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-167">Pointer to IP instance</span></span>                                                                                                  |
| <span data-ttu-id="74e1d-168">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-168">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-169">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-169">Pointer to the interface instance</span></span>                                                                                       |
| <span data-ttu-id="74e1d-170">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-170">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-171">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-171">Completion status.</span></span> <span data-ttu-id="74e1d-172">指定されたインターフェイスをドライバーが有効にできない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-172">If the driver is not able to enable the specified interface, it will return a non-zero error status.</span></span> |



### <a name="disable-link"></a><span data-ttu-id="74e1d-173">リンクを無効にする</span><span class="sxs-lookup"><span data-stu-id="74e1d-173">Disable Link</span></span>  

<span data-ttu-id="74e1d-174">この要求は、\***nx_ip_delete** _ サービスによる IP インスタンスの削除中、NetX によって行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-174">This request is made by NetX during the deletion of an IP instance by the \***nx_ip_delete** _ service.</span></span> <span data-ttu-id="74e1d-175">または、アプリケーションが、電源を節約するためにリンクを一時的に無効にする目的で、このコマンドを実行する場合があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-175">Or an application may issue this command in order to temporarily disable the link in order to save power.</span></span> <span data-ttu-id="74e1d-176">このサービスは、IP インスタンス上の物理ネットワーク インターフェイスを無効にします。</span><span class="sxs-lookup"><span data-stu-id="74e1d-176">This service disables the physical network interface on the IP instance.</span></span> <span data-ttu-id="74e1d-177">リンクを無効にする処理は、インターフェイス インスタンス内の "_nx_interface_link_up*" フラグをオフにするのと同じくらい簡単ですが、物理ハードウェアの操作が必要になる場合もあります。通常、これは "\*\*\*リンクを有効にする*\*_" 操作と逆の操作になります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-177">The processing to disable the link may be as simple as clearing the _nx_interface_link_up\* flag in the interface instance. But it may also involve manipulation of the physical hardware. Typically it is a reverse operation of the \***Enable Link**_ operation.</span></span> <span data-ttu-id="74e1d-178">リンクが無効になった後、アプリケーションは "_ \*_リンクを有効にする_\*\*" 操作を要求して、インターフェイスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="74e1d-178">After the link is disabled, the application request _ *_Enable Link_*\* operation to enable the interface.</span></span> <span data-ttu-id="74e1d-179">次の NX_IP_DRIVER メンバーは、リンクの無効化要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-179">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="74e1d-180">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-180">NX_IP_DRIVER member</span></span>    | <span data-ttu-id="74e1d-181">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-181">Meaning</span></span> |
|------------------------|--------------------------------------|
| <span data-ttu-id="74e1d-182">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-182">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-183">NX_LINK_DISABLE</span><span class="sxs-lookup"><span data-stu-id="74e1d-183">NX_LINK_DISABLE</span></span> |
| <span data-ttu-id="74e1d-184">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-184">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-185">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-185">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-186">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-186">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-187">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-187">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-188">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-188">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-189">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-189">Completion status.</span></span> <span data-ttu-id="74e1d-190">IP インスタンス内の指定されたインターフェイスをドライバーが無効にできない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-190">If the driver is not able to disable the specified interface in the IP instance, it will return a non-zero error status.</span></span> |


### <a name="uninitialize-link"></a><span data-ttu-id="74e1d-191">リンクを初期化前の状態に戻す</span><span class="sxs-lookup"><span data-stu-id="74e1d-191">Uninitialize Link</span></span>  

<span data-ttu-id="74e1d-192">この要求は、***nx_ip_delete*** サービスによる IP インスタンスの削除中、NetX によって行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-192">This request is made by NetX during the deletion of an IP instance by the ***nx_ip_delete*** service.</span></span> <span data-ttu-id="74e1d-193">この要求によってインターフェイスが初期化前の状態に戻り、初期化フェーズ中に作成されたすべてのリソースが解放されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-193">This request uninitialize the interface, and release any resources created during initialization phase.</span></span> <span data-ttu-id="74e1d-194">通常、これは "***リンクを初期化する***" 操作と逆の操作になります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-194">Typically it is a reverse operation of the ***Initialize Link*** operation.</span></span> <span data-ttu-id="74e1d-195">インターフェイスが初期化前の状態に戻されたら、デバイスは、インターフェイスが再度初期化されるまで使用できません。</span><span class="sxs-lookup"><span data-stu-id="74e1d-195">After the interface is uninitalized, the device cannot be used until the interface is initialized again.</span></span>

<span data-ttu-id="74e1d-196">次の NX_IP_DRIVER メンバーは、リンクの無効化要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-196">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="74e1d-197">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-197">NX_IP_DRIVER member</span></span>  | <span data-ttu-id="74e1d-198">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-198">Meaning</span></span>                |
|----------------------|------------------------|
| <span data-ttu-id="74e1d-199">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-199">nx_ip_driver_command</span></span> | <span data-ttu-id="74e1d-200">NX_LINK_UNINITIALZE</span><span class="sxs-lookup"><span data-stu-id="74e1d-200">NX_LINK_UNINITIALZE</span></span>    |
| <span data-ttu-id="74e1d-201">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-201">nx_ip_driver_ptr</span></span>     | <span data-ttu-id="74e1d-202">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-202">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-203">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-203">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-204">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-204">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-205">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-205">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-206">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-206">Completion status.</span></span> <span data-ttu-id="74e1d-207">IP インスタンスの指定されたインターフェイスをドライバーが初期前の状態に戻せない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-207">If the driver is not able to uninitialize the specified interface to the IP instance, it will return a non-zero error status.</span></span> |


### <a name="packet-send"></a><span data-ttu-id="74e1d-208">パケット送信</span><span class="sxs-lookup"><span data-stu-id="74e1d-208">Packet Send</span></span>  

<span data-ttu-id="74e1d-209">この要求は、内部 IP の送信処理中、つまり、すべての NetX プロトコルが (ARP、RARP を除く) パケットの送信に使用する処理を実行しているときに行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-209">This request is made during internal IP send processing, processing, which all NetX protocols use to transmit packets (except for ARP, RARP).</span></span> <span data-ttu-id="74e1d-210">パケット送信コマンドを受信するとき、*nx_packet_prepend_ptr* は、送信されるパケットの先頭 (IP ヘッダーの先頭) を指定します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-210">On receiving the packet send command, the *nx_packet_prepend_ptr* points to the beginning of the packet to be sent, which is the beginning of the IP header.</span></span>
<span data-ttu-id="74e1d-211">*nx_packet_length* は、転送されるデータの合計サイズ (バイト単位) を示します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-211">*nx_packet_length* indicates the total size (in bytes) of the data being transmitted.</span></span> <span data-ttu-id="74e1d-212">*Nx_packet_next* が有効な場合、発信 IP データグラムは複数のパケットに格納されるため、ドライバーは、チェーンされたパケットに従ってフレーム全体を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-212">If *nx_packet_next* is valid, the outgoing IP datagram is stored in multiple packets, the driver is required to follow the chained packet and transmit the entire frame.</span></span> <span data-ttu-id="74e1d-213">各チェーン パケットの有効なデータ領域は、*nx_packet_prepend_ptr* と *nx_packet_append_ptr* の間に格納されていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="74e1d-213">Note that valid data area in each chained packet is stored between *nx_packet_prepend_ptr* and *nx_packet_append_ptr*.</span></span>

<span data-ttu-id="74e1d-214">ドライバーは、物理ヘッダーを構築する役割を担います。</span><span class="sxs-lookup"><span data-stu-id="74e1d-214">The driver is responsible for constructing physical header.</span></span> <span data-ttu-id="74e1d-215">IP アドレスへの物理アドレスのマッピングが必要な場合 (イーサネットなど)、IP レイヤーによって、既に MAC アドレスは解決されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-215">If physical address to IP address mapping is required (such as Ethernet), the IP layer already resolved the MAC address.</span></span> <span data-ttu-id="74e1d-216">送信先 MAC アドレスは、*nx_ip_driver_physical_address_msw と nx_ip_driver_physical_address_lsw* 内に格納されている IP インスタンスから渡されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-216">The destination MAC address is passed from the IP instance, stored in *nx_ip_driver_physical_address_msw and nx_ip_driver_physical_address_lsw.*</span></span>

<span data-ttu-id="74e1d-217">物理ヘッダーを追加すると、パケット送信処理によってドライバーの出力関数が呼び出され、パケットが送信されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-217">After adding the physical header, the packet send processing then calls the driver's output function to transmit the packet.</span></span>

<span data-ttu-id="74e1d-218">次の NX_IP_DRIVER メンバーは、パケット送信要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-218">The following NX_IP_DRIVER members are used for the packet send request.</span></span>

| <span data-ttu-id="74e1d-219">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-219">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-220">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-220">Meaning</span></span> |
|-----------------------------------|---------------------------------------------------------------|
| <span data-ttu-id="74e1d-221">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-221">nx_ip_driver_command</span></span>              | <span data-ttu-id="74e1d-222">NX_LINK_PACKET_SEND</span><span class="sxs-lookup"><span data-stu-id="74e1d-222">NX_LINK_PACKET_SEND</span></span> |
| <span data-ttu-id="74e1d-223">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-223">nx_ip_driver_ptr</span></span>                  | <span data-ttu-id="74e1d-224">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-224">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-225">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="74e1d-225">nx_ip_driver_packet</span></span>               | <span data-ttu-id="74e1d-226">送信するパケットへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-226">Pointer to the packet to send</span></span> |
| <span data-ttu-id="74e1d-227">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-227">nx_ip_driver_interface</span></span>            | <span data-ttu-id="74e1d-228">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-228">Pointer to the interface instance.</span></span>             |
| <span data-ttu-id="74e1d-229">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-229">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-230">最上位 32 ビットの物理アドレス (物理マッピングが必要な場合のみ)</span><span class="sxs-lookup"><span data-stu-id="74e1d-230">Most significant 32-bits of physical address (only if physical mapping needed)</span></span> |
| <span data-ttu-id="74e1d-231">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-231">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-232">最下位 32 ビットの物理アドレス (物理マッピングが必要な場合のみ)</span><span class="sxs-lookup"><span data-stu-id="74e1d-232">Least significant 32-bits of physical address (only if physical mapping needed)</span></span>    |
| <span data-ttu-id="74e1d-233">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-233">nx_ip_driver_status</span></span>               | <span data-ttu-id="74e1d-234">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-234">Completion status.</span></span> <span data-ttu-id="74e1d-235">ドライバーがパケットを送信できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-235">If the driver is not able to send the packet, it will return a non-zero error status.</span></span>  |

### <a name="packet-broadcast"></a><span data-ttu-id="74e1d-236">パケット ブロードキャスト</span><span class="sxs-lookup"><span data-stu-id="74e1d-236">Packet Broadcast</span></span>  
<span data-ttu-id="74e1d-237">この要求は、送信パケット要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-237">This request is almost identical to the send packet request.</span></span> <span data-ttu-id="74e1d-238">唯一の違いは、ブロードキャスト先の物理アドレス フィールドがイーサネットのブロードキャスト MAC アドレスに設定されていることです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-238">The only difference is that the destination physical address fields are set to the Ethernet broadcast MAC address.</span></span> <span data-ttu-id="74e1d-239">次の NX_IP_DRIVER メンバーは、パケット ブロードキャスト要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-239">The following NX_IP_DRIVER members are used for the packet broadcast request.</span></span>

| <span data-ttu-id="74e1d-240">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-240">NX_IP_DRIVER member</span></span>                | <span data-ttu-id="74e1d-241">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-241">Meaning</span></span>          |
|------------------------------------|--------------------------------------------------------------|
| <span data-ttu-id="74e1d-242">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-242">nx_ip_driver_command</span></span>               | <span data-ttu-id="74e1d-243">NX_LINK_PACKET_BROADCAST</span><span class="sxs-lookup"><span data-stu-id="74e1d-243">NX_LINK_PACKET_BROADCAST</span></span> |
| <span data-ttu-id="74e1d-244">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-244">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="74e1d-245">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-245">Pointer to IP instance</span></span>  |
| <span data-ttu-id="74e1d-246">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="74e1d-246">nx_ip_driver_packet</span></span>                | <span data-ttu-id="74e1d-247">終了するパケットへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-247">Pointer to the packet to end</span></span> |
| <span data-ttu-id="74e1d-248">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="74e1d-248">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="74e1d-249">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-249">0x0000FFFF broadcast)</span></span> |
| <span data-ttu-id="74e1d-250">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-250">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="74e1d-251">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-251">0xFFFFFFFF  broadcast)</span></span> |
| <span data-ttu-id="74e1d-252">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-252">nx_ip_driver_interface</span></span>             | <span data-ttu-id="74e1d-253">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-253">Pointer to the interface instance.</span></span> |
| <span data-ttu-id="74e1d-254">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-254">nx_ip_driver_status</span></span>                | <span data-ttu-id="74e1d-255">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-255">Completion status.</span></span> <span data-ttu-id="74e1d-256">ドライバーがパケットを送信できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-256">If the driver is not able to send the packet, it will return a non-zero error status.</span></span> |

### <a name="arp-send"></a><span data-ttu-id="74e1d-257">ARP 送信</span><span class="sxs-lookup"><span data-stu-id="74e1d-257">ARP Send</span></span>  

<span data-ttu-id="74e1d-258">この要求も、IP パケット送信要求に似ています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-258">This request is also similar to the IP packet send request.</span></span>
<span data-ttu-id="74e1d-259">唯一の違いは、イーサネット ヘッダーによって指定されるのが IP パケットではなく ARP パケットであること、そして送信先の物理アドレス フィールドが MAC ブロードキャスト アドレスに設定されていることです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-259">The only difference is that the Ethernet header specifies an ARP packet instead of an IP packet, and destination physical address fields are set to MAC broadcast address.</span></span> <span data-ttu-id="74e1d-260">次の NX_IP_DRIVER メンバーは、ARP 送信要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-260">The following NX_IP_DRIVER members are used for the ARP send request.</span></span>

| <span data-ttu-id="74e1d-261">**NX_IP_DRIVER member**</span><span class="sxs-lookup"><span data-stu-id="74e1d-261">**NX_IP_DRIVER member**</span></span> | <span data-ttu-id="74e1d-262">**意味**</span><span class="sxs-lookup"><span data-stu-id="74e1d-262">**Meaning**</span></span> |
| --- | --- |
| <span data-ttu-id="74e1d-263">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-263">nx_ip_driver_command</span></span> | <span data-ttu-id="74e1d-264">NX_LINK_ARP_SEND</span><span class="sxs-lookup"><span data-stu-id="74e1d-264">NX_LINK_ARP_SEND</span></span> |
| <span data-ttu-id="74e1d-265">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-265">nx_ip_driver_ptr</span></span> | <span data-ttu-id="74e1d-266">IP インスタンスへのポインター。</span><span class="sxs-lookup"><span data-stu-id="74e1d-266">Pointer to IP instance.</span></span> |
| <span data-ttu-id="74e1d-267">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="74e1d-267">nx_ip_driver_packet</span></span> | <span data-ttu-id="74e1d-268">送信するパケットへのポインター。</span><span class="sxs-lookup"><span data-stu-id="74e1d-268">Pointer to the packet to send.</span></span> |
| <span data-ttu-id="74e1d-269">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-269">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-270">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-270">0x0000FFFF (broadcast)</span></span> |
| <span data-ttu-id="74e1d-271">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-271">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-272">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-272">0xFFFFFFFF (broadcast)</span></span> |
| <span data-ttu-id="74e1d-273">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-273">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-274">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-274">Pointer to the interface instance.</span></span> |
| <span data-ttu-id="74e1d-275">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-275">nx_ip_driver_status</span></span> | <span data-ttu-id="74e1d-276">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-276">Completion status.</span></span> <span data-ttu-id="74e1d-277">ドライバーが ARP パケットを送信できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-277">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

<span data-ttu-id="74e1d-278">*物理マッピングが不要な場合、この要求の実装は必要ありません。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-278">*If physical mapping is not needed, implementation of this request is not required.*</span></span>

### <a name="arp-response-send"></a><span data-ttu-id="74e1d-279">ARP 応答送信</span><span class="sxs-lookup"><span data-stu-id="74e1d-279">ARP Response Send</span></span>  

<span data-ttu-id="74e1d-280">この要求は、ARP 送信パケット要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-280">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="74e1d-281">唯一の違いは、送信先の物理アドレス フィールドが IP インスタンスから渡されることです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-281">The only difference is the destination physical address fields are passed from the IP instance.</span></span> <span data-ttu-id="74e1d-282">次の NX_IP_DRIVER メンバーは、ARP 応答送信要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-282">The following NX_IP_DRIVER members are used for the ARP response send request.</span></span>

| <span data-ttu-id="74e1d-283">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-283">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-284">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-284">Meaning</span></span> |
|-----------------------------------| ------------------------------------|
| <span data-ttu-id="74e1d-285">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-285">nx_ip_driver_command</span></span>              | <span data-ttu-id="74e1d-286">NX_LINK_ARP_RESPONSE_SEND</span><span class="sxs-lookup"><span data-stu-id="74e1d-286">NX_LINK_ARP_RESPONSE_SEND</span></span> |
| <span data-ttu-id="74e1d-287">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-287">nx_ip_driver_ptr</span></span>                  | <span data-ttu-id="74e1d-288">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-288">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-289">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="74e1d-289">nx_ip_driver_packet</span></span>               | <span data-ttu-id="74e1d-290">送信するパケットへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-290">Pointer to the packet to send</span></span>|
| <span data-ttu-id="74e1d-291">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-291">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-292">最上位 32 ビットの物理アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-292">Most significant 32-bits of physical address</span></span> |
| <span data-ttu-id="74e1d-293">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-293">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-294">最下位 32 ビットの物理アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-294">Least significant 32-bits of physical address</span></span>                     |
| <span data-ttu-id="74e1d-295">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-295">nx_ip_driver_interface</span></span>            | <span data-ttu-id="74e1d-296">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-296">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-297">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-297">nx_ip_driver_status</span></span>               | <span data-ttu-id="74e1d-298">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-298">Completion status.</span></span> <span data-ttu-id="74e1d-299">ドライバーが ARP パケットを送信できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-299">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

> [!NOTE]
> <span data-ttu-id="74e1d-300">*物理マッピングが不要な場合、この要求の実装は必要ありません。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-300">*If physical mapping is not needed, implementation of this request is not required.*</span></span>

### <a name="rarp-send"></a><span data-ttu-id="74e1d-301">RARP 送信</span><span class="sxs-lookup"><span data-stu-id="74e1d-301">RARP Send</span></span>  

<span data-ttu-id="74e1d-302">この要求は、ARP 送信パケット要求とほぼ同じです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-302">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="74e1d-303">唯一の違いは、パケット ヘッダーの種類と、物理アドレス フィールドが不要であることです。これは、物理的な送信先が常にブロードキャスト アドレスであるためです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-303">The only differences are the type of packet header and the physical address fields are not required because the physical destination is always a broadcast address.</span></span>

<span data-ttu-id="74e1d-304">次の NX_IP_DRIVER メンバーは、RARP 送信要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-304">The following NX_IP_DRIVER members are used for the RARP send request.</span></span>

| <span data-ttu-id="74e1d-305">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-305">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-306">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-306">Meaning</span></span> |
|-----------------------------------|---------------------------------|
| <span data-ttu-id="74e1d-307">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-307">nx_ip_driver_command</span></span>              |<span data-ttu-id="74e1d-308">NX_LINK_RARP_SEND</span><span class="sxs-lookup"><span data-stu-id="74e1d-308">NX_LINK_RARP_SEND</span></span> |
| <span data-ttu-id="74e1d-309">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-309">nx_ip_driver_ptr</span></span>                  | <span data-ttu-id="74e1d-310">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-310">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-311">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="74e1d-311">nx_ip_driver_packet</span></span>               | <span data-ttu-id="74e1d-312">送信するパケットへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-312">Pointer to the packet to send</span></span> |
| <span data-ttu-id="74e1d-313">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-313">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-314">0x0000FFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-314">0x0000FFFF (broadcast)</span></span> |
| <span data-ttu-id="74e1d-315">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-315">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-316">0xFFFFFFFF (ブロードキャスト)</span><span class="sxs-lookup"><span data-stu-id="74e1d-316">0xFFFFFFFF (broadcast)</span></span> |
| <span data-ttu-id="74e1d-317">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-317">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-318">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-318">Meaning</span></span> |
| <span data-ttu-id="74e1d-319">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-319">nx_ip_driver_interface</span></span>            | <span data-ttu-id="74e1d-320">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-320">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-321">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-321">nx_ip_driver_status</span></span>               | <span data-ttu-id="74e1d-322">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-322">Completion status.</span></span> <span data-ttu-id="74e1d-323">ドライバーが RARP パケットを送信できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-323">If the driver is not able to send the RARP packet, it will return a non-zero error status.</span></span>  |

> [!NOTE]
> <span data-ttu-id="74e1d-324">*RARP サービスを必要とするアプリケーションは、このコマンドを実装する必要があります。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-324">*Applications that require RARP service must implement this command.*</span></span>

### <a name="multicast-group-join"></a><span data-ttu-id="74e1d-325">マルチキャスト グループ参加</span><span class="sxs-lookup"><span data-stu-id="74e1d-325">Multicast Group Join</span></span>  

<span data-ttu-id="74e1d-326">この要求は、***nx_igmp_multicast_interface join*** サービスを使用して行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-326">This request is made with the ***nx_igmp_multicast_interface join*** service.</span></span> <span data-ttu-id="74e1d-327">ネットワーク ドライバーは、指定されたマルチキャスト グループアドレスを受け取り、そのマルチキャスト グループ アドレスからの受信パケットを受け入れるように物理メディアを設定します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-327">The network driver takes the supplied multicast group address and sets up the physical media to accept incoming packets from that multicast group address.</span></span> <span data-ttu-id="74e1d-328">ドライバーがマルチキャスト フィルターをサポートしていない場合は、ドライバー受信ロジックを、無作為検出モードにしなければならない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-328">Note that for drivers that don't support multicast filter, the driver receive logic may have to be in promiscuous mode.</span></span> <span data-ttu-id="74e1d-329">この場合、ドライバーが、送信先 MAC アドレスに基づいて、受信フレームをフィルター処理する必要が出てくることがあるため、IP インスタンスに渡されるトラフィック量が減少します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-329">In this case, the driver may need to filter incoming frames based on destination MAC address, thus reducing the amount of traffic passed into the IP instance.</span></span> <span data-ttu-id="74e1d-330">次の NX_IP_DRIVER メンバーは、マルチキャスト グループ参加要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-330">The following NX_IP_DRIVER members are used for the multicast group join request.</span></span>

| <span data-ttu-id="74e1d-331">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-331">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-332">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-332">Meaning</span></span> |
|-----------------------------------|-----------------------------------------------------------------------|
| <span data-ttu-id="74e1d-333">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-333">nx_ip_driver_command</span></span>              | <span data-ttu-id="74e1d-334">NX_LINK_MULTICAST_JOIN</span><span class="sxs-lookup"><span data-stu-id="74e1d-334">NX_LINK_MULTICAST_JOIN</span></span>                                                |
| <span data-ttu-id="74e1d-335">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-335">nx_ip_driver_ptr</span></span>                  | <span data-ttu-id="74e1d-336">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-336">Pointer to IP instance</span></span>                                                |
| <span data-ttu-id="74e1d-337">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-337">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-338">最上位 32 ビットの物理マルチキャスト アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-338">Most significant 32-bits of physical multicast address</span></span>                |
| <span data-ttu-id="74e1d-339">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-339">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-340">最下位 32 ビットの物理マルチキャスト アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-340">Least significant 32-bits of physical multicast address</span></span>               |
| <span data-ttu-id="74e1d-341">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-341">nx_ip_driver_interface</span></span>            | <span data-ttu-id="74e1d-342">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-342">Pointer to the interface instance</span></span>                                     |
| <span data-ttu-id="74e1d-343">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-343">nx_ip_driver_status</span></span>               | <span data-ttu-id="74e1d-344">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-344">Completion status.</span></span> <span data-ttu-id="74e1d-345">ドライバーがマルチキャスト グループに参加できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-345">If the driver is not able to join the multicast group, it will return a non-zero error status.</span></span> |


### <a name="multicast-group-leave"></a><span data-ttu-id="74e1d-346">マルチキャスト グループ脱退</span><span class="sxs-lookup"><span data-stu-id="74e1d-346">Multicast Group Leave</span></span>  

<span data-ttu-id="74e1d-347">この要求は、***nx_igmp_multicast_leave*** サービスを明示的に呼び出すことによって呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-347">This request is invoked by explicitly calling the ***nx_igmp_multicast_leave*** service.</span></span> <span data-ttu-id="74e1d-348">ドライバーは、指定されたイーサネット マルチキャスト アドレスをマルチキャスト リストから削除します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-348">The driver removes the supplied Ethernet multicast address from the multicast list.</span></span> <span data-ttu-id="74e1d-349">ホストがマルチキャスト グループを脱退した後、この IP インスタンスは、このイーサネット マルチキャスト アドレスのネットワーク上のパケットを受信しなくなります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-349">After a host has left a multicast group, packets on the network with this Ethernet multicast address are no longer received by this IP instance.</span></span> <span data-ttu-id="74e1d-350">次の NX_IP_DRIVER メンバーは、マルチキャスト グループ脱退要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-350">The following NX_IP_DRIVER members are used for the multicast group leave request.</span></span>

| <span data-ttu-id="74e1d-351">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-351">NX_IP_DRIVER member</span></span>               | <span data-ttu-id="74e1d-352">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-352">Meaning</span></span> |
|-----------------------------------|-----------------------------------------------------------------|
| <span data-ttu-id="74e1d-353">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-353">nx_ip_driver_command</span></span>              | <span data-ttu-id="74e1d-354">NX_LINK_MULTICAST_LEAVE</span><span class="sxs-lookup"><span data-stu-id="74e1d-354">NX_LINK_MULTICAST_LEAVE</span></span> |
| <span data-ttu-id="74e1d-355">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-355">nx_ip_driver_ptr</span></span>                  | <span data-ttu-id="74e1d-356">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-356">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-357">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="74e1d-357">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="74e1d-358">最上位 32 ビットの物理マルチキャスト アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-358">Most significant 32 bits of physical multicast ddress</span></span> |
| <span data-ttu-id="74e1d-359">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="74e1d-359">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="74e1d-360">最下位 32 ビットの物理マルチキャスト アドレス</span><span class="sxs-lookup"><span data-stu-id="74e1d-360">Least significant 32 bits of physical multicast address</span></span> |
| <span data-ttu-id="74e1d-361">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-361">nx_ip_driver_interface</span></span>            | <span data-ttu-id="74e1d-362">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-362">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-363">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-363">nx_ip_driver_status</span></span>               | <span data-ttu-id="74e1d-364">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-364">Completion status.</span></span> <span data-ttu-id="74e1d-365">ドライバーがマルチキャスト グループを脱退できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-365">If the driver is not able to leave the multicast group, it will return a non-zero error status.</span></span> |


### <a name="attach-interface"></a><span data-ttu-id="74e1d-366">インターフェイスをアタッチする</span><span class="sxs-lookup"><span data-stu-id="74e1d-366">Attach Interface</span></span>  

<span data-ttu-id="74e1d-367">この要求は、NetX からデバイス ドライバーに対して呼び出されます。これにより、ドライバーは、ドライバー インスタンスを、対応する IP インスタンス、および IP 内の物理インターフェイス インスタンスに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-367">This request is invoked from the NetX to the device driver, allowing the driver to associate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="74e1d-368">次の NX_IP_DRIVER メンバーは、インターフェイスのアタッチ要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-368">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="74e1d-369">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-369">NX_IP_DRIVER member</span></span>    | <span data-ttu-id="74e1d-370">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-370">Meaning</span></span> |
|------------------------|-------------------------------------------------|
| <span data-ttu-id="74e1d-371">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-371">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-372">X_LINK_INTERFACE_ATTACH</span><span class="sxs-lookup"><span data-stu-id="74e1d-372">X_LINK_INTERFACE_ATTACH</span></span> |
| <span data-ttu-id="74e1d-373">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-373">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-374">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-374">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-375">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-375">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-376">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-376">Pointer to the interface instance.</span></span> |
| <span data-ttu-id="74e1d-377">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-377">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-378">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-378">Completion status.</span></span> <span data-ttu-id="74e1d-379">IP インスタンスの指定されたインターフェイスをドライバーがデタッチできない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-379">If the driver is not able to detach the specified interface to the IP instance, it will return a non-zero error status.</span></span>  |


### <a name="detach-interface"></a><span data-ttu-id="74e1d-380">インターフェイスをデタッチする</span><span class="sxs-lookup"><span data-stu-id="74e1d-380">Detach Interface</span></span>  

<span data-ttu-id="74e1d-381">この要求は、NetX によってデバイス ドライバーに対して呼び出されます。これにより、ドライバーは、ドライバー インスタンと、対応する IP インスタンス、および IP 内の物理インターフェイス インスタンスとの関連付けを解除することができます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-381">This request is invoked by NetX to the device driver, allowing the driver to disassociate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="74e1d-382">次の NX_IP_DRIVER メンバーは、インターフェイスのアタッチ要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-382">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="74e1d-383">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-383">NX_IP_DRIVER member</span></span>    | <span data-ttu-id="74e1d-384">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-384">Meaning</span></span> |
|------------------------|---------------------------------------------------------|
| <span data-ttu-id="74e1d-385">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-385">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-386">NX_LINK_INTERFACE_DETACH</span><span class="sxs-lookup"><span data-stu-id="74e1d-386">NX_LINK_INTERFACE_DETACH</span></span> |
| <span data-ttu-id="74e1d-387">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-387">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-388">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-388">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-389">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-389">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-390">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-390">Pointer to the interface instance.</span></span> |
| <span data-ttu-id="74e1d-391">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-391">nx_ip_driver_status</span></span>    | <span data-ttu-id="74e1d-392">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-392">Completion status.</span></span> <span data-ttu-id="74e1d-393">IP インスタンスの指定されたインターフェイスをドライバーがアタッチできない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-393">If the driver is not able to attach the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="get-link-status"></a><span data-ttu-id="74e1d-394">リンクの状態を取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-394">Get Link Status</span></span>  

<span data-ttu-id="74e1d-395">アプリケーションは、ホスト上の任意のインターフェイスに対して NetX サービス ***nx_ip_interface_status_check*** サービスを使用して、ネットワーク インターフェイス リンクの状態のクエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-395">The application can query the network interface link status using the NetX service  ***nx_ip_interface_status_check*** service for any interface on the host.</span></span> <span data-ttu-id="74e1d-396">これらのサービスの詳細については、107 ページの第 4 章「NetX サービスの説明」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="74e1d-396">See Chapter 4, "Description of NetX Services" on page 107, for more details on these services.</span></span>

<span data-ttu-id="74e1d-397">リンクの状態は *nx_ip_driver_interface* ポインターが指す NX_INTERFACE 構造体内の *nx_interface_link_up* フィールド内に含まれています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-397">The link status is contained in the *nx_interface_link_up* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* pointer.</span></span> <span data-ttu-id="74e1d-398">次の NX_IP_DRIVER メンバーは、リンク状態要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-398">The following NX_IP_DRIVER members are used for the link status request.</span></span>

| <span data-ttu-id="74e1d-399">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-399">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-400">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-400">Meaning</span></span>                                                                                                      |
|-------------------------|--------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-401">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-401">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-402">NX_LINK_GET_STATUS</span><span class="sxs-lookup"><span data-stu-id="74e1d-402">NX_LINK_GET_STATUS</span></span>                                                                                           |
| <span data-ttu-id="74e1d-403">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-403">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-404">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-404">Pointer to IP instance</span></span>                                                                                       |
| <span data-ttu-id="74e1d-405">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-405">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-406">状態の配置先へのポインター。</span><span class="sxs-lookup"><span data-stu-id="74e1d-406">Pointer to the destination to place the status.</span></span>                                                              |
| <span data-ttu-id="74e1d-407">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-407">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-408">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-408">Pointer to the interface instance</span></span>                                                                            |
| <span data-ttu-id="74e1d-409">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-409">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-410">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-410">Completion status.</span></span> <span data-ttu-id="74e1d-411">ドライバーが特定の状態を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-411">If the driver is not able to get specific status, it will return a non-zero error status.</span></span> |
|                         |                                                                                                              |

> [!NOTE]
> <span data-ttu-id="74e1d-412">***nx_ip_status_check** は、プライマリ インターフェイスの状態を確認するために引き続き使用できますが、アプリケーション開発者は、インターフェイス固有のサービス **nx_ip_interface_status_check** を使用することをお勧めします。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-412">***nx_ip_status_check** is still available for checking the status of the primary interface. However, application developers are encouraged to use the interface-specific service **nx_ip_interface_status_check.***</span></span>

### <a name="get-link-speed"></a><span data-ttu-id="74e1d-413">リンクの速度を取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-413">Get Link Speed</span></span>  

<span data-ttu-id="74e1d-414">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-414">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-415">リンクの回線速度は、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-415">The driver stores the link's line speed in the supplied destination.</span></span> <span data-ttu-id="74e1d-416">次の NX_IP_DRIVER メンバーは、リンク回線速度要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-416">The following NX_IP_DRIVER members are used for the link line speed request.</span></span>

| <span data-ttu-id="74e1d-417">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-417">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-418">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-418">Meaning</span></span> |
|-------------------------|---------------------------------------------------------------|
| <span data-ttu-id="74e1d-419">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-419">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-420">NX_LINK_GET_SPEED</span><span class="sxs-lookup"><span data-stu-id="74e1d-420">NX_LINK_GET_SPEED</span></span> |
| <span data-ttu-id="74e1d-421">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-421">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-422">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-422">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-423">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-423">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-424">回線速度の配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-424">Pointer to the destination to place the line speed</span></span> |
| <span data-ttu-id="74e1d-425">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-425">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-426">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-426">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-427">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-427">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-428">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-428">Completion status.</span></span> <span data-ttu-id="74e1d-429">ドライバーが速度情報を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-429">If the driver is not able to get speed information, it will return a non-zero error status.</span></span>
 |


> [!NOTE]
> <span data-ttu-id="74e1d-430">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-430">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="get-duplex-type"></a><span data-ttu-id="74e1d-431">二重タイプを取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-431">Get Duplex Type</span></span>  

<span data-ttu-id="74e1d-432">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-432">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-433">リンクの二重タイプは、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-433">The driver stores the link's duplex type in the supplied destination.</span></span> <span data-ttu-id="74e1d-434">次の NX_IP_DRIVER メンバーは、二重タイプ要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-434">The following NX_IP_DRIVER members are used for the duplex type request.</span></span>

| <span data-ttu-id="74e1d-435">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-435">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-436">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-436">Meaning</span></span> |
|-------------------------|-----------------------------------------------------|
| <span data-ttu-id="74e1d-437">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-437">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-438">NX_LINK_GET_DUPLEX_TYPE</span><span class="sxs-lookup"><span data-stu-id="74e1d-438">NX_LINK_GET_DUPLEX_TYPE</span></span> |
| <span data-ttu-id="74e1d-439">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-439">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-440">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-440">Pointer to IP instance</span></span> |
| <span data-ttu-id="74e1d-441">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-441">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-442">二重タイプの配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-442">Pointer to the destination to place the duplex type</span></span> |
| <span data-ttu-id="74e1d-443">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-443">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-444">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-444">Pointer to the interface instance</span></span> |
| <span data-ttu-id="74e1d-445">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-445">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-446">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-446">Completion status.</span></span> <span data-ttu-id="74e1d-447">ドライバーが二重情報を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-447">If the driver is not able to get duplex information, it will return a nonzero error status.</span></span>
 |


> [!NOTE]
> <span data-ttu-id="74e1d-448">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-448">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="get-error-count"></a><span data-ttu-id="74e1d-449">エラー数を取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-449">Get Error Count</span></span>  

<span data-ttu-id="74e1d-450">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-450">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-451">リンクのエラー数は、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-451">The driver stores the link's error count in the supplied destination.</span></span> <span data-ttu-id="74e1d-452">この機能をサポートするために、ドライバーは操作エラーを追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-452">To support this feature, the driver needs to track operation errors.</span></span> <span data-ttu-id="74e1d-453">次の NX_IP_DRIVER メンバーは、リンク エラー数要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-453">The following NX_IP_DRIVER members are used for the link error count request.</span></span>

| <span data-ttu-id="74e1d-454">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-454">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-455">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-455">Meaning</span></span>                                                                                                  |
|-------------------------|----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-456">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-456">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-457">NX_LINK_GET_ERROR_COUNT</span><span class="sxs-lookup"><span data-stu-id="74e1d-457">NX_LINK_GET_ERROR_COUNT</span></span>                                                                                  |
| <span data-ttu-id="74e1d-458">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-458">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-459">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-459">Pointer to IP instance</span></span>                                                                                   |
| <span data-ttu-id="74e1d-460">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-460">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-461">エラー数の配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-461">Pointer to the destination to place the error count</span></span>                                                      |
| <span data-ttu-id="74e1d-462">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-462">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-463">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-463">Pointer to the interface instance</span></span>                                                                        |
| <span data-ttu-id="74e1d-464">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-464">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-465">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-465">Completion status.</span></span> <span data-ttu-id="74e1d-466">ドライバーがエラー数を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-466">If the driver is not able to get error count, it will return a non-zero error status.</span></span> |


> [!NOTE]
> <span data-ttu-id="74e1d-467">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-467">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="get-receive-packet-count"></a><span data-ttu-id="74e1d-468">受信パケット数を取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-468">Get Receive Packet Count</span></span>  

<span data-ttu-id="74e1d-469">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-469">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-470">リンクの受信パケット数は、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-470">The driver stores the link's receive packet count in the supplied destination.</span></span> <span data-ttu-id="74e1d-471">この機能をサポートするために、ドライバーは受信パケット数を追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-471">To support this feature, the driver needs to keep track of the number of packets received.</span></span> <span data-ttu-id="74e1d-472">次の NX_IP_DRIVER メンバーは、リンクの受信パケット数要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-472">The following NX_IP_DRIVER members are used for the link receive packet count request.</span></span>

| <span data-ttu-id="74e1d-473">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-473">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-474">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-474">Meaning</span></span>                                                                                                    |
|-------------------------|------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-475">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-475">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-476">NX_LINK_GET_RX_COUNT</span><span class="sxs-lookup"><span data-stu-id="74e1d-476">NX_LINK_GET_RX_COUNT</span></span>                                                                                       |
| <span data-ttu-id="74e1d-477">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-477">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-478">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-478">Pointer to IP instance</span></span>                                                                                     |
| <span data-ttu-id="74e1d-479">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-479">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-480">受信パケット数の配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-480">Pointer to the destination to place the receive packet count</span></span>                                               |
| <span data-ttu-id="74e1d-481">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-481">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-482">物理ネットワーク インターフェイスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-482">Pointer to the physical network interface</span></span>                                                                  |
| <span data-ttu-id="74e1d-483">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-483">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-484">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-484">Completion status.</span></span> <span data-ttu-id="74e1d-485">ドライバーが受信数を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-485">If the driver is not able to get receive count, it will return a non-zero error status.</span></span> |


> [!NOTE]
> <span data-ttu-id="74e1d-486">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-486">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="get-transmit-packet-count"></a><span data-ttu-id="74e1d-487">送信パケット数を取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-487">Get Transmit Packet Count</span></span>  

<span data-ttu-id="74e1d-488">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-488">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-489">リンクの送信パケット数は、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-489">The driver stores the link's transmit packet count in the supplied destination.</span></span> <span data-ttu-id="74e1d-490">この機能をサポートするために、ドライバーは、各インターフェイス上で送信する各パケットを追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-490">To support this feature, the driver needs to keep track of each packet it transmits on each interface.</span></span> <span data-ttu-id="74e1d-491">次の NX_IP_DRIVER メンバーは、リンクの送信パケット数要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-491">The following NX_IP_DRIVER members are used for the link transmit packet count request.</span></span>

| <span data-ttu-id="74e1d-492">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-492">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-493">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-493">Meaning</span></span>                                                                                                     |
|-------------------------|-------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-494">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-494">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-495">NX_LINK_GET_TX_COUNT</span><span class="sxs-lookup"><span data-stu-id="74e1d-495">NX_LINK_GET_TX_COUNT</span></span>                                                                                        |
| <span data-ttu-id="74e1d-496">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-496">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-497">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-497">Pointer to IP instance</span></span>                                                                                      |
| <span data-ttu-id="74e1d-498">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-498">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-499">送信パケット数の配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-499">Pointer to the destination to place the transmit packet count</span></span>                                               |
| <span data-ttu-id="74e1d-500">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-500">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-501">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-501">Pointer to the interface instance</span></span>                                                                           |
| <span data-ttu-id="74e1d-502">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-502">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-503">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-503">Completion status.</span></span> <span data-ttu-id="74e1d-504">ドライバーが送信数を取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-504">If the driver is not able to get transmit count, it will return a non-zero error status.</span></span> |


> [!NOTE]
> <span data-ttu-id="74e1d-505">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-505">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="get-allocation-errors"></a><span data-ttu-id="74e1d-506">割り当てエラーを取得する</span><span class="sxs-lookup"><span data-stu-id="74e1d-506">Get Allocation Errors</span></span>  

<span data-ttu-id="74e1d-507">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-507">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-508">リンクのパケット プール割り当てエラー数は、指定された宛先内にドライバーによって格納されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-508">The driver stores the link's packet pool allocation error count in the supplied destination.</span></span> <span data-ttu-id="74e1d-509">次の NX_IP_DRIVER メンバーは、リンクの割り当てエラー数要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-509">The following NX_IP_DRIVER members are used for the link allocation error count request.</span></span>

| <span data-ttu-id="74e1d-510">**NX_IP_DRIVER member**</span><span class="sxs-lookup"><span data-stu-id="74e1d-510">**NX_IP_DRIVER member**</span></span> | <span data-ttu-id="74e1d-511">**意味**</span><span class="sxs-lookup"><span data-stu-id="74e1d-511">**Meaning**</span></span> |
| --- | ---|
| <span data-ttu-id="74e1d-512">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-512">nx_ip_driver_command</span></span> | <span data-ttu-id="74e1d-513">NX_LINK_GET_ALLOC_ERRORS</span><span class="sxs-lookup"><span data-stu-id="74e1d-513">NX_LINK_GET_ALLOC_ERRORS</span></span> |
| <span data-ttu-id="74e1d-514">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-514">nx_ip_driver_ptr</span></span> | <span data-ttu-id="74e1d-515">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-515">Pointer to IP instance</span></span> |

| <span data-ttu-id="74e1d-516">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-516">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-517">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-517">Meaning</span></span>                                                                                                        |
|-------------------------|----------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-518">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-518">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-519">割り当てエラー数の配置先へのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-519">Pointer to the destination to place the allocation error count</span></span>                                                 |
| <span data-ttu-id="74e1d-520">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-520">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-521">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-521">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="74e1d-522">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-522">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-523">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-523">Completion status.</span></span> <span data-ttu-id="74e1d-524">ドライバーが割り当てエラーを取得できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-524">If the driver is not able to get allocation errors, it will return a non-zero error status.</span></span> |


<span data-ttu-id="74e1d-525">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-525">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="driver-deferred-processing"></a><span data-ttu-id="74e1d-526">ドライバー遅延処理</span><span class="sxs-lookup"><span data-stu-id="74e1d-526">Driver Deferred Processing</span></span>  

<span data-ttu-id="74e1d-527">この要求は、送信または受信 ISR から _ ***nx_ip_driver_deferred_processing*** ルーチンを呼び出しているドライバーへの応答として、IP ヘルパー スレッドから行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-527">This request is made from the IP helper thread in response to the driver calling the _ ***nx_ip_driver_deferred_processing*** routine from a transmit or receive ISR.</span></span> <span data-ttu-id="74e1d-528">これにより、ドライバー ISR はパケットの受信および送信処理を IP ヘルパー スレッドに任せて、ISR 内の処理量を減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-528">This allows the driver ISR to defer the packet receive and transmit processing to the IP helper thread and thus reduce the amount to process in the ISR.</span></span> <span data-ttu-id="74e1d-529">*Nx_ip_driver_interface* が指す NX_INTERFACE 構造体内の *nx_interface_additional_link_info* フィールドは、IP ヘルパー スレッド コンテキストからの遅延処理イベントに関する情報を格納するために、ドライバーによって使用される場合があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-529">The *nx_interface_additional_link_info* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* may be used by the driver to store information about the deferred processing event from the IP helper thread context.</span></span> <span data-ttu-id="74e1d-530">次の NX_IP_DRIVER メンバーは、遅延処理イベントに使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-530">The following NX_IP_DRIVER members are used for the deferred processing event.</span></span>

<span data-ttu-id="74e1d-531">**NX_IP_DRIVER**</span><span class="sxs-lookup"><span data-stu-id="74e1d-531">**NX_IP_DRIVER**</span></span>

| <span data-ttu-id="74e1d-532">member</span><span class="sxs-lookup"><span data-stu-id="74e1d-532">member</span></span>                 | <span data-ttu-id="74e1d-533">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-533">Meaning</span></span>                           |
|------------------------|-----------------------------------|
| <span data-ttu-id="74e1d-534">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-534">nx_ip_driver_command</span></span>   | <span data-ttu-id="74e1d-535">NX_LINK_DEFERRED_PROCESSING</span><span class="sxs-lookup"><span data-stu-id="74e1d-535">NX_LINK_DEFERRED_PROCESSING</span></span>       |
| <span data-ttu-id="74e1d-536">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-536">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="74e1d-537">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-537">Pointer to IP instance</span></span>            |
| <span data-ttu-id="74e1d-538">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-538">nx_ip_driver_interface</span></span> | <span data-ttu-id="74e1d-539">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-539">Pointer to the interface instance</span></span> |


### <a name="user-commands"></a><span data-ttu-id="74e1d-540">ユーザー コマンド</span><span class="sxs-lookup"><span data-stu-id="74e1d-540">User Commands</span></span>  

<span data-ttu-id="74e1d-541">この要求は、***nx_ip_driver_direct_command*** サービス内から行われます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-541">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="74e1d-542">ドライバーは、アプリケーション固有のユーザーコマンドを処理します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-542">The driver processes the application specific user commands.</span></span> <span data-ttu-id="74e1d-543">次の NX_IP_DRIVER メンバーは、ユーザー コマンド要求に使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-543">The following NX_IP_DRIVER members are used for the user command request.</span></span>

| <span data-ttu-id="74e1d-544">NX_IP_DRIVER メンバー</span><span class="sxs-lookup"><span data-stu-id="74e1d-544">NX_IP_DRIVER member</span></span>     | <span data-ttu-id="74e1d-545">意味</span><span class="sxs-lookup"><span data-stu-id="74e1d-545">Meaning</span></span>                                                                                                        |
|-------------------------|----------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="74e1d-546">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="74e1d-546">nx_ip_driver_command</span></span>    | <span data-ttu-id="74e1d-547">NX_LINK_USER_COMMAND</span><span class="sxs-lookup"><span data-stu-id="74e1d-547">NX_LINK_USER_COMMAND</span></span>                                                                                           |
| <span data-ttu-id="74e1d-548">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-548">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="74e1d-549">IP インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-549">Pointer to IP instance</span></span>                                                                                         |
| <span data-ttu-id="74e1d-550">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="74e1d-550">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="74e1d-551">ユーザー定義</span><span class="sxs-lookup"><span data-stu-id="74e1d-551">User defined</span></span>                                                                                                   |
| <span data-ttu-id="74e1d-552">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="74e1d-552">nx_ip_driver_interface</span></span>  | <span data-ttu-id="74e1d-553">インターフェイス インスタンスへのポインター</span><span class="sxs-lookup"><span data-stu-id="74e1d-553">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="74e1d-554">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="74e1d-554">nx_ip_driver_status</span></span>     | <span data-ttu-id="74e1d-555">完了状態。</span><span class="sxs-lookup"><span data-stu-id="74e1d-555">Completion status.</span></span> <span data-ttu-id="74e1d-556">ドライバーがユーザー コマンドを実行できない場合は、0 以外のエラー状態が返されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-556">If the driver is not able to execute user commands, it will return a non-zero error status.</span></span> |


<span data-ttu-id="74e1d-557">*この要求は NetX によって内部的に使用されないため、実装は省略可能です。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-557">*This request is not used internally by NetX so its implementation is optional.*</span></span>

### <a name="unimplemented-commands"></a><span data-ttu-id="74e1d-558">実装されていないコマンド</span><span class="sxs-lookup"><span data-stu-id="74e1d-558">Unimplemented Commands</span></span>  

<span data-ttu-id="74e1d-559">ネットワーク ドライバーによって実装されていないコマンドのリターン状態フィールドは、NX_UNHANDLED_COMMAND に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-559">Commands unimplemented by the network driver must have the return status field set to NX_UNHANDLED_COMMAND.</span></span>

## <a name="driver-output"></a><span data-ttu-id="74e1d-560">ドライバーの出力</span><span class="sxs-lookup"><span data-stu-id="74e1d-560">Driver Output</span></span>  

<span data-ttu-id="74e1d-561">前述のすべてのパケット送信要求には、ドライバー内で実装された出力関数が必要です。</span><span class="sxs-lookup"><span data-stu-id="74e1d-561">All previously mentioned packet transmit requests require an output function implemented in the driver.</span></span> <span data-ttu-id="74e1d-562">特別な送信ロジックはハードウェア固有ですが、通常は、パケットを直ちに送信できるハードウェア容量を確認することで構成されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-562">Specific transmit logic is hardware specific, but it usually consists of checking for hardware capacity to send the packet immediately.</span></span> <span data-ttu-id="74e1d-563">可能な場合、パケット ペイロード (およびパケット チェーン内の追加ペイロード) は 1 つ以上のハードウェア送信バッファーに読み込まれ、送信操作が開始されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-563">If possible, the packet payload (and additional payloads in the packet chain) are loaded into one or more of the hardware transmit buffers and a transmit operation is initiated.</span></span> <span data-ttu-id="74e1d-564">使用可能な送信バッファーに収まらないパケットは、キューに登録され、送信バッファーが使用可能になったときに送信されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-564">If the packet won't fit in the available transmit buffers, the packet should be queued, and be transmitted when the transmission buffers become available.</span></span>

<span data-ttu-id="74e1d-565">推奨される送信キューは、ヘッド ポインターとテール ポインターの両方を持つシングルリンクリストです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-565">The recommended transmit queue is a singly-linked list, having both head and tail pointers.</span></span> <span data-ttu-id="74e1d-566">新しいパケットがキューの最後に追加され、最も古いパケットが先頭で保持されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-566">New packets are added to the end of the queue, keeping the oldest packet at the front.</span></span> <span data-ttu-id="74e1d-567">*nx_packet_queue_next* フィールドは、キュー内のパケットの次のリンクとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-567">The *nx_packet_queue_next* field is used as the packet's next link in the queue.</span></span> <span data-ttu-id="74e1d-568">ドライバーは、送信キューのヘッド ポインターとテール ポインターを定義します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-568">The driver defines the head and tail pointers of  transmit queue.</span></span>

<span data-ttu-id="74e1d-569">*このキューは、ドライバーのスレッドおよび割り込み部分からアクセスされるため、キュー操作を中心に割り込み保護を配置する必要があります。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-569">*Because this queue is accessed from thread and interrupt portions of the driver, interrupt protection must be placed around the queue manipulations.*</span></span>

<span data-ttu-id="74e1d-570">物理ハードウェア実装のほとんどによって、パケット送信の完了時に割り込みが発生します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-570">Most physical hardware implementations generate an interrupt upon packet transmit completion.</span></span>
<span data-ttu-id="74e1d-571">ドライバーは、このような割り込みを受け取ると、通常は、送信中のパケットに関連付けられているリソースを解放します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-571">When the driver receives such an interrupt, it typically releases the resources associated with the packet just being transmitted.</span></span> <span data-ttu-id="74e1d-572">送信ロジックが NX_PACKET バッファーから直接データを読み取る場合、ドライバーは、 ***nx_packet_transmit_release*** サービスを使用して、送信完了割り込みに関連付けられているパケットを解放し、使用可能なパケット プールに戻します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-572">In case the transmit logic reads data directly from the NX_PACKET buffer, the driver should use the ***nx_packet_transmit_release*** service to release the packet associated with the transmit complete interrupt back to the available packet pool.</span></span> <span data-ttu-id="74e1d-573">次に、ドライバーは、送信キューに、送信待ちの追加パケットがないかどうかを調べます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-573">Next, the driver examines the transmit queue for additional packets waiting to be sent.</span></span> <span data-ttu-id="74e1d-574">キュー登録された送信パケットのうち、ハードウェア送信バッファーに適合するものが、キューから取り出され、バッファーに読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-574">As many of the queued transmit packets that fit into the hardware transmit buffer(s) are de-queued and loaded into the buffers.</span></span> <span data-ttu-id="74e1d-575">その後、別の送信操作が開始されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-575">This is followed by initiation of another send operation.</span></span>

<span data-ttu-id="74e1d-576">NX_PACKET 内のデータが送信元 FIFO に移動された時点で (ドライバーがゼロコピー操作をサポートしている場合は、NX_PACKET 内のデータが送信された時点で)、ドライバーは、***nx_packet_transmit_release*** を呼び出す前に、nx_packet_prepend_ptr を IP ヘッダーの先頭に移動する必要があり ます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-576">As soon as the data in the NX_PACKET has been moved into the transmitter FIFO (or in case a driver supports zerocopy operation, the data in NX_PACKET has been transmitted), the driver must move the nx_packet_prepend_ptr to the beginning of the IP header before calling ***nx_packet_transmit_release.***</span></span> <span data-ttu-id="74e1d-577">忘れずに *nx_packet_length* フィールドを適宜調整してください。</span><span class="sxs-lookup"><span data-stu-id="74e1d-577">Remember to adjust *nx_packet_length* field accordingly.</span></span> <span data-ttu-id="74e1d-578">IP フレームが複数のパケットで構成されている場合は、パケット チェーンの先頭のみを解放する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-578">If an IP frame is made up of multiple packets, only the head of the packet chain needs to be released.</span></span>

## <a name="driver-input"></a><span data-ttu-id="74e1d-579">ドライバーの入力</span><span class="sxs-lookup"><span data-stu-id="74e1d-579">Driver Input</span></span>  

<span data-ttu-id="74e1d-580">ネットワーク ドライバーは、受信パケットの割り込みを受信すると、物理ハードウェアの受信バッファーからパケットを取得し、有効な NetX パケットを構築します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-580">Upon reception of a received packet interrupt, the network driver retrieves the packet from the physical hardware receive buffers and builds a valid NetX packet.</span></span> <span data-ttu-id="74e1d-581">有効な NetX パケットを構築するには、適切な長さフィールドを設定し、受信パケットのサイズが単一パケット ペイロードよりも大きい場合は、複数のパケットを連結する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-581">Building a valid NetX packet involves setting up the appropriate length field and chaining together multiple packets if the incoming packet's size is greater than a single packet payload.</span></span> <span data-ttu-id="74e1d-582">適切に構築されたら、prepend_ptr は物理レイヤー ヘッダーの後に移動され、受信パケットは NetX にディスパッチされます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-582">Once properly built, the prepend_ptr is moved after the physical layer header and the receive packet is dispatched to NetX.</span></span>

<span data-ttu-id="74e1d-583">NetX は、IP ヘッダーと ARP ヘッダーが ULONG 境界上でアラインされていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-583">NetX assumes that the IP and ARP headers are aligned on a ULONG boundary.</span></span> <span data-ttu-id="74e1d-584">そのため、NetX ドライバーは、このアライメントを確保する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-584">The NetX driver must, therefore, ensure this alignment.</span></span> <span data-ttu-id="74e1d-585">イーサネット環境内でこの処理を実行するには、パケットの先頭から 2 バイトのところでイーサネット ヘッダーを開始します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-585">In Ethernet environments this is done by starting the Ethernet header two bytes from the beginning of the packet.</span></span> <span data-ttu-id="74e1d-586">*nx_packet_prepend_ptr* がイーサネット ヘッダーを超えて移動されると、基になる IP ヘッダーまたは ARP ヘッダーは 4 バイトでアラインされます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-586">When the *nx_packet_prepend_ptr* is moved beyond the Ethernet header, the underlying IP or ARP header is 4byte aligned.</span></span>

<span data-ttu-id="74e1d-587">NetX 内で使用可能な受信パケット関数は複数あります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-587">There are several receive packet functions available in NetX.</span></span> <span data-ttu-id="74e1d-588">受信パケットが ARP パケットの場合は、 _\***nx_arp_packet_deferred_receive**_ が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-588">If the received packet is an ARP packet, _\***nx_arp_packet_deferred_receive**_ is called.</span></span> <span data-ttu-id="74e1d-589">受信パケットが RARP パケットの場合は、_*_nx_arp_packet_deferred_receive_*_ が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-589">If the received packet is an RARP packet, _ _*_nx_rarp_packet_deferred_receive_*_ is called.</span></span> <span data-ttu-id="74e1d-590">受信 IP パケットの処理オプションは複数あり、</span><span class="sxs-lookup"><span data-stu-id="74e1d-590">There are several options for handling incoming IP packets.</span></span> <span data-ttu-id="74e1d-591">IP パケットを最速で処理する場合は、_ _*_nx_ip_packet_receive_*_ が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-591">For the fastest handling of IP packets, _ _*_nx_ip_packet_receive_*_ is called.</span></span> <span data-ttu-id="74e1d-592">この方法の場合、オーバーヘッドは最も少なくて済みますが、ドライバーの受信割り込みサービス ハンドラー (ISR) 内で必要な処理が増えます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-592">This approach has the least overhead, but requires more processing in the driver's receive interrupt service handler (ISR).</span></span> <span data-ttu-id="74e1d-593">最小 ISR 処理の場合は、__ *_nx_ip_packet_deferred_receive_*\* が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-593">For minimal ISR processing __ *_nx_ip_packet_deferred_receive_*\* is called.</span></span>

<span data-ttu-id="74e1d-594">新しい受信パケットが適切に構築された後、物理ハードウェアの受信バッファーは、さらに多くのデータを受信するように設定されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-594">After the new receive packet is properly built, the physical hardware's receive buffers are setup to receive more data.</span></span> <span data-ttu-id="74e1d-595">これには、NetX パケットの割り当て、またはハードウェア受信バッファー内へのペイロード アドレスの配置が必要になることがあります。また、ハードウェア受信バッファー内の設定を変更するだけで済む場合もあります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-595">This might require allocating NetX packets and placing the payload address in the hardware receive buffer or it may simply amount to changing a setting in the hardware receive buffer.</span></span> <span data-ttu-id="74e1d-596">オーバーランの可能性を最小限に抑えるために重要なのは、パケットを受信した後、ハードウェアの受信バッファーにできるだけ早く使用可能なバッファーを確保することです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-596">To minimize overrun possibilities, it is important that the hardware's receive buffers have available buffers as soon as possible after a packet is received.</span></span>

<span data-ttu-id="74e1d-597">*初期受信バッファーは、ドライバーの初期化中に設定されます。*</span><span class="sxs-lookup"><span data-stu-id="74e1d-597">*The initial receive buffers are setup during driver initialization.*</span></span>

### <a name="deferred-receive-packet-handling"></a><span data-ttu-id="74e1d-598">遅延受信パケット処理</span><span class="sxs-lookup"><span data-stu-id="74e1d-598">Deferred Receive Packet Handling</span></span>  

<span data-ttu-id="74e1d-599">ドライバーは、受信パケット処理を NetX IP ヘルパー スレッドに任せる場合があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-599">The driver may defer receive packet processing to the NetX IP helper thread.</span></span> <span data-ttu-id="74e1d-600">一部のアプリケーションについては、これは ISR の処理とパケット破棄を最小限に抑えるうえで必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-600">For some applications this may be necessary to minimize ISR processing as well as dropped packets.</span></span> <span data-ttu-id="74e1d-601">遅延パケット処理を使用するには、NetX ライブラリが、定義済み \***NX_DRIVER_DEFERRED_PROCESSING** _ でコンパイルされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-601">To use deferred packet handling, the NetX library must first becompiled with \***NX_DRIVER_DEFERRED_PROCESSING** _ defined.</span></span> <span data-ttu-id="74e1d-602">これにより、遅延パケットロジックが NetX IP ヘルパー スレッドに追加されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-602">This adds the deferred packet logic to the NetX IP helper thread.</span></span> <span data-ttu-id="74e1d-603">次に、データ パケットの受信時に、ドライバーが __nx_ip_packet_deferred_receive()\* を呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-603">Next, on receiving a data packet, the driver must call __nx_ip_packet_deferred_receive():\*</span></span>

```C
_nx_ip_packet_deferred_receive(ip_ptr, packet_ptr);
```

<span data-ttu-id="74e1d-604">遅延受信関数により、*packet_ptr* によって表される受信パケットが FIFO (リンクリスト) 上に配置され、IP ヘルパー スレッドに通知されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-604">The deferred receive function places the receive packet represented by *packet_ptr* on a FIFO (linked list) and notifies the IP helper thread.</span></span> <span data-ttu-id="74e1d-605">実行後、IP ヘルパーは遅延処理関数を繰り返し呼び出して、遅延パケットを処理します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-605">After executing, the IP helper repetitively calls the deferred handling function to process each deferred packet.</span></span> <span data-ttu-id="74e1d-606">遅延ハンドラー処理には、通常、パケットの物理レイヤー ヘッダー (通常はイーサネット) の削除と、次のいずれかの NetX 受信関数へのディスパッチが含まれます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-606">The deferred handler processing typically includes removing the packet's physical layer header (usually Ethernet) and dispatching it to one of these NetX receive functions:</span></span>  

<span data-ttu-id="74e1d-607">***_nx_ip_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="74e1d-607">***_nx_ip_packet_deferred_receive***</span></span>  
<span data-ttu-id="74e1d-608">***_nx_arp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="74e1d-608">***_nx_arp_packet_deferred_receive***</span></span>  
<span data-ttu-id="74e1d-609">***_nx_rarp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="74e1d-609">***_nx_rarp_packet_deferred_receive***</span></span> 


## <a name="example-ram-ethernet-network-driver"></a><span data-ttu-id="74e1d-610">RAM イーサネット ネットワーク ドライバーの例</span><span class="sxs-lookup"><span data-stu-id="74e1d-610">Example RAM Ethernet Network Driver</span></span>  

<span data-ttu-id="74e1d-611">NetX デモ システムは、***nx_ram_network_driver*** ファイル内で定義されている小さな RAM ベースのネットワーク ドライバーを使用して提供されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-611">The NetX demonstration system is delivered with a small RAM-based network driver, defined in the file ***nx_ram_network_driver.c.***</span></span>
<span data-ttu-id="74e1d-612">このドライバーは、IP インスタンスがすべて同じネットワーク上にあることを前提としており、仮想ハードウェア アドレス (MAC アドレス) を、各デバイス インスタンスに作成時に割り当てるだけです。</span><span class="sxs-lookup"><span data-stu-id="74e1d-612">This driver assumes the IP instances are all on the same network and simply assigns virtual hardware addresses (MAC addresses) to each device instance as they are created.</span></span> <span data-ttu-id="74e1d-613">このファイルには、NetX 物理ネットワーク ドライバーの基本構造の良い例が示されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-613">This file provides a good example of the basic structure of NetX physical network drivers.</span></span> <span data-ttu-id="74e1d-614">ユーザーは、この例に示されているドライバー フレームワークを使用して、独自のネットワーク ドライバーを開発できます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-614">Users may develop their own network drivers using the driver framework presented in this example.</span></span>

<span data-ttu-id="74e1d-615">ネットワーク ドライバーのエントリ関数は、\* **_nx_ram_network_driver** _ で、これは IP インスタンスの作成呼び出しに渡されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-615">The entry function of the network driver is \***_nx_ram_network_driver,** _ which is passed to the IP instance create call.</span></span> <span data-ttu-id="74e1d-616">追加ネットワーク インターフェイスのエントリ関数は _*_nx_ip_interface_attach_*_ サービスに渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-616">Entry functions for additional network interfaces can be passed into the _*_nx_ip_interface_attach_*_ service.</span></span> <span data-ttu-id="74e1d-617">IP インスタンスが実行し始めたら、ドライバー エントリ関数が呼び出され、デバイスの初期化と有効化が行われます (「_ \*NX_LINK_INITIALIZE**」および「**NX_LINK_ENABLE\*\*」をご覧ください)。</span><span class="sxs-lookup"><span data-stu-id="74e1d-617">After the IP instance starts to run, the driver entry function is invoked to initialize and enable the device (refer to the case _ *NX_LINK_INITIALIZE*\* and **NX_LINK_ENABLE**).</span></span> <span data-ttu-id="74e1d-618">**NX_LINK_ENABLE** コマンドの実行後は、デバイスをパケットの送受信が可能な状態にしておきます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-618">After the **NX_LINK_ENABLE** command is issued, the device should be ready to transmit and receive packets.</span></span> 

<span data-ttu-id="74e1d-619">IP インスタンスは、次のいずれかのコマンドを使用してネットワーク パケットを転送します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-619">The IP instance transmits network packets via one of these commands:</span></span>

| <span data-ttu-id="74e1d-620">***NX_LINK_PACKET_SEND***</span><span class="sxs-lookup"><span data-stu-id="74e1d-620">***NX_LINK_PACKET_SEND***</span></span>    | <span data-ttu-id="74e1d-621">IP パケットが送信されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-621">An IP packet is being transmitted,</span></span>                             |
| ------------------------------- | -------------------------------------------------------------- |
| <span data-ttu-id="74e1d-622">***NX_LINK_ARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="74e1d-622">***NX_LINK_ARP_SEND***</span></span>       | <span data-ttu-id="74e1d-623">ARP 要求または ARP 応答パケットが送信されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-623">An ARP request or ARP response packet is being transmitted,</span></span>    |
| <span data-ttu-id="74e1d-624">***NX_LINK_ARP_RARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="74e1d-624">***NX_LINK_ARP_RARP_SEND***</span></span> | <span data-ttu-id="74e1d-625">リバース ARP 要求または応答パケットが送信されています。</span><span class="sxs-lookup"><span data-stu-id="74e1d-625">A Reverse ARP request or response packet is being transmitted,</span></span> |

<span data-ttu-id="74e1d-626">これらのコマンドの処理中、ネットワーク ドライバーは、適切なイーサネット フレーム ヘッダーを付加してから、基になるハードウェアに送信して、転送する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-626">On processing these commands, the network driver needs to prepend the appropriate Ethernet frame header, and then send it to the underlying hardware for transmission.</span></span> <span data-ttu-id="74e1d-627">転送処理中、ネットワーク ドライバーには、パケット バッファー領域の排他的な所有権があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-627">During the transmission process, the network driver has the exclusive ownership of the packet buffer area.</span></span> <span data-ttu-id="74e1d-628">そのため、データが転送されると (または、データがドライバー内の転送バッファーにコピーされると)、ネットワーク ドライバーはパケット バッファーを解放する必要があります。それには、まず先頭のポインターをイーサネット ヘッダーから IP ヘッダーに移動し (そして、必要に応じてパケットの長さを調整し)、***nx_packet_transmit_release*** サービスを呼び出して、パケットを解放します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-628">Therefore once the data are being transmitted (or once the data has been copied into the driver internal transfer buffer), the network driver is responsible for releasing the packet buffer by first moving the prepend pointer past the Ethernet header to the IP header (and adjust packet length accordingly), and then by calling the ***nx_packet_transmit_release*** service to release the packet.</span></span> <span data-ttu-id="74e1d-629">データ転送後にパケットを解放しないと、パケットがリークします。</span><span class="sxs-lookup"><span data-stu-id="74e1d-629">Not releasing the packet after data transmission will cause packets to leak.</span></span>

<span data-ttu-id="74e1d-630">ネットワーク デバイス ドライバーは、受信データ パケットの処理も実行します。</span><span class="sxs-lookup"><span data-stu-id="74e1d-630">The network device driver is also responsible for handling incoming data packets.</span></span> <span data-ttu-id="74e1d-631">RAM ドライバーの例では、受信パケットが、***_nx_ram_network_driver_receive*** 関数によって処理されます。</span><span class="sxs-lookup"><span data-stu-id="74e1d-631">In the RAM driver example, the received packet is processed by the function ***_nx_ram_network_driver_receive***.</span></span>

<span data-ttu-id="74e1d-632">デバイスがイーサネット フレームを受け取ったら、ドライバーはデータを</span><span class="sxs-lookup"><span data-stu-id="74e1d-632">Once the device receives an Ethernet frame, the driver is responsible for storing the data in</span></span>

<span data-ttu-id="74e1d-633">NX_PACKET 構造体内に格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-633">NX_PACKET structure.</span></span> <span data-ttu-id="74e1d-634">NetX は IP ヘッダーが 4 バイトでアラインされたアドレスで始まることを前提としている点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="74e1d-634">Note that NetX assumes the IP header starts from 4-byte aligned address.</span></span> <span data-ttu-id="74e1d-635">イーサネット ヘッダーの長さは 14 バイトであるため、ドライバーは、IP ヘッダーが 4 バイトでアラインされたアドレスで始まることを保証するために、イーサネット ヘッダーの開始位置を、2 バイトでアラインされたアドレスに格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="74e1d-635">Since the length of Ethernet header is 14-byte, the driver needs to store the starting of the Ethernet header at 2-byte aligned address to guarantee that the IP header starts at 4-byte aligned address.</span></span>